<!DOCTYPE html><html class="formal-specification status-work-in-progress anolis" lang=en><head><meta charset=utf-8>
<title>SuikaWiki Markup Language (SWML)</title>
<link href=spec.css rel=stylesheet>

</head><body><header>
<hgroup>
<h1 class="no-toc no-num">SuikaWiki Markup Language (SWML)</h1>
<h2 class="no-toc no-num">SuikaWiki Project, 16 June 2018</h2>


<dl>

<dt>Latest version
</dt><dd><a href=https://suikawiki.github.io/spec-swml/spec/>https://suikawiki.github.io/spec-swml/spec/</a>

</dd><dt>Version history
</dt><dd><a href=https://github.com/suikawiki/spec-swml/commits/gh-pages>https://github.com/suikawiki/spec-swml/commits/gh-pages</a>

</dd></dl>

</hgroup></header>

<section id=abstract>
<h1 class="no-toc no-num" id=abstract-0>Abstract</h1>

<p>This document defines the SWML syntax and the SWML vocabulary.
</p></section>

<section>
<h1 class="no-toc no-num" id=table-of-contents>Table of contents</h1>


<!--begin-toc-->
<ol class=toc>
 <li><a href=#introduction><span class=secno>1 </span>Introduction</a>
  <ol>
   <li><a href=#history><span class=secno>1.1 </span>History</a></li></ol></li>
 <li><a href=#terminology><span class=secno>2 </span>Terminology</a>
  <ol>
   <li><a href=#namespaces><span class=secno>2.1 </span>Namespaces</a></li>
   <li><a href=#definitions><span class=secno>2.2 </span>Definitions</a></li></ol></li>
 <li><a href=#the-swml-text-serialization><span class=secno>3 </span>The SWML text serialization</a>
  <ol>
   <li><a href=#document-structure-and-header><span class=secno>3.1 </span>Document structure and header</a></li>
   <li><a href=#body-part-blocks><span class=secno>3.2 </span>Body part blocks</a></li>
   <li><a href=#inline-contents><span class=secno>3.3 </span>Inline contents</a></li>
   <li><a href=#images><span class=secno>3.4 </span>Images</a></li>
   <li><a href=#lexical-structures><span class=secno>3.5 </span>Lexical structures</a></li></ol></li>
 <li><a href=#parsing-documents-in-the-swml-text-serialization><span class=secno>4 </span>Parsing documents in the <span>SWML text serialization</span></a>
  <ol>
   <li><a href=#tokenization-of-lines><span class=secno>4.1 </span>Tokenization of lines</a>
    <ol>
     <li><a href=#the-initial-mode><span class=secno>4.1.1 </span>The "<span>initial</span>" mode</a></li>
     <li><a href=#the-body-mode><span class=secno>4.1.2 </span>The "<span>body</span>" mode</a></li>
     <li><a href=#the-preformatted-mode><span class=secno>4.1.3 </span>The "<span>preformatted</span>" mode</a></li>
     <li><a href=#the-preformatted-block-mode><span class=secno>4.1.4 </span>The "<span>preformatted block</span>" mode</a></li>
     <li><a href=#the-image-data-mode><span class=secno>4.1.5 </span>The "<span>image data</span>" mode</a></li></ol></li>
   <li><a href=#tokenization-of-a-table-row><span class=secno>4.2 </span>Tokenization of a table row</a></li>
   <li><a href=#tokenization-of-a-text><span class=secno>4.3 </span>Tokenization of a text</a></li>
   <li><a href=#parsing-a-magic-line><span class=secno>4.4 </span>Parsing a magic line</a></li>
   <li><a href=#tree-construction><span class=secno>4.5 </span>Tree construction</a>
    <ol>
     <li><a href=#the-in-section-insertion-mode><span class=secno>4.5.1 </span>The "<span>in section</span>" <span>insertion mode</span></a></li>
     <li><a href=#the-in-table-row-insertion-mode><span class=secno>4.5.2 </span>The "<span>in table row</span>" <span>insertion mode</span></a></li>
     <li><a href=#the-in-paragraph-insertion-mode><span class=secno>4.5.3 </span>The "<span>in paragraph</span>" <span>insertion mode</span></a></li></ol></li></ol></li>
 <li><a href=#serializing-swml-text-serialization-documents><span class=secno>5 </span>Serializing <span>SWML text serialization</span> documents</a></li>
 <li><a href=#element-definitions-for-the-swml-text-serialization><span class=secno>6 </span>Element definitions for the SWML text serialization</a></li>
 <li><a href=#swml-mime-types><span class=secno>7 </span>SWML MIME types</a></li>
 <li><a href=#the-swml-xml-serialization><span class=secno>8 </span>The SWML XML serialization</a></li>
 <li><a href=#semantics-of-elements-and-attributes><span class=secno>9 </span>Semantics of elements and attributes</a>
  <ol>
   <li><a href=#document-structures><span class=secno>9.1 </span>Document structures</a>
    <ol>
     <li><a href=#the-document-element-in-the-suikawiki/0.9-namespace><span class=secno>9.1.1 </span>The <code>document</code>
element in the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-name-attribute-in-the-suikawiki/0.9-namespace><span class=secno>9.1.2 </span>The <code>Name</code> attribute in
the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-version-attribute-in-the-suikawiki/0.9-namespace><span class=secno>9.1.3 </span>The <code title=attr-sw-version>Version</code>
attribute in the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-parameter-element-in-the-suikawiki/0.9-namespace><span class=secno>9.1.4 </span>The <code>parameter</code>
element in the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-value-element-in-the-suikawiki/0.9-namespace><span class=secno>9.1.5 </span>The <code>value</code> element
in the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-class-attribute><span class=secno>9.1.6 </span>The <code>class</code> <span>attribute</span></a></li>
     <li><a href=#the-id-attribute><span class=secno>9.1.7 </span>The <code>id</code> <span>attribute</span></a></li>
     <li><a href=#the-xml:lang-attribute><span class=secno>9.1.8 </span>The <code>xml:lang</code> <span>attribute</span></a></li></ol></li>
   <li><a href=#blocks><span class=secno>9.2 </span>Blocks</a>
    <ol>
     <li><a href=#the-dr-element-in-the-suikawiki/0.9-namespace><span class=secno>9.2.1 </span>The <code>dr</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-comment-p-element-in-the-suikawiki/0.10-namespace><span class=secno>9.2.2 </span>The <code>comment-p</code> element in the
<span>SuikaWiki/0.10 namespace</span></a></li>
     <li><a href=#the-history-element-in-the-suikawiki/0.9-namespace><span class=secno>9.2.3 </span>The <code>history</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-example-element-in-the-suikawiki/0.9-namespace><span class=secno>9.2.4 </span>The <code>example</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-preamble-element-in-the-suikawiki/0.9-namespace><span class=secno>9.2.5 </span>The <code>preamble</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-postamble-element-in-the-suikawiki/0.9-namespace><span class=secno>9.2.6 </span>The <code>postamble</code> <span>element</span> in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-box-element-in-the-suikawiki/0.9-namespace><span class=secno>9.2.7 </span>The <code>box</code> <span>element</span> in the
<span>SuikaWiki/0.9 namespace</span></a></li></ol></li>
   <li><a href=#dialogues><span class=secno>9.3 </span>Dialogues</a>
    <ol>
     <li><a href=#the-dialogue-element-in-the-suikawiki/0.9-namespace><span class=secno>9.3.1 </span>The <code>dialogue</code> <span>element</span> in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-talk-element-in-the-suikawiki/0.9-namespace><span class=secno>9.3.2 </span>The <code>talk</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-speaker-element-in-the-suikawiki/0.9-namespace><span class=secno>9.3.3 </span>The <code>speaker</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li></ol></li>
   <li><a href=#hyperlinks><span class=secno>9.4 </span>Hyperlinks</a>
    <ol>
     <li><a href=#the-anchor-element-in-the-suikawiki/0.9-namespace><span class=secno>9.4.1 </span>The <code>anchor</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-anchor-internal-element-in-the-suikawiki/0.9-namespace><span class=secno>9.4.2 </span>The <code>anchor-internal</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-anchor-end-element-in-the-suikawiki/0.9-namespace><span class=secno>9.4.3 </span>The <code>anchor-end</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-anchor-attribute-in-the-suikawiki/0.9-namespace><span class=secno>9.4.4 </span>The <code>anchor</code> attribute
in the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-anchor-external-element-in-the-suikawiki/0.9-namespace><span class=secno>9.4.5 </span>The <code>anchor-external</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-resscheme-attribute-in-the-suikawiki/0.9-namespace><span class=secno>9.4.6 </span>The <code>resScheme</code>
attribute in the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-resparameter-attribute-in-the-suikawiki/0.9-namespace><span class=secno>9.4.7 </span>The <code>resParameter</code> attribute
in the <span>SuikaWiki/0.9 namespace</span></a></li></ol></li>
   <li><a href=#embedded-objects><span class=secno>9.5 </span>Embedded objects</a>
    <ol>
     <li><a href=#the-form-element-in-the-suikawiki/0.9-namespace><span class=secno>9.5.1 </span>The <code>form</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-image-element-in-the-suikawiki/0.9-namespace><span class=secno>9.5.2 </span>The <code>image</code> <span>element</span> in
the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-replace-element-in-the-suikawiki/0.9-namespace><span class=secno>9.5.3 </span>The <code>replace</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-text-element-in-the-suikawiki/0.9-namespace><span class=secno>9.5.4 </span>The <code>text</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li></ol></li>
   <li><a href=#citations><span class=secno>9.6 </span>Citations</a>
    <ol>
     <li><a href=#the-csection-element-in-the-suikawiki/0.10-namespace><span class=secno>9.6.1 </span>The <code>csection</code> element in the
<span>SuikaWiki/0.10 namespace</span></a></li>
     <li><a href=#the-src-element-in-the-suikawiki/0.10-namespace><span class=secno>9.6.2 </span>The <code>src</code> element in the
<span>SuikaWiki/0.10 namespace</span></a></li>
     <li><a href=#the-refs-element-in-the-suikawiki/0.9-namespace><span class=secno>9.6.3 </span>The <code>refs</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li></ol></li>
   <li><a href=#inline-structures><span class=secno>9.7 </span>Inline structures</a>
    <ol>
     <li><a href=#the-fenced-element-in-the-suikawiki/0.9-namespace><span class=secno>9.7.1 </span>The <code>fenced</code> <span>element</span> in
the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-openfence-element-in-the-suikawiki/0.9-namespace><span class=secno>9.7.2 </span>The <code>openfence</code> <span>element</span> in
the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-fencedtext-element-in-the-suikawiki/0.9-namespace><span class=secno>9.7.3 </span>The <code>fencedtext</code> <span>element</span> in
the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-closefence-element-in-the-suikawiki/0.9-namespace><span class=secno>9.7.4 </span>The <code>closefence</code> <span>element</span> in
the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-lines-element-in-the-suikawiki/0.9-namespace><span class=secno>9.7.5 </span>The <code>lines</code> <span>element</span> in
the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-line-element-in-the-suikawiki/0.9-namespace><span class=secno>9.7.6 </span>The <code>line</code> <span>element</span> in
the <span>SuikaWiki/0.9 namespace</span></a></li></ol></li>
   <li><a href=#editorial-annotations><span class=secno>9.8 </span>Editorial annotations</a>
    <ol>
     <li><a href=#the-insert-element-in-the-suikawiki/0.9-namespace><span class=secno>9.8.1 </span>The <code>insert</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-delete-element-in-the-suikawiki/0.9-namespace><span class=secno>9.8.2 </span>The <code>delete</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-ed-element-in-the-suikawiki/0.10-namespace><span class=secno>9.8.3 </span>The <code>ed</code> element in the <span>SuikaWiki/0.10
namespace</span></a></li>
     <li><a href=#the-asis-element-in-the-suikawiki/0.9-namespace><span class=secno>9.8.4 </span>The <code>asis</code> element in
the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-snip-element-in-the-suikawiki/0.9-namespace><span class=secno>9.8.5 </span>The <code>snip</code> <span>element</span> in the
<span>SuikaWiki/0.9 namespace</span></a></li></ol></li>
   <li><a href=#inline-annotations><span class=secno>9.9 </span>Inline annotations</a>
    <ol>
     <li><a href=#the-emph-element-in-the-suikawiki/0.9-namespace><span class=secno>9.9.1 </span>The <code>emph</code> element in
the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-rubyb-element-in-the-suikawiki/0.9-namespace><span class=secno>9.9.2 </span>The <code>rubyb</code> <span>element</span> in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-okuri-element-in-the-suikawiki/0.9-namespace><span class=secno>9.9.3 </span>The <code>okuri</code> <span>element</span> in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-weak-element-in-the-suikawiki/0.9-namespace><span class=secno>9.9.4 </span>The <code>weak</code> <span>element</span> in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-title-element-in-the-suikawiki/0.10-namespace><span class=secno>9.9.5 </span>The <code>title</code> <span>element</span> in the
<span>SuikaWiki/0.10 namespace</span></a></li></ol></li>
   <li><a href=#mathematical-representations><span class=secno>9.10 </span>Mathematical representations</a>
    <ol>
     <li><a href=#the-dotabove-element-in-the-suikawiki/0.9-namespace><span class=secno>9.10.1 </span>The <code>dotabove</code> <span>element</span> in
the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-vector-element-in-the-suikawiki/0.9-namespace><span class=secno>9.10.2 </span>The <code>vector</code> <span>element</span> in
the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-subsup-element-in-the-suikawiki/0.9-namespace><span class=secno>9.10.3 </span>The <code>subsup</code> <span>element</span> in
the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-subscript-element-in-the-suikawiki/0.9-namespace><span class=secno>9.10.4 </span>The <code>subscript</code> <span>element</span> in
the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-superscript-element-in-the-suikawiki/0.9-namespace><span class=secno>9.10.5 </span>The <code>superscript</code> <span>element</span> in
the <span>SuikaWiki/0.9 namespace</span></a></li></ol></li>
   <li><a href=#values><span class=secno>9.11 </span>Values</a>
    <ol>
     <li><a href=#the-f-element-in-the-suikawiki/0.9-namespace><span class=secno>9.11.1 </span>The <code>f</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-key-element-in-the-suikawiki/0.10-namespace><span class=secno>9.11.2 </span>The <code>key</code> element in the
<span>SuikaWiki/0.10 namespace</span></a></li>
     <li><a href=#the-n-element-in-the-suikawiki/0.9-namespace><span class=secno>9.11.3 </span>The <code>n</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-lat-element-in-the-suikawiki/0.9-namespace><span class=secno>9.11.4 </span>The <code>lat</code> <span>element</span> in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-lon-element-in-the-suikawiki/0.9-namespace><span class=secno>9.11.5 </span>The <code>lon</code> <span>element</span> in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-tz-element-in-the-suikawiki/0.9-namespace><span class=secno>9.11.6 </span>The <code>tz</code> <span>element</span> in
the <span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-attrvalue-element-in-the-suikawiki/0.10-namespace><span class=secno>9.11.7 </span>The <code>attrvalue</code> element in the
<span>SuikaWiki/0.10 namespace</span></a></li></ol></li>
   <li><a href=#conformance-keywords><span class=secno>9.12 </span>Conformance keywords</a>
    <ol>
     <li><a href=#the-must-element-in-the-suikawiki/0.9-namespace><span class=secno>9.12.1 </span>The <code>MUST</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-should-element-in-the-suikawiki/0.9-namespace><span class=secno>9.12.2 </span>The <code>SHOULD</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-may-element-in-the-suikawiki/0.9-namespace><span class=secno>9.12.3 </span>The <code>MAY</code> element in the
<span>SuikaWiki/0.9 namespace</span></a></li></ol></li>
   <li><a href=#physical-representations><span class=secno>9.13 </span>Physical representations</a>
    <ol>
     <li><a href=#the-smallcaps-element-in-the-suikawiki/0.9-namespace><span class=secno>9.13.1 </span>The <code>smallcaps</code> <span>element</span> in the
<span>SuikaWiki/0.9 namespace</span></a></li>
     <li><a href=#the-yoko-element-in-the-suikawiki/0.9-namespace><span class=secno>9.13.2 </span>The <code>yoko</code> <span>element</span> in the
<span>SuikaWiki/0.9 namespace</span></a></li></ol></li>
   <li><a href=#qualified-names><span class=secno>9.14 </span>Qualified names</a>
    <ol>
     <li><a href=#the-qn-element-in-the-suikawiki/0.10-namespace><span class=secno>9.14.1 </span>The <code>qn</code> element in the <span>SuikaWiki/0.10
namespace</span></a></li>
     <li><a href=#the-qname-element-in-the-suikawiki/0.10-namespace><span class=secno>9.14.2 </span>The <code>qname</code> element in the
<span>SuikaWiki/0.10 namespace</span></a></li>
     <li><a href=#the-nsuri-element-in-the-suikawiki/0.10-namespace><span class=secno>9.14.3 </span>The <code>nsuri</code> element in the
<span>SuikaWiki/0.10 namespace</span></a></li></ol></li>
   <li><a href=#fallback-elements><span class=secno>9.15 </span>Fallback elements</a>
    <ol>
     <li><a href=#uppercase-elements-in-the-suikawiki/0.10-namespace><span class=secno>9.15.1 </span><span>Uppercase elements</span> in the <span>SuikaWiki/0.10
namespace</span></a></li></ol></li></ol></li>
 <li><a href=#security><span class=secno>10 </span>Security</a></li>
 <li><a class=no-num href=#references>References</a>
  <ol>
   <li><a class=no-num href=#normative-references>Normative references</a></li></ol></li>
 <li><a class=no-num href=#tests-and-implementation>Tests and implementation</a></li>
 <li><a class=no-num href=#author>Author</a></li></ol>
<!--end-toc-->
</section>

<section>
<h1 id=introduction><span class=secno>1 </span>Introduction</h1>

<p><em>This section is non-normative.</em>

</p><p>This specification defines <dfn id=suikawiki-markup-language>SuikaWiki Markup Language</dfn>
(<dfn id=swml>SWML</dfn>).  SWML is the markup language developed and
implemented
for <a href=https://wiki.suikawiki.org/n/SuikaWiki>SuikaWiki</a>
hypertext system.  It is also used by other systems as a
human-friendly document authoring format.

</p><section>
<h1 id=history><span class=secno>1.1 </span>History</h1>

<p>SuikaWiki's Wiki syntax (now known as <a href=#the-swml-text-serialization>SWML text
serialization</a>) derived
from <a href=https://web.archive.org/web/20130124134737/http://digit.que.ne.jp/work/index.cgi?WalWiki>WalWiki</a>,
which derived
from <a href=http://www.hyuki.com/yukiwiki/>YukiWiki</a>,
in <time>2002</time>.

</p><p>The first specification of the extended
language, <a href=https://wiki.suikawiki.org/n/SuikaWiki%2F0.9><cite>SuikaWiki/0.9
Document Markup Format: Syntax Specification</cite></a>, was published
in <time>2003-12-12</time> and was frequently updated
until <time>2006-05-05</time>.

</p><p>Then several updates to the language, known as SuikaWiki/0.10, were
(incompletely) defined by following documents:

</p><ul>

<li><a href=https://suika.suikawiki.org/~wakaba/wiki/sw/n/SuikaWiki+0%2E10>SuikaWiki/0.10</a>,
<time>2005-05-31</time>.

</li><li><a href=https://suika.suikawiki.org/~wakaba/wiki/sw/n/SuikaWiki+0%2E10++1++1>SuikaWiki/0.10
— Inline Element Type Additions</a>, <time>2005-05-31</time>.

</li><li><a href=https://suika.suikawiki.org/~wakaba/wiki/sw/n/SuikaWiki+0.10++1++3>SuikaWiki/0.10
— Language Tags</a>, <time>2005-05-31</time>.

</li><li><a href=https://suika.suikawiki.org/~wakaba/wiki/sw/n/SuikaWiki+0%2E10++1++5>SuikaWiki/0.10
— Block‐level Additional Vocabulary</a>,
<time>2005-11-18</time>.

<!-- [TIME[][]] is added to SuikaWiki/0.10 later, but has never
documented and never implemented in SuikaWiki3 -->

</li></ul>

<p>These "two" versions of the language was merged and rewritten
as <em>the</em> SWML specification in 2008.

</p><p>Previous versions of the SWML specification were published at
<a href=https://suika.suikawiki.org/www/markup/suikawiki/spec/swml-work>https://suika.suikawiki.org/www/markup/suikawiki/spec/swml-work</a>.<!-- https://suika.suikawiki.org/gate/cvs/markup/suikawiki/spec/swml-work-src.en.html.u8
-->

</p><p>There
is <a href=https://suika.suikawiki.org/%7Ewakaba/wiki/sw/n/SWML%20possible%20new%20features>an
obsolete list of possible new features</a> that might have been
introduced in a revision of this specification.

</p><p>Revisions of the SWML specification are now available in the
<a href=https://github.com/suikawiki/spec-swml/commits/gh-pages>GitHub
repository</a>.

</p></section>

</section>

<section>
<h1 id=terminology><span class=secno>2 </span>Terminology</h1>

<p>This specification depends on the
<a href=https://infra.spec.whatwg.org/>Infra Standard</a>.

</p><section>
<h1 id=namespaces><span class=secno>2.1 </span>Namespaces</h1>

<p>For historical reason,
different <a href=#element title=element>elements</a>
and <a href=#attribute title=attribute>attributes</a> defined or used in this
specification belong to
different <span title=namespace>namespaces</span>.

</p><p>The <dfn id=aa-namespace>AA namespace</dfn> is
<code>http://pc5.2ch.net/test/read.cgi/hp/1096723178/aavocab#</code>.
The <a href=#preferred-prefix>preferred prefix</a> is <code title="">aa</code>.
The <dfn id=aa><code>aa</code></dfn> <a href=#element>element</a> is defined by
<a href=https://pc5.5ch.net/test/read.cgi/hp/1096723178/16><cite lang=ja>Strict-HTML
スレッド24</cite> &gt;&gt;16</a>.

</p><p>The <a href=#html-namespace>HTML namespace</a>'s <a href=#preferred-prefix>preferred prefix</a>
is <a href=#html><code>html</code></a>.  Following <a href=#element title=element>elements</a>
are defined by the <a href=https://html.spec.whatwg.org/><cite>HTML
Standard</cite></a>:

</p><ul class=short>
  <li><dfn id=abbr><code>abbr</code></dfn>
  </li><li><dfn id=b><code>b</code></dfn>
  </li><li><dfn id=blockquote><code>blockquote</code></dfn>
  </li><li><dfn id=element-html-body title=element-html-body><code>body</code></dfn>
  </li><li><dfn id=cite><code>cite</code></dfn>
  </li><li><dfn id=code><code>code</code></dfn>
  </li><li><dfn id=dd><code>dd</code></dfn>
  </li><li><dfn id=del><code>del</code></dfn>
  </li><li><dfn id=dfn><code>dfn</code></dfn>
  </li><li><dfn id=dt><code>dt</code></dfn>
  </li><li><dfn id=dl><code>dl</code></dfn>
  </li><li><dfn id=em><code>em</code></dfn>
  </li><li><dfn id=figcaption><code>figcaption</code></dfn>
  </li><li><dfn id=figure><code>figure</code></dfn>
  </li><li><dfn id=h1><code>h1</code></dfn>
  </li><li><dfn id=head><code>head</code></dfn>
  </li><li><dfn id=hr><code>hr</code></dfn>
  </li><li><dfn id=html><code>html</code></dfn>
  </li><li><dfn id=i><code>i</code></dfn>
  </li><li><dfn id=ins><code>ins</code></dfn>
  </li><li><dfn id=kbd><code>kbd</code></dfn>
  </li><li><dfn id=li><code>li</code></dfn>
  </li><li><dfn id=ol><code>ol</code></dfn>
  </li><li><dfn id=p><code>p</code></dfn>
  </li><li><dfn id=pre><code>pre</code></dfn>
  </li><li><dfn id=q><code>q</code></dfn>
  </li><li><dfn id=rt><code>rt</code></dfn>
  </li><li><dfn id=ruby><code>ruby</code></dfn>
  </li><li><dfn id=samp><code>samp</code></dfn>
  </li><li><dfn id=section><code>section</code></dfn>
  </li><li><dfn id=span><code>span</code></dfn>
  </li><li><dfn id=strong><code>strong</code></dfn>
  </li><li><dfn id=sub><code>sub</code></dfn>
  </li><li><dfn id=sup><code>sup</code></dfn>
  </li><li><dfn id=table><code>table</code></dfn>
  </li><li><dfn id=tbody><code>tbody</code></dfn>
  </li><li><dfn id=td><code>td</code></dfn>
  </li><li><dfn id=th><code>th</code></dfn>
  </li><li><dfn id=time><code>time</code></dfn>
  </li><li><dfn id=tr><code>tr</code></dfn>
  </li><li><dfn id=u><code>u</code></dfn>
  </li><li><dfn id=ul><code>ul</code></dfn>
  </li><li><dfn id=var><code>var</code></dfn>
</li></ul>

<p>The <dfn id=html3-namespace>HTML3 namespace</dfn> is
<code>urn:x-suika-fam-cx:markup:ietf:html:3:draft:00:</code>.
The <dfn id=note><code>note</code></dfn> <a href=#element>element</a> is defined in
the HTML 3.0 specification and belongs to the <a href=#html3-namespace>HTML3
namespace</a> for the purpose of this specification.

</p><p>The <a href=#mathml-namespace>MathML namespace</a>'s <a href=#preferred-prefix>preferred prefix</a>
is <code>math</code>.  Following <a href=#element title=element>elements</a>
are defined by
the <a href=https://www.w3.org/Math/draft-spec/mathml.html>MathML
specification</a>:

</p><ul class=short>
  <li><dfn id=mfrac><code>mfrac</code></dfn>
  </li><li><dfn id=mroot><code>mroot</code></dfn>
  </li><li><dfn id=msqrt><code>msqrt</code></dfn>
  </li><li><dfn id=mtext><code>mtext</code></dfn>
  </li><li><dfn id=munder><code>munder</code></dfn>
  </li><li><dfn id=munderover><code>munderover</code></dfn>
</li></ul>

<p>The <dfn id=suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</dfn> is
<code>urn:x-suika-fam-cx:markup:suikawiki:0:9:</code>.  The
<a href=#preferred-prefix>preferred prefix</a> is <code>sw</code>.

</p><p>The <dfn id=suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</dfn> is
<code>urn:x-suika-fam-cx:markup:suikawiki:0:10:</code>.  The
<a href=#preferred-prefix>preferred prefix</a> is <code>sw10</code>.

</p><p>The <dfn id=xhtml2-namespace>XHTML2 namespace</dfn> is
<code>http://www.w3.org/2002/06/xhtml2/</code>.

</p><p>The <a href=#xml-namespace>XML namespace</a>'s <a href=#preferred-prefix>preferred prefix</a>
is <code>xml</code>.

</p></section>

<section>
<h1 id=definitions><span class=secno>2.2 </span>Definitions</h1>

<p>The terms
<dfn id=byte-sequence>byte sequence</dfn>,
<dfn id=string>string</dfn>,
<dfn id=ascii-case-insensitive>ASCII case-insensitive</dfn>,
<dfn id=forgiving-base64-encode>forgiving-base64 encode</dfn>,
<dfn id=forgiving-base64-decode>forgiving-base64 decode</dfn>,
<dfn id=html-namespace>HTML namespace</dfn>,
<dfn id=mathml-namespace>MathML namespace</dfn>,
<dfn id=xml-namespace>XML namespace</dfn>,
<dfn id=xmlns-namespace>XMLNS namespace</dfn>,
are defined by the <a href=https://infra.spec.whatwg.org/>Infra Standard</a>.

</p><p>Terms
<dfn id=parent>parent</dfn>,
<dfn id=node-tree>node tree</dfn>,
<dfn id=append>append</dfn> (of <span>node</span>),
<dfn id=element>element</dfn>,
<dfn id=create-an-element>create an element</dfn>,
<dfn id=concept-element-local-name title=concept-element-local-name>element's local name</dfn>,
<dfn id=concept-element-namespace title=concept-element-namespace>element's namespace</dfn>,
<dfn id=concept-element-namespace-prefix title=concept-element-namespace-prefix>element's namespace prefix</dfn>,
<dfn id=concept-element-children title=concept-element-children>element's children</dfn>,
<dfn id=attribute>attribute</dfn>,
<dfn id=get-an-attribute-value>get an attribute value</dfn>,
<dfn id=set-an-attribute-value>set an attribute value</dfn>,
<dfn id=concept-attribute-local-name title=concept-attribute-local-name>attribute's local name</dfn>,
<dfn id=concept-attribute-namespace title=concept-attribute-namespace>attribute's namespace</dfn>,
and
<dfn id=concept-attribute-namespace-prefix title=concept-attribute-namespace-prefix>attribute's namespace prefix</dfn>
<dfn id=attribute-value title="attribute value">value</dfn> (of <a href=#attribute>attribute</a>),
<dfn id=owner-element title="owner element">element</dfn> (of <a href=#attribute>attribute</a>),
are defined by the <a href=https://dom.spec.whatwg.org/><cite>DOM
Standard</cite></a>.

</p><p>Terms
<dfn id=applicable-specification>applicable specification</dfn>,
<dfn id=content-attribute>content attribute</dfn>, <dfn id=idl-attribute>IDL attribute</dfn>,
<dfn id=valid-integer>valid integer</dfn>, <dfn id=rules-for-parsing-integers>rules for parsing integers</dfn>,
<dfn id=valid-e-mail-address>valid e-mail address</dfn>,
<dfn id=html-element>HTML element</dfn>,
<dfn id=represents>represents</dfn>,
<a href=https://www.whatwg.org/specs/web-apps/current-work/complete.html#inter-element-whitespace><dfn id=inter-element-whitespace>inter-element
whitespace</dfn></a>,
<a href=https://html.spec.whatwg.org/#text-content><dfn id=text-content title="text
content">text</dfn></a>,
<dfn id=flow-content>flow content</dfn>,
<dfn id=phrasing-content>phrasing content</dfn>,
<dfn id=script-supporting-elements>script-supporting elements</dfn>,
and
<a href=https://html.spec.whatwg.org/#concept-content-nothing><dfn id=nothing>nothing</dfn></a>
are defined by the <a href=https://html.spec.whatwg.org/><cite>HTML
Standard</cite></a>.

</p><p>Term
<dfn id=utf-8>UTF-8</dfn>
is
defined by the <a href=https://encoding.spec.whatwg.org/><cite>Encoding
Standard</cite></a>.

</p><p>Terms
<dfn id=url>URL</dfn>
and
<dfn id=valid-url-string>valid URL string</dfn>
are defined by the <a href=https://url.spec.whatwg.org/><cite>URL
Standard</cite></a>.

</p><p>Term
<dfn id=mime-type>MIME type</dfn>
is
defined by the <a href=https://mimesniff.spec.whatwg.org/><cite>MIME
Sniffing Standard</cite></a>.

</p><p><dfn id=white-space-characters>White space characters</dfn> are U+0009 <code class=charname>CHARACTER TABULATION</code> and U+0020 <a href=#space><code class=charname>SPACE</code></a>.

</p><p><dfn id=digits>Digits</dfn> are characters in the range U+0030 <code class=charname>DIGIT ZERO</code> .. U+0039 <code class=charname>DIGIT
NINE</code>.

</p><p><dfn id=uppercase-letters>Uppercase letters</dfn> are characters in the range U+0041
<code class=charname>LATIN CAPITAL LETTER A</code> .. U+005A <code class=charname>LATIN CAPITAL LETTER Z</code>.

</p><p><dfn id=lowercase-letters>Lowercase letters</dfn> are characters in the range U+0061
<code class=charname>LATIN SMALL LETTER A</code> .. U+007A <code class=charname>LATIN SMALL LETTER Z</code>.

</p><p><dfn id=language-tag-characters>Language tag characters</dfn> are <a href=#digits>digits</a>,
<a href=#uppercase-letters>uppercase letters</a>, <a href=#lowercase-letters>lowercase letters</a>, and
U+002D <code class=charname>HYPHEN-MINUS</code>.

</p><p><dfn id=scheme-characters>Scheme characters</dfn> are <a href=#digits>digits</a>,
<a href=#uppercase-letters>uppercase letters</a>, <a href=#lowercase-letters>lowercase letters</a>, U+0025
<code class=charname>PERCENT SIGN</code>, U+002A <code class=charname>PLUS SIGN</code>, U+002D <code class=charname>HYPHEN-MINUS</code>, U+002E <code class=charname>FULL
STOP</code> and U+005F <code class=charname>LOW LINE</code>.

</p><p>A <dfn id=language-specification>language specification</dfn> is a string consist of a
<code>@</code> character followed by zero or more <!-- one or more in
SuikaWiki3 implementation --> <a href=#language-tag-characters>language tag characters</a>.
<!-- SuikaWiki/0.10 addition --> The <dfn id=body-of-a-language-specification>body of a language
specification</dfn> is the substring in the <a href=#language-specification>language
specification</a> except for the first <code>@</code> character.
It might be the empty string.

</p><div class="note memo">

<p>Semantically, the <a href=#body-of-a-language-specification>body of a language specification</a>
represents a <span>language tag</span>, similar to
the <a href=#the-xml:lang-attribute><code>xml:lang</code></a> <a href=#attribute>attribute</a>.

</p></div>

<p>The <dfn id=concept-element-text-content title=concept-element-text-content>text content</dfn> of
an <a href=#element>element</a> is the value that would be returned by the
getter of the
<a href=https://dom.spec.whatwg.org/#dom-node-textcontent><code>textContent</code></a>
IDL attribute of the <a href=#element>element</a>.

</p></section>

</section>

<section>
<h1 id=the-swml-text-serialization><span class=secno>3 </span>The <dfn>SWML text serialization</dfn></h1>

<p><em>This section is non‐normative.</em>

</p><div class=XXX>

<p>Obviously, this section is incomplete; some prose definition is not
yet available; some xrefs does not work yet.  It should be specified
why this is non-normative.  ABNF definition &amp; charset consideration 
need to be addressed.

</p></div>

<p>Both prose and ABNF descriptions are non-normative.  The
conformance of a <a href=#the-swml-text-serialization>SWML text serialization</a> document is
defined in terms of the <a href=#swml-text-serialization-parser title="SWML text serialization
parser">parser</a> and its output.

</p><p class=XXX>Conformance checking steps

</p><section>
<h1 id=document-structure-and-header><span class=secno>3.1 </span>Document structure and header</h1>

<p>A <dfn id=concept-document title=concept-document>document</dfn> in the <a href=#the-swml-text-serialization>SWML text
serialization</a> consists of three parts: <a href=#concept-header-part title=concept-header-part>header part</a>, <a href=#concept-body-part title=concept-body-part>body part</a>, and optional <a href=#concept-image title=concept-image>image</a>.

</p><p>Several construct in a <a href=#concept-document title=concept-document>document</a>
refers <a href=#concept-page title=concept-page>page</a>.  A <dfn id=concept-page title=concept-page>page</dfn> is a unit of data in a hypertext
database.  The name of a <a href=#concept-page title=concept-page>page</a> is
sometimes referred to as <dfn id=concept-wikiname title=concept-WikiName>WikiName</dfn>.
A <a href=#concept-page title=concept-page>page</a> sometimes represents or is
associated with an image.  How to implement these concept, including
how to resolve <a href=#concept-wikiname title=concept-WikiName>WikiNames</a>, is not
defined in this specification.

</p><dl class=abnf>

<dt><dfn id=abnf-document>document</dfn>

</dt><dd>= <a href=#abnf-header-part title=abnf-header-part>header-part</a> <a href=#abnf-body-part title=abnf-body-part>body-part</a> [<a href=#abnf-obs-image title=abnf-obs-image>obs-image</a>]

</dd></dl>

<p>The <dfn id=concept-header-part title=concept-header-part>header part</dfn> has to be
empty.  In previous versions of SWML, a <dfn id=concept-magic-line title=concept-magic-line>magic line</dfn> could be contained, and in
fact was required in some versions, in the <a href=#concept-header-part title=concept-header-part>header part</a> of a <a href=#concept-document title=concept-document>document</a>.

</p><p>A <a href=#concept-magic-line title=concept-magic-line>magic line</a> has to contain a
string <code>#?</code>, followed by the <dfn id=concept-format-name title=concept-format-name>format name</dfn>, followed by a
<code>/</code> character, followed by the <dfn id=concept-format-version title=concept-format-version>format version</dfn>.  They identifies
the version of the markup language in which the <a href=#concept-document title=concept-document>document</a> is written.  Historically, only
two combinations of <a href=#concept-format-name title=concept-format-name>format name</a>
and <a href=#concept-format-version title=concept-format-version>format version</a> as shown
in the table below were defined, used, and implemented:

</p><table>

<thead>
<tr>
<th scope=col><a href=#concept-format-name title=concept-format-name>Format name</a>
</th><th scope=col><a href=#concept-format-version title=concept-format-version>Format version</a>
</th><th scope=col>Description

</th></tr></thead><tbody>

<tr>
<td><dfn id=concept-magic-format-suikawiki title=concept-magic-format-suikawiki><code>SuikaWiki</code></dfn>
</td><td><dfn id=concept-magic-version-suikawiki-09 title=concept-magic-version-suikawiki-09><code>0.9</code></dfn>
</td><td>The <span title=concept-suikawiki09>SuikaWiki/0.9</span> markup language.

</td></tr><tr>
<td><dfn id=concept-magic-format-suikawikiimage title=concept-magic-format-suikawikiimage><code>SuikaWikiImage</code></dfn>
</td><td><dfn id=concept-magic-version-suikawikiimage-09 title=concept-magic-version-suikawikiimage-09><code>0.9</code></dfn>
</td><td>The <span title=concept-suikawikiimage09>SuikaWikiImage/0.9</span> markup language.

</td></tr></tbody></table>

<p>A <a href=#concept-magic-line title=concept-magic-line>magic line</a> can contain zero
or more <dfn id=concept-parameter title=concept-parameter>parameters</dfn> after the <a href=#concept-format-version title=concept-format-version>format version</a>.  A <a href=#concept-parameter title=concept-parameter>parameter</a> consists of one or more
<a href=#white-space-characters>white space characters</a>, followed by the <dfn id=concept-parameter-name title=concept-parameter-name>name</dfn>, followed by a <code>=</code>
character, followed by a <a href=#concept-quoted-string title=concept-quoted-string>quoted
string</a> whose <a href=#concept-quoted-string-value title=concept-quoted-string-value>value</a> representing zero or
more <dfn id=concept-parameter-value title=concept-parameter-value>values</dfn> separeted by a
<code>,</code> character.  A <a href=#concept-parameter-value title=concept-parameter-value>parameter value</a> consists of zero
or more <a href=#concept-character title=concept-character>characters</a> except for the
separator character <code>,</code>.  Historically, following
combinations of <a href=#concept-parameter-name title=concept-parameter-name>parameter
names</a> and <a href=#concept-parameter-value title=concept-parameter-value>values</a> was
defined and used:

</p><table>

<thead>
<tr>
<th scope=col><a href=#concept-parameter-name title=concept-parameter-name>Name</a>
</th><th scope=col><a href=#concept-parameter-value title=concept-parameter-value>Values</a>
</th><th scope=col>Description

</th></tr></thead><tbody>

<tr>
<th scope=row><dfn id=concept-parameter-default-name title=concept-parameter-default-name><code>default-name</code></dfn>
</th><td>Zero or more <a href=#concept-character title=concept-character>characters</a> except for <code>,</code>
</td><td>The <a href=#concept-parameter-value title=concept-parameter-value>value</a> represetns
the default user name for <a href=#concept-wikiform title=concept-wikiform>WikiForm</a>
input fields.  Exactly one <a href=#concept-parameter-value title=concept-parameter-value>value</a>
can be specified.  The default when this <a href=#concept-parameter title=concept-parameter>parameter</a>
is implementation dependent.

</td></tr><tr>
<th scope=row><dfn id=concept-parameter-import title=concept-parameter-import><code>import</code></dfn>
</th><td>Zero or more <a href=#concept-character title=concept-character>characters</a> except for <code>,</code>
</td><td>A <a href=#concept-parameter-value title=concept-parameter-value>value</a> represents the
<a href=#concept-wikiname title=concept-WikiName>WikiName</a> by which definitions for
<a href=#concept-entity-reference title=concept-entity-reference>entity references</a> are
imported.  When this <a href=#concept-parameter title=concept-parameter>parameter</a> is
not specified, no definition is imported.

</td></tr><tr>
<th scope=row><dfn id=concept-parameter-interactive title=concept-parameter-interactive><code>interactive</code></dfn>
</th><td><dfn id=concept-parameter-interactive-yes title=concept-parameter-interactive-yes><code>yes</code></dfn> or
<dfn id=concept-parameter-interactive-no title=concept-parameter-interactive-no><code>no</code></dfn>
</td><td>Value <a href=#concept-parameter-interactive-yes><code title=concept-parameter-interactive-yes>yes</code></a>
means that the <a href=#concept-document title=concept-document>document</a> contains
an interactive content such as <a href=#concept-wikiform title=concept-wikiform>WikiForm</a>.
Value <a href=#concept-parameter-interactive-no><code title=concept-parameter-interactive-no>no</code></a>, the default
value used when the <a href=#concept-parameter title=concept-parameter>parameter</a> is
not specified, means the <a href=#concept-document title=concept-document>document</a> does
not contain such a content.  It was intended to be used for the convinience
of cache control mechanisms.

</td></tr><tr>
<th scope=row><dfn id=concept-parameter-obsolete title=concept-parameter-obsolete><code>obsolete</code></dfn>
</th><td rowspan=2><dfn id=concept-parameter-obsolete-yes title=concept-parameter-obsolete-yes><code>yes</code></dfn> or
<dfn id=concept-parameter-obsolete-no title=concept-parameter-obsolete-no><code>no</code></dfn>
</td><td rowspan=2>Value <a href=#concept-parameter-obsolete-yes><code title=concept-parameter-obsolete-yes>yes</code></a> means
the content of the <a href=#concept-document title=concept-document>document</a> is
obsolete, and value <a href=#concept-parameter-obsolete-no><code title=concept-parameter-obsolete-no>no</code></a>,
the default value used when the <a href=#concept-parameter title=concept-parameter>parameter</a>
is not specified, means the content is not obsolete.

<div class="note memo">

<p>The <a href=#concept-parameter-name title=concept-parameter-name>parameter name</a> <a href=#concept-parameter-obsolete><code title=concept-parameter-obsolete>obsolete</code></a> was defined in the
SuikaWiki/0.9 specification, but the <a href=#concept-parameter-name title=concept-parameter-name>parameter name</a> that had been
actually implemented in SuikaWiki2 and used was the <a href=#concept-parameter-name title=concept-parameter-name>parameter name</a> <a href=#concept-parameter-obsoleted><code title=concept-parameter-obsoleted>obsoleted</code></a>.

</p></div>

</td></tr><tr>
<th scope=row><dfn id=concept-parameter-obsoleted title=concept-parameter-obsoleted><code>obsoleted</code></dfn>

</th></tr><tr> <th scope=row><dfn id=concept-parameter-page-icon title=concept-parameter-page-icon><code>page-icon</code></dfn>
</th><td>Zero or more <a href=#concept-character title=concept-character>characters</a>
except for <code>,</code>
</td><td>The <a href=#concept-parameter-value title=concept-parameter-value>value</a> represents
the <a href=#concept-wikiname title=concept-WikiName>WikiName</a> by which the page
icon is imported.  The page icon can be used as favicon <span class=XXX>@@ [ref]</span>, for example.  Exactly one <a href=#concept-parameter-value title=concept-parameter-value>value</a> can be specified.  The
default when this <a href=#concept-parameter title=concept-parameter>parameter</a> is
implementation dependent.

</td></tr></tbody><tbody>

<tr>
<th scope=row><dfn id=concept-parameter-image-alt title=concept-parameter-image-alt><code>image-alt</code></dfn>
</th><td>Zero or more <a href=#concept-character title=concept-character>characters</a> except for <code>,</code>
</td><td>The <a href=#concept-parameter-value title=concept-parameter-value>value</a> represents the
alternative text for the <a href=#concept-image title=concept-image>image</a> embedded in the
<a href=#concept-document title=concept-document>document</a>.  Exactly one
<a href=#concept-parameter-value title=concept-parameter-value>value</a> can be specified.  The
default when this <a href=#concept-parameter title=concept-parameter>parameter</a>
is the empty string.

</td></tr><tr>
<th scope=row><dfn id=concept-parameter-image-type title=concept-parameter-image-type><code>image-type</code></dfn>
</th><td>An Internet Media Type with no parameter, white spaces, comments
</td><td>The <a href=#concept-parameter-value title=concept-parameter-value>value</a> represents the
type of the <a href=#concept-image title=concept-image>image</a> embedded in the
<a href=#concept-document title=concept-document>document</a>.  Exactly one
<a href=#concept-parameter-value title=concept-parameter-value>value</a> can be specified.
This <a href=#concept-parameter title=concept-parameter>parameter</a> has to be specified
when the <a href=#concept-document title=concept-document>document</a> contains an
<a href=#concept-image title=concept-image>image</a>.

</td></tr></tbody></table>

<p>The order in which <a href=#concept-parameter title=concept-parameter>parameters</a>
are specified is not significant.  The <a href=#concept-parameter-name title=concept-parameter-name>parameter name</a> of a <a href=#concept-parameter title=concept-parameter>parameter</a> has to be different from the
<a href=#concept-parameter-name title=concept-parameter-name>parameter name</a> of any other
<a href=#concept-parameter title=concept-parameter>parameter</a>.

</p><p>A <a href=#concept-magic-line title=concept-magic-line>magic line</a> has to be
terminated by zero or more <a href=#white-space-characters>white space characters</a>
followed by a <a href=#concept-newline title=concept-newline>newline</a>.

</p><dl class=abnf>

<dt><dfn id=abnf-header-part title=abnf-header-part>header-part</dfn>

</dt><dd>= [<a href=#abnf-obs-magic-line title=abnf-obs-magic-line>obs-magic-line</a>]

</dd><dt><dfn id=abnf-obs-magic-line title=abnf-obs-magic-line>obs-magic-line</dfn>

</dt><dd>= "#?" <a href=#abnf-format-name title=abnf-format-name>format-name</a> "/" <a href=#abnf-format-version title=abnf-format-version>format-version</a> *(<!-- In
SuikaWiki/0.9 spec WSP can be omitted, which is wrong. -->1*<a href=#abnf-white-space title=abnf-white-space>white-space</a> <a href=#abnf-parameter title=abnf-parameter>parameter</a>) *<a href=#abnf-white-space title=abnf-white-space>white-space</a> <a href=#abnf-newline title=abnf-newline>newline</a>

</dd><dt><dfn id=abnf-format-name title=abnf-format-name>format-name</dfn>

</dt><dd>= <a href=#abnf-identifier title=abnf-identifier>identifier</a>

</dd><dt><dfn id=abnf-format-version title=abnf-format-version>format-version</dfn>

</dt><dd>= <a href=#abnf-identifier title=abnf-identifier>identifier</a>

</dd><dt><dfn id=abnf-parameter title=abnf-parameter>parameter</dfn>

</dt><dd>= <a href=#abnf-parameter-name title=abnf-parameter-name>parameter-name</a> "=" <a href=#abnf-quoted-string title=abnf-quoted-string>quoted-string</a>

</dd><dt><dfn id=abnf-parameter-name title=abnf-parameter-name>parameter-name</dfn>

</dt><dd>= <a href=#abnf-identifier title=abnf-identifier>identifier</a>

</dd><dt><dfn id=abnf-parameter-value-list title=abnf-parameter-value-list>parameter-value-list</dfn>

</dt><dd>= [<a href=#abnf-parameter-value title=abnf-parameter-value>parameter-value</a> *(","
<a href=#abnf-parameter-value title=abnf-parameter-value>parameter-value</a>)]

</dd><dt><dfn id=abnf-parameter-value title=abnf-parameter-value>parameter-value</dfn>

</dt><dd>:= *(<a href=#abnf-char title=abnf-char>char</a> − ",")

</dd></dl>

</section>

<section>
<h1 id=body-part-blocks><span class=secno>3.2 </span>Body part blocks</h1>

<p>The <dfn id=concept-body-part title=concept-body-part>body part</dfn> of a <a href=#concept-document title=concept-document>document</a> consists of zero or more <a href=#concept-block title=concept-block>blocks</a>.

</p><p>There are several kinds of <dfn id=concept-block title=concept-block>blocks</dfn>:
<a href=#concept-paragraph title=concept-paragraph>paragraphs</a>, <a href=#concept-heading title=concept-heading>headings</a>, <a href=#concept-list title=concept-list>lists</a>, <a href=#concept-labeled-list title=concept-labeled-list>labeled lists</a>, <span title=concept-quotation>quotations</span>, <span title=concept-preformatted-paragraph>preformatted paragraphs</span>,
<span title=concept-edit-section>editted sections</span>, <a href=#concept-table title=concept-table>tables</a>, <span title=concept-editorial-note>editorial notes</span>, <a href=#concept-comment-paragraph title=concept-comment-paragraph>comment paragraphs</a>,
<a href=#concept-hr title=concept-hr>hrs</a>,
and <a href=#concept-empty-block title=concept-empty-block>empty blocks</a>.  In
addition, <a href=#concept-form title=concept-form>forms</a>
and <a href=#concept-entity-reference title=concept-entity-reference>entity references</a> can
also be used as <span title=concept-blocks>blocks</span>.

</p><p><dfn id=concept-empty-block title=concept-empty-block>Empty blocks</dfn>, which is
represented by an empty line, can be inserted between any two <a href=#concept-block title=concept-block>blocks</a>.  It is sometimes necessary to
prevent a <a href=#concept-block title=concept-block>block</a> from being
interpreted as a part of the previous <a href=#concept-block title=concept-block>block</a>.

</p><div class=example>

<p>For example, consider the following fragment:

</p><pre><code>- List item.
This line is part of the list item.</code></pre>

<p>The second line is part of the <a href=#concept-list title=concept-list>list</a>, by definition.  If it is not desired,
an <a href=#concept-empty-block title=concept-empty-block>empty block</a> can be inserted
between two lines as:

</p><pre><code>- List item.

This line is <em>not</em> part of the list item.</code></pre>

<p>... such that the third line represents a <a href=#concept-paragraph title=concept-paragraph>paragraph</a>.

</p></div>

<dl class=abnf>

<dt><dfn id=abnf-body-part title=abnf-body-part>body-part</dfn>

</dt><dd>= *<a href=#abnf-block title=abnf-block>block</a>

</dd><dt><dfn id=abnf-block title=abnf-block>block</dfn>

</dt><dd>= <a href=#abnf-paragraph title=abnf-paragraph>paragraph</a> / <a href=#abnf-heading title=abnf-heading>heading</a> / <a href=#abnf-list title=abnf-list>list</a>
/ <a href=#abnf-labeled-list title=abnf-labeled-list>labeled-list</a> / <a href=#abnf-quotation title=abnf-quotation>quotation</a> / <a href=#abnf-preformatted-paragraph title=abnf-preformatted-paragraph>preformatted-paragraph</a> /
<a href=#abnf-section-block title=abnf-section-block>section-block</a>
/ <a href=#abnf-table title=abnf-table>table</a>
/ <a href=#abnf-editorial-note title=abnf-editorial-note>editorial-note</a>
/ <a href=#abnf-comment-paragraph title=abnf-comment-paragraph>comment-paragraph</a>
/ <a href=#abnf-hr title=abnf-hr>hr</a>
/ <a href=#abnf-empty-block title=abnf-empty-block>empty-block</a>
/ <a href=#abnf-form title=abnf-form>form</a>
/ <a href=#abnf-obs-entity-reference title=abnf-obs-entity-reference>obs-entity-reference</a>

</dd><dt><dfn id=abnf-empty-block title=abnf-empty-block>empty-block</dfn>

</dt><dd>= <a href=#abnf-newline title=abnf-newline>newline

</a></dd></dl>

<p>A <dfn id=concept-paragraph title=concept-paragraph>paragraph</dfn> represents a unit of
the text, similar to HTML's <a href=#p><code>p</code></a> element.  It consists of an
optional <span title=concept-destination-anchor-number>destination
anchor number</span>, followed by a <span title=concept-line-contents>line contents</span>, followed by a <a href=#concept-newline title=concept-newline>newline</a>, followed by zero or more <a href=#concept-block-child title=concept-block-child>block children</a>.

</p><div class="note memo">

<p>A <a href=#concept-paragraph title=concept-paragraph>paragraph</a> cannot begin with
a <a href=#concept-form title=concept-form>form</a> or <a href=#concept-entity-reference title=concept-entity-reference>entity reference</a>, since it is
treated as a <a href=#concept-block title=concept-block>block</a> when it appears at the
beginning of a line.  A <a href=#concept-paragraph title=concept-paragraph>paragraph</a>
cannot begin with a <a href=#white-space-characters title="white space characters">white space
character</a>, since it is treated as a <span title=concept-preformatted-paragraph>preformatted paragraph</span>
then.

</p></div>

<p>A <dfn id=concept-block-child title=concept-block-child>block child</dfn> is one of an
optional <span title=concept-destination-anchor-number>destination
anchor number</span> followed by <span title=concept-line-contents>line contents</span> followed by a <a href=#concept-newline title=concept-newline>newline</a>, a <a href=#concept-list title=concept-list>list</a>, a <a href=#concept-labeled-list title=concept-labeled-list>labeled list</a>, a <span title=concept-preformatted-paragraph>preformatted paragraph</span>, an
<a href=#concept-section-block title=concept-section-block>section block</a>,
a <a href=#concept-table title=concept-table>table</a>,
an <a href=#concept-editorial-notes title=concept-editorial-notes>editorial note</a>,
a <a href=#concept-comment-paragraph title=concept-comment-paragraph>comment paragraph</a>, or
an <a href=#concept-hr title=concept-hr>hr</a>.

</p><p>An <dfn id=concept-editorial-notes title=concept-editorial-notes>editorial note</dfn>
represents an editorial note.  It is represented by a
string <code>@@</code>, followed by zero or more <a href=#white-space-characters>white space
characters</a>, followed by zero or
more <a href=#concept-block-child title=concept-block-child>block children</a>.

</p><p>A <dfn id=concept-comment-paragraph title=concept-comment-paragraph>comment paragraph</dfn>
represents a note.  It is represented by a string <code>;;</code>,
followed by zero or more <a href=#white-space-characters>white space characters</a>, followed
by zero or more <a href=#concept-block-child title=concept-block-child>block children</a>.

</p><p>An <dfn id=concept-hr title=concept-hr>hr</dfn> represents a break in the run of
blocks in which it occurs, smilar to the HTML <a href=#hr><code>hr</code></a> element.
It is represented by a string <code>-*-*-</code>, followed by an
optional <a href=#concept-class-specification title=concept-class-specification>class
specification</a>, followed by zero or more <a href=#white-space-characters>white space
characters</a>, finally followed by
a <a href=#concept-newline title=concept-newline>newline</a>.

</p><dl class=abnf>

<dt><dfn id=abnf-paragraph title=abnf-paragraph>paragraph</dfn>

</dt><dd>= [<a href=#abnf-destination-anchor-number title=abnf-destination-anchor-number>destination-anchor-number</a>]
<a href=#abnf-line-contents title=abnf-line-contents>line-contents</a> <a href=#abnf-newline title=abnf-newline>newline</a> *<a href=#abnf-block-child title=abnf-block-child>block-child</a>

</dd><dt><dfn id=abnf-comment-paragraph title=abnf-comment-paragraph>comment-paragraph</dfn>

</dt><dd>= ";;" *<a href=#abnf-white-space title=abnf-white-space>white-space</a> [<a href=#abnf-destination-anchor-number title=abnf-destination-anchor-number>destination-anchor-number</a>]
[<a href=#abnf-line-contents title=abnf-line-contents>line-contents</a>] <a href=#abnf-newline title=abnf-newline>newline</a> *<a href=#abnf-block-child title=abnf-block-child>block-child</a>

</dd><dt><dfn id=abnf-editorial-note title=abnf-editorial-note>editorial-note</dfn>

</dt><dd>= "@@" *<a href=#abnf-white-space title=abnf-white-space>white-space</a> [<a href=#abnf-destination-anchor-number title=abnf-destination-anchor-number>destination-anchor-number</a>]
[<a href=#abnf-line-contents title=abnf-line-contents>line-contents</a>] <a href=#abnf-newline title=abnf-newline>newline</a> *<a href=#abnf-block-child title=abnf-block-child>block-child</a>

</dd><dt><dfn id=abnf-hr title=abnf-hr>hr</dfn>

</dt><dd>= "-*-*-"
[<a href=#abnf-class-specification title=abnf-class-specification>class-specification</a>]
*<a href=#abnf-white-space title=abnf-white-space>white-space</a>
<a href=#abnf-newline title=abnf-newline>newline</a>

</dd><dt><dfn id=abnf-block-child title=abnf-block-child>block-child</dfn>

</dt><dd>= [<a href=#abnf-destination-anchor-number title=abnf-destination-anchor-number>destination-anchor-number</a>]
<a href=#abnf-line-contents title=abnf-line-contents>line-contents</a> <a href=#abnf-newline title=abnf-newline>newline</a> / <a href=#abnf-list title=abnf-list>list</a>
/ <a href=#abnf-labeled-list title=abnf-labeled-list>labeled-list</a> / <a href=#abnf-preformatted-paragraph title=abnf-preformatted-paragraph>preformatted-paragraph</a> /
<a href=#abnf-section-block title=abnf-section-block>section-block</a>
/ <a href=#abnf-table title=abnf-table>table</a>
/ <a href=#abnf-editorial-note title=abnf-editorial-note>editorial-note</a>
/ <a href=#abnf-comment-paragraph title=abnf-comment-paragraph>comment-paragraph</a>
/ <a href=#abnf-hr title=abnf-hr>hr</a>

</dd></dl>

<p>A <dfn id=concept-heading title=concept-heading>heading</dfn> introduces a <dfn id=concept-section title=concept-section>section</dfn>.  It is represented by one or more
<code>*</code> characters, followed by zero or more <a href=#white-space-characters>white space
characters</a>, optionally followed by a <span title=concept-destination-anchor-number>destination anchor
number</span>, optionally followed by <span title=concept-line-contents>line contents</span>, followed by a <a href=#concept-newline title=concept-newline>newline</a>.  The number of the
<code>*</code> represents the depth of the <a href=#concept-section title=concept-section>section</a>.  A <a href=#concept-heading title=concept-heading>heading</a> with only one <code>*</code>
character begins a larger <a href=#concept-section title=concept-section>section</a>
than a <a href=#concept-heading title=concept-heading>heading&gt;heading</a> with more
than one <code>*</code> characters.  The <span title=concept-line-contents>line contents</span> represents the name
or caption for the <a href=#concept-section title=concept-section>section</a>.

</p><dl class=abnf>

<dt><dfn id=abnf-heading title=abnf-heading>heading</dfn>

</dt><dd>= 1*"*" *<a href=#abnf-white-space title=abnf-white-space>white-space</a> [<a href=#abnf-destination-anchor-number title=abnf-destination-anchor-number>destination-anchor-number</a>]
[<a href=#abnf-line-contents title=abnf-line-contents>line-contents</a>] <a href=#abnf-newline title=abnf-newline>newline</a>

</dd></dl>

<p>There are three kinds of lists: ordered lists, unordered lists, and
<a href=#concept-labeled-list title=concept-labeled-list>labeled lists</a>.  Ordered lists
and unordered lists are called <dfn id=concept-list title=concept-list>lists</dfn> in
this specification.

</p><p>A <a href=#concept-list title=concept-list>list</a> consists of zero or more
<a href=#concept-list-item title=concept-list-item>items</a>.  An <dfn id=concept-list-item title=concept-list-item>item</dfn> in the <a href=#concept-list title=concept-list>list</a> is represented by one or more
<code>-</code> or <code>=</code> characters, followed by zero or more
<a href=#white-space-characters>white space characters</a>, optionally followed by a <span title=concept-destination-anchor-number>destination anchor
number</span>, optionally followed by <span title=concept-line-contents>line contents</span>, followed by a <a href=#concept-newline title=concept-newline>newline</a>, followed by zero or more <a href=#concept-block-child title=concept-block-child>block children</a>.  The number of
<code>-</code> or <code>=</code> characters at the beginning of the
<a href=#concept-list-item title=concept-list-item>item</a> represents the <dfn id=concept-list-depth title=concept-list-depth>depth</dfn> of the <a href=#concept-list title=concept-list>list</a>.  In a <a href=#concept-list title=concept-list>list</a>, <a href=#concept-list-depth title=concept-list-depth>depth</a> of <a href=#concept-list-item title=concept-list-item>items</a> has to be the same value.  If
there is another <a href=#concept-list title=concept-list>list</a> in <a href=#concept-block-child title=concept-block-child>block children</a>, it's <a href=#concept-list-item title=concept-list-item>items</a>' <a href=#concept-list-depth title=concept-list-depth>depth</a> has to be greater than the <a href=#concept-list-depth title=concept-list-depth>depth</a> of the parent <a href=#concept-list-item title=concept-list-item>item</a>.  The last character that
represents the <a href=#concept-list-depth title=concept-list-depth>depth</a> of an <a href=#concept-list-item title=concept-list-item>item</a> indicates the type of the <a href=#concept-list title=concept-list>list</a>: <code>-</code> indicates unordered
list while <code>=</code> indicates ordered list.  In a <a href=#concept-list title=concept-list>list</a> all <span tilte=concept-list-item>items</span> has to be same type.

</p><p>A <dfn id=concept-labeled-list title=concept-labeled-list>labeled list</dfn> consists of
one or more <a href=#concept-labeled-list-item title=concept-labeled-list-item>labeled list
items</a>.  A <dfn id=concept-labeled-list-item title=concept-labeled-list-item>labeled list
item</dfn> is represented by a <code>:</code> character, followed by
zero or more <a href=#white-space-characters>white space characters</a>, optionally followed
by a <span title=concept-destination-anchor-number>destination anchor
number</span>, optionally followed by <span title=concept-line-contents>line contents</span>, followed by zero or
more <a href=#white-space-characters>white space characters</a>, followed by a <code>:</code>
character, followed by a <span title=concept-destination-anchor-number>destination anchor
number</span>, followed by zero or more <a href=#white-space-characters>white space
characters</a>, optionally followed by <span title=concept-line-contents>line contents</span>, followed by <a href=#concept-newline title=concept-newline>newline</a>, followed by zero or more <a href=#concept-block-child title=concept-block-child>block chidlren</a>.  The former <span title=concept-line-contents>line contents</span>, if any, represents
the label.  <a href=#concept-block-child title=concept-block-child>Block children</a>
cannot contain a <a href=#concept-labeled-list title=concept-labeled-list>labeled list</a>.

</p><dl class=abnf>

<dt><dfn id=abnf-list title=abnf-list>list</dfn>

</dt><dd>= 1*<a href=#abnf-list-item title=abnf-list-item>list-item</a>

</dd><dt><dfn id=abnf-list-item title=abnf-list-item>list-item</dfn>

</dt><dd>= 1*("-" / "=") *<a href=#abnf-white-space title=abnf-white-space>white-space</a>
[<a href=#abnf-destination-anchor-number title=abnf-destination-anchor-number>destination-anchor-number</a>
<a href=#abnf-line-contents title=abnf-line-contents>line-contents</a>] <a href=#abnf-newline title=abnf-newline>newline</a> *<a href=#abnf-block-child title=abnf-block-child>block-child</a>

</dd><dt><dfn id=abnf-labeled-list title=abnf-labeled-list>labeled-list</dfn>

</dt><dd>= 1*<a href=#abnf-labeled-list-item title=abnf-labeled-list-item>labeled-list-item</a>

</dd><dt><dfn id=abnf-labeled-list-item title=abnf-labeled-list-item>labeled-list-item</dfn>

</dt><dd>= ":" *<a href=#abnf-white-space title=abnf-white-space>white-space</a> [<a href=#abnf-destination-anchor-number title=abnf-destination-anchor-number>destination-anchor-number</a>]
[<a href=#abnf-line-contents title=abnf-line-contents>line-contents</a>] *<a href=#abnf-white-space title=abnf-white-space>white-space</a> [<a href=#abnf-destination-anchor-number title=abnf-destination-anchor-number>destination-anchor-number</a>]
[<a href=#abnf-line-contents title=abnf-line-contents>line-contents</a>] <a href=#abnf-newline title=abnf-newline>newline</a> *<a href=#abnf-block-child title=abnf-block-child>block-child</a>

</dd></dl>

<div class=example>

<p>The following example contains no <span title=concept-quotation>quotation</span>:

</p><pre><code>&gt;&gt;1 This is a reference, not a quote.</code></pre>

</div>

<dl class=abnf>

<dt><dfn id=abnf-quotation title=abnf-quotation>quotation</dfn>

</dt><dd>= 1*<a href=#abnf-quoted-block title=abnf-quoted-block>quoted-block</a>

</dd><dt><dfn id=abnf-quoted-block title=abnf-quoted-block>quoted-block</dfn>

</dt><dd>= 1*"&gt;" *<a href=#abnf-white-space title=abnf-white-space>white-space</a> (<a href=#abnf-paragraph title=abnf-paragraph>paragraph</a> / <a href=#abnf-editorial-note title=abnf-editorial-note>editorial-note</a> / <a href=#abnf-comment-paragraph title=abnf-comment-paragraph>comment-paragraph</a> / <a href=#abnf-newline title=abnf-newline>newline</a>)

</dd></dl>

<dl class=abnf>

<dt><dfn id=abnf-preformatted-paragraph title=abnf-preformatted-paragraph>preformatted-paragraph</dfn>

</dt><dd>= <a href=#abnf-preformatted-paragraph-block title=abnf-preformatted-paragraph-block>preformatted-paragraph-block</a>
/ <a href=#abnf-obs-preformatted-paragraph title=abnf-obs-preformatted-paragraph>obs-preformatted-paragraph</a>

</dd><dt><dfn id=abnf-preformatted-paragraph-block title=abnf-preformatted-paragraph-block>preformatted-paragraph-block</dfn>

</dt><dd>= '[PRE[' [<a href=#abnf-class-specification title=abnf-class-specification>class-specification</a>] "[" *<a href=#abnf-white-space title=abnf-white-space>white-space</a> <a href=#abnf-newline title=abnf-newline>newline</a> *([<a href=#abnf-destination-anchor-number title=abnf-destination-anchor-number>destination-anchor-number</a>]
[<a href=#abnf-line-contents title=abnf-line-contents>line-contents</a>] <a href=#abnf-newline title=abnf-newline>newline</a>) ']PRE]' *<a href=#abnf-white-space title=abnf-white-space>white-space</a>

</dd><dt><dfn id=abnf-obs-preformatted-paragraph title=abnf-obs-preformatted-paragraph>obs-preformatted-paragraph</dfn>

</dt><dd>= <a href=#abnf-white-space title=abnf-white-space>white-space</a> [<a href=#abnf-line-contents title=abnf-line-contents>line-contents</a>] <a href=#abnf-newline title=abnf-newline>newline</a> *([<a href=#abnf-destination-anchor-number title=abnf-destination-anchor-number>destination-anchor-number</a>]
[<a href=#abnf-line-contents title=abnf-line-contents>line-contents</a>] <a href=#abnf-newline title=abnf-newline>newline</a>)

</dd></dl>

<p>A <dfn id=concept-section-block title=concept-section-block>section block</dfn> is a marked
section of zero or more <a href=#concept-block title=concept-block>blocks</a>,
preceded by a <a href=#concept-section-block-start-tag title=concept-section-block-start-tag>section
block start tag</a> and followed by
a <a href=#concept-section-block-end-tag title=concept-section-block-end-tag>section block end
tag</a>.

</p><p>A <dfn id=concept-section-block-start-tag title=concept-section-block-start-tag>section block start
tag</dfn> is a <code>[</code> character, followed by
a <a href=#concept-section-block-tag-name title=concept-section-block-tag-name>section block tag
name</a>, followed by an
optional <a href=#concept-class-specification title=concept-class-specification>class
specification</a>, followed by a <code>[</code> character, followed
by zero or more <a href=#white-space-characters>white space characters</a>, optionally
followed by <span title=concept-line-contents>line contents</span>,
followed by a <a href=#concept-newline title=concept-newline>newline</a>.

</p><p>Whether the <span title=concept-line-contents>line contents</span>
component is allowed or not and its semantics depends on
the <a href=#concept-section-block-tag-name title=concept-section-block-tag-name>section block tag
name</a>.

</p><div class="note memo">
<p>For example, the <span title=concept-line-contents>line
contents</span> component of a <a href=#concept-fig><code title=concept-FIG>FIG</code></a>
block represents a caption (i.e. a short form
of <a href=#concept-figcaption><code title=concept-FIGCAPTION>FIGCAPTION</code></a> child.
</p></div>

<p>A <dfn id=concept-section-block-end-tag title=concept-section-block-end-tag>section block end
tag</dfn> is a <code>]</code> character, followed by
a <a href=#concept-section-block-tag-name title=concept-section-block-tag-name>section block tag
name</a>, followed by a <code>]</code> character, followed by zero
or more <a href=#white-space-characters>white space characters</a>, followed by
a <a href=#concept-newline title=concept-newline>newline</a>.

</p><p>A <dfn id=concept-section-block-tag-name title=concept-section-block-tag-name>section block tag
name</dfn> represents the type of
the <a href=#concept-section-block title=concept-section-block>section block</a>.
The <a href=#concept-section-block-tag-name title=concept-section-block-tag-name>section block tag
name</a> of a <a href=#concept-section-block title=concept-section-block>section
block</a> has to be the same value.  Their semantics are described
by the <a href=#block-element-table>Block Element Table</a>.

</p><dl class=abnf>

<dt><dfn id=abnf-section-block title=abnf-section-block>section-block</dfn>

</dt><dd>= '[' <a href=#abnf-tag-name title=abnf-tag-name>tag-name</a>
[<a href=#abnf-class-specification title=abnf-class-specification>class-specification</a>] "["
*<a href=#abnf-white-space title=abnf-white-space>white-space</a>
[<a href=#abnf-destination-anchor-number title=abnf-destination-anchor-number>destination-anchor-number</a>]
[<a href=#abnf-line-contents title=abnf-line-contents>line-contents</a>]
<a href=#abnf-newline title=abnf-newline>newline</a>
<a href=#abnf-body-part title=abnf-body-part>body-part</a>
']' <a href=#abnf-tag-name title=abnf-tag-name>tag-name</a> ']'
*<a href=#abnf-white-space title=abnf-white-space>white-space</a>
<a href=#abnf-newline title=abnf-newline>newline</a>

</dd></dl>

<p>A <dfn id=concept-table title=concept-table>table</dfn> represents a two-dimensional
tabular data.  It is similar to HTML <a href=#table><code>table</code></a> element, but
what can be represented is even narrower than HTML table model.  A
<a href=#concept-table title=concept-table>table</a> consists of one or
more <a href=#concept-table-row title=concept-table-row>table rows</a>.
A <dfn id=concept-table-row title=concept-table-row>table row</dfn> consists of one or
more <a href=#concept-table-cell title=concept-table-cell>table cells</a>.  Syntactically
a <a href=#concept-table-row title=concept-table-row>table row</a> is followed by
a <a href=#concept-newline title=concept-newline>newline</a>.

</p><p>There are three kinds of <dfn id=concept-table-cell title=concept-table-cell>table
cells</dfn>: <a href=#concept-table-data-cell title=concept-table-data-cell>data cells</a>,
<a href=#concept-table-header-cell title=concept-table-header-cell>header cells</a>, and
<a href=#concept-table-colspan-cell title=concept-table-colspan-cell>colspan cells</a>.  The
first <a href=#concept-table-cell title=concept-table-cell>cell</a> in
a <a href=#concept-table-row title=concept-table-row>row</a> has to be
a <a href=#concept-table-data-cell title=concept-table-data-cell>data cell</a> or
a <a href=#concept-table-header-cell title=concept-table-header-cell>header cell</a>.
Syntactically a <a href=#concept-table-cell title=concept-table-cell>cell</a> is preceded
by a <code>,</code> character followed by zero or more <a href=#white-space-characters>white
space characters</a>, and is followed by zero or more <a href=#white-space-characters>white
space characters</a>.

</p><p>A <dfn id=concept-table-data-cell title=concept-table-data-cell>data cell</dfn> represents a
cell that contains data, like HTML <a href=#td><code>td</code></a> element.  Likewise,
a <dfn id=concept-table-header-cell title=concept-table-header-cell>header cell</dfn> represents a
cell that contains data, like HTML <a href=#th><code>th</code></a> element.  The data
of a <a href=#concept-table-header-cell title=concept-table-header-cell>header cell</a> has to
be preceded by a <code>*</code> character.  The cell consists of an
optional <span title=concept-destination-anchor-number>destination
anchor number</span>, optionally followed
by <span title=concept-line-contents>line contents</span>.
Syntactically, the cell can be provided as
a <a href=#concept-quoted-string title=concept-quoted-string>quoted string</a>, in which
case its <a href=#concept-quoted-string-value title=concept-quoted-string-value>value</a> is
interpreted as an
optional <span title=concept-destination-anchor-number>destination
anchor number</span>, optionally followed
by <span title=concept-line-contents>line contents</span>.<!-- In fact
the <span title=concept-table-data-cell>data cell</span> has to be
represented as a <span title=concept-quoted-string>quoted
string</span> if it contains a <code>,</code> character, a
leading <code>"</code> character, or leading or trailing <span>white
space characters</span>.-->

</p><p>A <dfn id=concept-table-colspan-cell title=concept-table-colspan-cell>colspan cell</dfn>
represents that the <a href=#concept-table-cell title=concept-table-cell>cell</a> that
would be placed there forms an integrated part of the <a href=#concept-table-cell title=concept-table-cell>cell</a> just before that <a href=#concept-table-cell title=concept-table-cell>cell</a>.  The <a href=#concept-table-cell title=concept-table-cell>cell</a> just before that <a href=#concept-table-cell title=concept-table-cell>cell</a> might also be a <a href=#concept-table-colspan-cell title=concept-table-colspan-cell>colspan cell</a>.

</p><dl class=abnf>

<dt><dfn id=abnf-table title=abnf-table>table</dfn>

</dt><dd>= 1*<a href=#abnf-table-row title=abnf-table-row>table-row</a>

</dd><dt><dfn id=abnf-table-row title=abnf-table-row>table-row</dfn>

</dt><dd>= "," <a href=#abnf-data-cell title=abnf-data-cell>data-cell</a> *("," <a href=#abnf-cell title=abnf-cell>cell</a>) <a href=#abnf-newline title=abnf-newline>newline</a>

</dd><dt><dfn id=abnf-cell title=abnf-cell>cell</dfn>

</dt><dd>= <a href=#abnf-data-cell title=abnf-data-cell>data-cell</a>
/ <a href=#abnf-header-cell title=abnf-header-cell>header-cell</a>
/ <a href=#abnf-colspan-cell title=abnf-colspan-cell>colspan-cell</a>

</dd><dt><dfn id=abnf-data-cell title=abnf-data-cell>data-cell</dfn>

</dt><dd>= *<a href=#abnf-white-space title=abnf-white-space>white-space</a> ([<a href=#abnf-cstartchar title=abnf-cstartchar>cstartchar</a> *<a href=#abnf-cchar title=abnf-cchar>cchar</a>] / <a href=#abnf-quoted-string title=abnf-quoted-string>quoted-string</a>) *<a href=#abnf-white-space title=abnf-white-space>white-space</a>

</dd><dt><dfn id=abnf-header-cell title=abnf-header-cell>header-cell</dfn>

</dt><dd>= *<a href=#abnf-white-space title=abnf-white-space>white-space</a> "*"
*<a href=#abnf-white-space title=abnf-white-space>white-space</a>
([<a href=#abnf-cstartchar title=abnf-cstartchar>cstartchar</a>
*<a href=#abnf-cchar title=abnf-cchar>cchar</a>]
/ <a href=#abnf-quoted-string title=abnf-quoted-string>quoted-string</a>)
*<a href=#abnf-white-space title=abnf-white-space>white-space</a>

</dd><dt><dfn id=abnf-cstartchar title=abnf-cstartchar>cstartchar</dfn>

</dt><dd>= <a href=#abnf-char title=abnf-char>char</a> − ("," / %x22 / <a href=#abnf-white-space title=abnf-white-space>white-space</a>)

</dd><dt><dfn id=abnf-cchar title=abnf-cchar>cchar</dfn>

</dt><dd>= <a href=#abnf-char title=abnf-char>char</a> − ","

</dd><dt><dfn id=abnf-colspan-cell title=abnf-colspan-cell>colspan-cell</dfn>

</dt><dd>= "=="

</dd></dl>

</section>

<section>
<h1 id=inline-contents><span class=secno>3.3 </span>Inline contents</h1>

<p class=XXX>Need prose definitions...

</p><dl class=abnf>

<dt><dfn id=abnf-line-contents title=abnf-line-contents>line-contents</dfn>

</dt><dd>= 1*(<a href=#abnf-text title=abnf-text>text</a> / <a href=#abnf-anchor-internal title=abnf-anchor-internal>anchor-internal</a> / <a href=#abnf-anchor-external title=abnf-anchor-external>anchor-external</a> / <a href=#abnf-anchor title=abnf-anchor>anchor</a> / <a href=#abnf-tagged-inline-element title=abnf-tagged-inline-element>tagged-inline-element</a> / <a href=#abnf-form title=abnf-form>form</a> / <a href=#abnf-strong title=abnf-strong>strong</a> /
<span title=abnf-em>emphasis</span> / <a href=#abnf-obs-entity-reference title=abnf-obs-entity-reference>obs-entity-reference</a>)

</dd><dt><dfn id=abnf-text title=abnf-text>text</dfn>

</dt><dd>= 1*<a href=#abnf-char title=abnf-char>char</a>

</dd></dl>

<table>

<thead>
<tr>
<th scope=col><span title=concept-external-reference-scheme>External
reference scheme</span>
</th><th scope=col>Syntax of
<span title=concept-external-reference-parameter>external reference
parameter</span>
</th><th scope=col>Semantics

</th></tr></thead><tbody>

<tr>
<th scope=row><dfn id=concept-iw title=concept-IW><code>IW</code></dfn>
</th><td><code class=abnf>(<a href=#abnf-identifier title=abnf-identifier>identifier</a> /
<a href=#abnf-quoted-string title=abnf-quoted-string>quoted-string</a>) ":"
(<a href=#abnf-identifier title=abnf-identifier>identifier</a> /
<a href=#abnf-quoted-string title=abnf-quoted-string>quoted-string</a>)</code>
</td><td><a href=#concept-interwiki title=concept-InterWiki>InterWiki</a> reference
(An <a href=#concept-interwikiname title=concept-InterWikiName>InterWikiName</a> followed
by a parameter)

</td></tr><tr>
<th scope=row><dfn id=concept-mail title=concept-MAIL><code>MAIL</code></dfn>
</th><td><a href=#valid-e-mail-address>valid e-mail address</a>
</td><td>Internet mail address

</td></tr><tr>
<th scope=row><dfn id=concept-uri title=concept-URI><code>URI</code></dfn>
</th><td><a href=#valid-url-string>valid URL string</a>
</td><td><a href=#url>URL</a>

</td></tr><tr>
<th scope=row><dfn id=concept-url title=concept-URL><code>URL</code></dfn>
</th><td><a href=#valid-url-string>valid URL string</a>
</td><td><a href=#url>URL</a>

</td></tr></tbody></table>

<p><dfn id=concept-interwiki title=concept-InterWiki>InterWiki</dfn> is a mechanism for the
hyperlinking and the combination of an <dfn id=concept-interwikiname title=concept-InterWikiName>InterWikiName</dfn> and a parameter
identifies the destination of the link.  The interpretation of an
<a href=#concept-interwiki title=concept-InterWiki>InterWiki</a> link is implementation
dependent.

</p><p><span title=concept-external-reference-scheme>External reference
schemes</span> <a href=#concept-uri><code title=concept-URI>URI</code></a> and <a href=#concept-url><code title=concept-URL>URL</code></a> ought not to be used.

</p><dl class=abnf>

<dt><dfn id=abnf-destination-anchor-number title=abnf-destination-anchor-number>destination-anchor-number</dfn>

</dt><dd>= "[" 1*<span title=abnf-DIGIT>DIGIT</span> "]"

</dd><dt><dfn id=abnf-anchor-internal title=abnf-anchor-internal>anchor-internal</dfn>

</dt><dd>= "&gt;&gt;" 1*<span title=abnf-DIGIT>DIGIT</span>

</dd><dt><dfn id=abnf-anchor-external title=abnf-anchor-external>anchor-external</dfn>

</dt><dd>= "&lt;" <a href=#abnf-external-reference title=abnf-external-reference>external-reference "&gt;"

</a></dd><dt><dfn id=abnf-external-reference title=abnf-external-reference>external-reference</dfn>

</dt><dd>= <a href=#abnf-url title=abnf-URL>URL</a> / <a href=#abnf-external-reference-scheme title=abnf-external-reference-scheme>external-reference-scheme</a>
":" <a href=#abnf-external-reference-parameter title=abnf-external-reference-parameter>external-reference-parameter</a>

</dd><dt><dfn id=abnf-url title=abnf-URL>URL</dfn>

</dt><dd>= 1*<a href=#abnf-uschar title=abnf-uschar>uschar</a> ":" <a href=#abnf-external-reference-parameter title=abnf-external-reference-parameter>external-reference-parameter</a>

</dd><dt><dfn id=abnf-external-reference-scheme title=abnf-external-reference-scheme>external-reference-scheme</dfn>

</dt><dd>= 1*<a href=#abnf-xschar title=abnf-xschar>xschar</a>

</dd><dt><dfn id=abnf-external-reference-parameter title=abnf-external-reference-parameter>external-reference-parameter</dfn>

</dt><dd>= *(<a href=#abnf-char title=abnf-char>char</a> − ("&lt;" / "&gt;" / %x22) /
<a href=#abnf-quoted-string title=abnf-quoted-string>quoted-string</a>)

</dd><dt><dfn id=abnf-uschar title=abnf-uschar>uschar</dfn>

</dt><dd>= <a href=#abnf-char title=abnf-char>char</a> − (":" / <span title=abnf-UALPHA>UALPHA</span>)

</dd><dt><dfn id=abnf-xschar title=abnf-xschar>xschar</dfn>

</dt><dd>= <a href=#abnf-char title=abnf-char>char</a> − (":" / <span title=abnf-LALPHA>LALPHA</span>)

</dd><dt><dfn id=abnf-anchor title=abnf-anchor>anchor</dfn>

</dt><dd>= "[[" [<a href=#abnf-line-contents title=abnf-line-contents>line-contents</a>]
[<a href=#abnf-inline-middle-tag title=abnf-inline-middle-tag>inline-middle-tag</a>
[<a href=#abnf-line-contents title=abnf-line-contents>line-contents</a>]]
<a href=#abnf-inline-end-tag title=abnf-inline-end-tag>inline-end-tag</a>

</dd></dl>

<table>

<thead>
<tr>
<th scope=col><span title=concept-tag-name>Tag name</span>
</th><th scope=col>Number of <span title=concept-inline-middle-tag>middle tags</span>
</th><th scope=col><span title=concept-anchor-internal>Internal reference source anchor</span>
</th><th scope=col><span title=concept-anchor-external>External reference source anchor</span>
</th><th scope=col>Semantics

</th></tr></thead><tbody>

<tr>
<th scope=row><dfn id=concept-aa title=concept-AA><code>AA</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Character art (so-called ASCII-art, <a href=#aa><code>aa</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-abbr title=concept-ABBR><code>ABBR</code></dfn>
</th><td>0 or 1
</td><td>Not allowed
</td><td>Not allowed
</td><td>Abbreviation (HTML <a href=#abbr><code>abbr</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-asis title=concept-ASIS><code>ASIS</code></dfn>
</th><td>1
</td><td>Not allowed
</td><td>Not allowed
</td><td>“As-is” annotation (<a href=#the-asis-element-in-the-suikawiki/0.9-namespace><code>asis</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-b title=concept-B><code>B</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Bold (or sans-serif) text (HTML <a href=#b><code>b</code></a> element)

</td></tr><tr>
<!-- SuikaWiki/0.10 -->
<th scope=row><dfn id=concept-cite title=concept-CITE><code>CITE</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Title of a work (HTML <a href=#cite><code>cite</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-code title=concept-CODE><code>CODE</code></dfn>
</th><td>0 or 1
</td><td>Not allowed
</td><td>Not allowed
</td><td>Code (HTML <a href=#code><code>code</code></a> element)

</td></tr><tr>
<!-- SuikaWiki/0.10 -->
<th scope=row><dfn id=concept-csection title=concept-CSECTION><code>CSECTION</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Title of a section in a work (<a href=#the-csection-element-in-the-suikawiki/0.10-namespace><code>csection</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-del title=concept-DEL><code>DEL</code></dfn>
</th><td>0
</td><td>Allowed
</td><td>Allowed
</td><td>Removal (HTML <a href=#del><code>del</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-dfn title=concept-DFN><code>DFN</code></dfn>
</th><td>0 or 1<!-- 0 in SuikaWiki/0.9 -->
</td><td>Not allowed
</td><td>Not allowed
</td><td>Defined term (HTML <a href=#dfn><code>dfn</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-dotabove title=concept-DOTABOVE><code>DOTABOVE</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Text with dot above (<a href=#the-dotabove-element-in-the-suikawiki/0.9-namespace><code>dotabove</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-emph title=concept-EMPH><code>EMPH</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Emphasized text (<a href=#the-emph-element-in-the-suikawiki/0.9-namespace><code>emph</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-f title=concept-F><code>F</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Field name (<a href=#the-f-element-in-the-suikawiki/0.9-namespace><code>f</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-fenced title=concept-FENCED><code>FENCED</code></dfn>
</th><td>0, 1, or 2
</td><td>Not allowed
</td><td>Not allowed
</td><td>Text enclosed by parentheses (<a href=#the-fenced-element-in-the-suikawiki/0.9-namespace><code>fenced</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-frac title=concept-FRAC><code>FRAC</code></dfn>
</th><td>1
</td><td>Not allowed
</td><td>Not allowed
</td><td>Fraction (MathML <a href=#mfrac><code>mfrac</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-i title=concept-I><code>I</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Italic text (HTML <a href=#i><code>i</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-ins title=concept-INS><code>INS</code></dfn>
</th><td>0
</td><td>Allowed
</td><td>Allowed
</td><td>Insertion (HTML <a href=#ins><code>ins</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-kbd title=concept-KBD><code>KBD</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>User input (HTML <a href=#kbd><code>kbd</code></a> element)

</td></tr><tr>
<!-- SuikaWiki/0.10 -->
<th scope=row><dfn id=concept-key title=concept-KEY><code>KEY</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Keyboard's key (<a href=#the-key-element-in-the-suikawiki/0.10-namespace><code>key</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-lat title=concept-LAT><code>LAT</code></dfn>
</th><td>0 or 1
</td><td>Not allowed
</td><td>Not allowed
</td><td>Latitude (<a href=#the-lat-element-in-the-suikawiki/0.9-namespace><code>lat</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-lines title=concept-LINES><code>LINES</code></dfn>
</th><td>1 or more
</td><td>Not allowed
</td><td>Not allowed
</td><td>Set of sublines (<a href=#the-lines-element-in-the-suikawiki/0.9-namespace><code>lines</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-lon title=concept-LON><code>LON</code></dfn>
</th><td>0 or 1
</td><td>Not allowed
</td><td>Not allowed
</td><td>Longitude (<a href=#the-lon-element-in-the-suikawiki/0.9-namespace><code>lon</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-may title=concept-MAY><code>MAY</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>RFC 2119 keyword "<em class=rfc2119>MAY</em>" (<a href=#the-may-element-in-the-suikawiki/0.9-namespace><code>MAY</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-must title=concept-MUST><code>MUST</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>RFC 2119 keyword "<em class=rfc2119>MUST</em>" (<a href=#the-must-element-in-the-suikawiki/0.9-namespace><code>MUST</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-n title=concept-N><code>N</code></dfn>
</th><td>0 or 1
</td><td>Not allowed
</td><td>Not allowed
</td><td>Number (<a href=#the-n-element-in-the-suikawiki/0.9-namespace><code>n</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-okuri title=concept-OKURI><code>OKURI</code></dfn>
</th><td>0 or 1
</td><td>Not allowed
</td><td>Not allowed
</td><td>Okuri-gana annotations in Kambun (<a href=#the-okuri-element-in-the-suikawiki/0.9-namespace><code>okuri</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-q title=concept-Q><code>Q</code></dfn>
</th><td>0
</td><td>Allowed
</td><td>Allowed
</td><td>Quotation (HTML <a href=#q><code>q</code></a> element)

</td></tr><tr>
<!-- SuikaWiki/0.10 -->
<th scope=row><dfn id=concept-qn title=concept-QN><code>QN</code></dfn>
</th><td>0 or 1
</td><td>Not allowed
</td><td>Not allowed
</td><td>Qualified name (<a href=#the-qn-element-in-the-suikawiki/0.10-namespace><code>qn</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-root title=concept-ROOT><code>ROOT</code></dfn>
</th><td>1
</td><td>Not allowed
</td><td>Not allowed
</td><td>Root (MathML <a href=#mroot><code>mroot</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-ruby title=concept-RUBY><code>RUBY</code></dfn>
</th><td>1 or 2
</td><td>Not allowed
</td><td>Not allowed
</td><td>Ruby annotation (HTML <a href=#ruby><code>ruby</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-rubyb title=concept-RUBYB><code>RUBYB</code></dfn>
</th><td>1
</td><td>Not allowed
</td><td>Not allowed
</td><td>Secondary ruby annotation (<a href=#the-rubyb-element-in-the-suikawiki/0.9-namespace><code>rubyb</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-samp title=concept-SAMP><code>SAMP</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Sample (HTML <a href=#samp><code>samp</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-should title=concept-SHOULD><code>SHOULD</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>RFC 2119 keyword "<em class=rfc2119>SHOULD</em>" (<a href=#the-should-element-in-the-suikawiki/0.9-namespace><code>SHOULD</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-smallcaps title=concept-SMALLCAPS><code>SMALLCAPS</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Small-caps text (<a href=#the-smallcaps-element-in-the-suikawiki/0.9-namespace><code>smallcaps</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-snip title=concept-SNIP><code>SNIP</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Snipped point annotation (<a href=#the-snip-element-in-the-suikawiki/0.9-namespace><code>snip</code></a> element)

</td></tr><tr>
<!-- SuikaWiki/0.10 -->
<th scope=row><dfn id=concept-span title=concept-SPAN><code>SPAN</code></dfn>
</th><td>0 or 1
</td><td>Not allowed
</td><td>Not allowed
</td><td>Span of text (HTML <a href=#span><code>span</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-sqrt title=concept-SQRT><code>SQRT</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Square root (MathML <a href=#msqrt><code>msqrt</code></a> element)

</td></tr><tr>
<!-- SuikaWiki/0.10 -->
<th scope=row><dfn id=concept-src title=concept-SRC><code>SRC</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Short annotation for citation (<a href=#the-src-element-in-the-suikawiki/0.10-namespace><code>src</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-subsup title=concept-SUBSUP><code>SUBSUP</code></dfn>
</th><td>1
</td><td>Not allowed
</td><td>Not allowed
</td><td>Pair of subscript and superscript (<a href=#the-subsup-element-in-the-suikawiki/0.9-namespace><code>subsup</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-sub title=concept-SUB><code>SUB</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Subscript (HTML <a href=#sub><code>sub</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-sup title=concept-SUP><code>SUP</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Superscript (HTML <a href=#sup><code>sup</code></a> element)

</td></tr><tr>
<!-- SuikaWiki/0.10 -->
<th scope=row><dfn id=concept-time title=concept-TIME><code>TIME</code></dfn>
</th><td>0 or 1
</td><td>Not allowed
</td><td>Not allowed
</td><td>Date or time (HTML <a href=#time><code>time</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-tz title=concept-TZ><code>TZ</code></dfn>
</th><td>0 or 1
</td><td>Not allowed
</td><td>Not allowed
</td><td>Time zone offset (<a href=#the-tz-element-in-the-suikawiki/0.9-namespace><code>tz</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-u title=concept-U><code>U</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Underlined text (HTML <a href=#u><code>u</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-under title=concept-UNDER><code>UNDER</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Text with an annotation under it (MathML <a href=#munder><code>munder</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-underover title=concept-UNDEROVER><code>UNDEROVER</code></dfn>
</th><td>1
</td><td>Not allowed
</td><td>Not allowed
</td><td>Text with annotations under and over it (MathML <a href=#munderover><code>munderover</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-var title=concept-VAR><code>VAR</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Variable (HTML <a href=#var><code>var</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-vector title=concept-VECTOR><code>VECTOR</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Text with vector symbol (<a href=#the-vector-element-in-the-suikawiki/0.9-namespace><code>vector</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-weak title=concept-WEAK><code>WEAK</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Small print (<a href=#the-weak-element-in-the-suikawiki/0.9-namespace><code>weak</code></a> element)

</td></tr><tr>
<th scope=row><dfn id=concept-yoko title=concept-YOKO><code>YOKO</code></dfn>
</th><td>0
</td><td>Not allowed
</td><td>Not allowed
</td><td>Horizontal text (<a href=#the-yoko-element-in-the-suikawiki/0.9-namespace><code>yoko</code></a> element)

</td></tr></tbody></table>

<div class="note memo">

<p>A future revison to this specification might define
more <span title=concept-tag-name>tag names</span>.

</p></div>

<div class="note memo">

<p>An inline start tag whose tag name is <a href=#concept-ins><code title=concept-INS>INS</code></a> or <a href=#concept-del><code title=concept-DEL>DEL</code></a>
might not be placed at the beginning of a <span title=concept-line-contents>line contents</span> construct, since it
could be interpreted as a <span title=concept-block-start-tag>block
start tag</span>.

</p></div>

<p>A <dfn id=concept-class-specification title=concept-class-specification>class specification</dfn>
represents class names unless otherwise specified.  The <a href=#concept-class-specification title=concept-class-specification>class specification</a>
syntactically consist of a <code>(</code> character followed by the
<a href=#concept-class-specification-body title=concept-class-specification-body>body of the class
specification</a> followed by a <code>)</code> character.  The <dfn id=concept-class-specification-body title=concept-class-specification-body>body of a class
specification</dfn> consists of zero or more <a href=#concept-character title=concept-character>characters</a> excluding <code>(</code>,
<code>)</code>, and <code>\</code>.  The <a href=#concept-class-specification-body title=concept-class-specification-body>body of the class
specification</a> has similar semantics and processed similarly to
HTML <a href=#the-class-attribute><code>class</code></a> <a href=#attribute>attribute</a>.

</p><dl class=abnf>

<dt><dfn id=abnf-tagged-inline-element title=abnf-tagged-inline-element>tagged-inline-element</dfn>

</dt><dd>= <a href=#abnf-inline-start-tag title=abnf-inline-start-tag>inline-start-tag</a> [<a href=#abnf-line-contents title=abnf-line-contents>line-contents</a>] *(<a href=#abnf-inline-middle-tag title=abnf-inline-middle-tag>inline-middle-tag</a> [<a href=#abnf-line-contents title=abnf-line-contents>line-contents</a>]) <a href=#abnf-inline-end-tag title=abnf-inline-end-tag>inline-end-tag</a>

</dd><dt><dfn id=abnf-inline-start-tag title=abnf-inline-start-tag>inline-start-tag</dfn>

</dt><dd>= "[" <a href=#abnf-tag-name title=abnf-tag-name>tag-name</a> [<a href=#abnf-class-specification title=abnf-class-specification>class-specification</a>] [<a href=#abnf-language-specification title=abnf-language-specification>language-specification</a>] "["

</dd><dt><dfn id=abnf-tag-name title=abnf-tag-name>tag-name</dfn>

</dt><dd>= 1*<span title=abnf-LALPHA>LALPHA</span>

</dd><dt><dfn id=abnf-class-specification title=abnf-class-specification>class-specification</dfn>

</dt><dd>= "(" *<a href=#abnf-clchar title=abnf-clchar>clchar</a> ")"

</dd><dt><dfn id=abnf-clchar title=abnf-clchar>clchar</dfn>

</dt><dd>= <a href=#abnf-char title=abnf-char>char</a> − ("(" / ")" / "\")

</dd><dt><dfn id=abnf-language-specification title=abnf-language-specification>language-specification</dfn>

</dt><dd>= "@" *<a href=#abnf-ltchar title=abnf-ltchar>ltchar</a>

</dd><dt><dfn id=abnf-ltchar title=abnf-ltchar>ltchar</dfn>

</dt><dd>= <span title=abnf-alpha>ALPHA</span> / <span title=abnf-DIGIT>DIGIT</span> / "-"

</dd><dt><dfn id=abnf-inline-middle-tag title=abnf-inline-middle-tag>inline-middle-tag</dfn>

</dt><dd>= "]" *<a href=#abnf-white-space title=abnf-white-space>white-space</a> [<a href=#abnf-language-specification title=abnf-language-specification>language-specification</a>] "["

</dd><dt><dfn id=abnf-inline-end-tag title=abnf-inline-end-tag>inline-end-tag</dfn>

</dt><dd>= "]" [<a href=#abnf-anchor-internal title=abnf-anchor-internal>anchor-internal</a> /
<a href=#abnf-anchor-external title=abnf-anchor-external>anchor-external</a>] "]"

</dd></dl>

<p>The <dfn id=concept-form-name-specification title=concept-form-name-specification>form name
specification</dfn>, if any, defines the <dfn id=concept-form-name title=concept-form-name>name</dfn> of the <a href=#concept-form title=concept-form>form</a>.  It has to be different from any other
<a href=#concept-form-name title=concept-form-name>form name</a> defined in the <a href=#concept-document title=concept-document>document</a>.  A <a href=#concept-form-name-specification title=concept-form-name-specification>form name specification</a>
is syntactically <a href=#concept-class-specification title=concept-class-specification>class
specification</a> and the <a href=#concept-class-specification-body title=concept-class-specification-body>body</a> of it is the <a href=#concept-form-name title=concept-form-name>form name</a>.  A <a href=#concept-form-name title=concept-form-name>form name</a> cannot contain <a href=#white-space-characters>white
space characters</a>.

</p><table>

<thead>
<tr>
<th scope=col><span title=concept-specific-form-name>Specific form
name</span>
</th><th scope=col>Syntax of <span title=concept-specific-form-parameters>specific 
form parameters</span>
</th><th scope=col>Semantics

</th></tr></thead><tbody>

<tr>
<th scope=row><dfn id=concept-comment title=concept-comment><code>comment</code></dfn>
</th><td>Empty
</td><td>Comment input form.

</td></tr><tr>
<!-- Dropped before SuikaWiki/0.9 specification -->
<th scope=row><dfn id=concept-embed title=concept-embed><code>embed</code></dfn>
</th><td><code class=abnf>['IMG:'] <a href=#abnf-identifier title=abnf-identifier>identifier</a></code>
</td><td>Embedding another page.  The <span title=concept-specific-form-parameters>parameter</span> specifies the
<a href=#concept-wikiname title=concept-WikiName>WikiName</a> of the page embedded.  If
the <span title=concept-specific-form-parameters>parameter</span>
begins with a string <code>IMG:</code>, the page is embedded as an
image and the string does not form the part of the <span title=concept-WikiName</span>WikiName</span>.

</td></tr><tr>
<th scope=row><dfn id=concept-form title=concept-form><code>form</code></dfn>
</th><td>N/A
</td><td>Reserved.

</td></tr><tr>
<th scope=row><dfn id=concept-rcomment title=concept-rcomment><code>rcomment</code></dfn>
</th><td>Empty
</td><td>Comment input form; a new comment is inserted <em>after</em> the 
<span title=concept-specific-form>form</span>.

</td></tr><tr>
<th scope=row><dfn id=concept-searched title=concept-searched><code>searched</code></dfn>
</th><td><code class=abnf><a href=#abnf-identifier title=abnf-identifier>identifier</a></code>
</td><td>Insert a search result for the <span title=concept-specific-form-parameters>parameter</span>.

</td></tr></tbody></table>

<p>The <a href=#concept-form title=concept-form>form</a> is an extension mechanism
for the <a href=#the-swml-text-serialization>SWML text serialization</a>.  <span class=XXX>...</span>

</p><p>The <dfn id=concept-generic-form title=concept-generic-form>generic form</dfn> can be used
to embed a <a href=#concept-wikiform title=concept-WikiForm>WikiForm</a> specification.
<dfn id=concept-wikiform title=concept-WikiForm>WikiForm</dfn> provides a generic
framework for describing user input forms and templates used for
processing form inputs.

</p><p>Three <span title=concept-form-fields>form fields</span> in a <a href=#concept-generic-form title=concept-generic-form>form</a> represents <dfn id=concept-input-template title=concept-input-template>input template</dfn>, <dfn id=concept-output-template title=concept-output-template>output template</dfn>, and <dfn id=concept-option-template title=concept-option-template>options</dfn>.  Interpretation and
processing for these fields are implementation dependent.

</p><p>The <span title=concept-specific-form-name>name</span> <a href=#concept-form title=concept-form>form</a> cannot be used.

</p><p><span title=concept-specific-form-name>Names</span> <a href=#concept-embed><code title=concept-embed>embed</code></a>, <a href=#concept-rcomment><code title=concept-rcomment>rcomment</code></a>, and <a href=#concept-searched><code title=concept-searched>searched</code></a> are obsolete and cannot be
used.

</p><dl class=abnf>

<dt><dfn id=abnf-form title=abnf-form>form</dfn>

</dt><dd>= <a href=#abnf-generic-form title=abnf-generic-form>generic-form</a> / <a href=#abnf-specific-form title=abnf-specific-form>specific-form</a>

</dd><dt><dfn id=abnf-generic-form title=abnf-generic-form>generic-form</dfn>

</dt><dd>= "[[#" 'form' [<a href=#abnf-form-name-specification title=abnf-form-name-specification>form-name-specification</a>] ":"
<a href=#abnf-form-field title=abnf-form-field>form-field</a> ":" <a href=#abnf-form-field title=abnf-form-field>form-field</a> [":" <a href=#abnf-form-field title=abnf-form-field>form-field</a>] "]]"

</dd><dt><dfn id=abnf-form-name-specification title=abnf-form-name-specification>form-name-specification</dfn>

</dt><dd>= <a href=#abnf-class-specification title=abnf-class-specification>class-specification</a>

</dd><dt><dfn id=abnf-form-field title=abnf-form-field>form-field</dfn>

</dt><dd>= "'" *(<a href=#abnf-char title=abnf-char>char</a> − ("'" / "\") /
<a href=#abnf-quoted-pair title=abnf-quoted-pair>quoted-pair</a>) "'"

</dd><dt><dfn id=abnf-specific-form title=abnf-specific-form>specific-form</dfn>

</dt><dd>= "[[#" <a href=#abnf-specific-form-name title=abnf-specific-form-name>specific-form-name</a> [":" <a href=#abnf-specific-form-parameters title=abnf-specific-form-parameters>specific-form-parameters</a>]
"]]"

</dd><dt><dfn id=abnf-specific-form-name title=abnf-specific-form-name>specific-form-name</dfn>

</dt><dd>= 1*(<span title=abnf-LALPHA>LALPHA</span> / "-")

</dd><dt><dfn id=abnf-specific-form-parameters title=abnf-specific-form-parameters>specific-form-parameters</dfn>

</dt><dd>= <a href=#abnf-identifier title=abnf-identifier>identifier</a> *(":" <a href=#abnf-identifier title=abnf-identifier>identifier</a>)

</dd></dl>

<dl class=abnf>

<dt><dfn id=abnf-strong title=abnf-strong>strong</dfn>

</dt><dd>= "'''" [<a href=#abnf-line-contents title=abnf-line-contents>line-contents</a>]
"'''"

</dd><dt><dfn id=abnf-emphasis title=abnf-emphasis>emphasis</dfn>

</dt><dd>= "''" [<a href=#abnf-line-contents title=abnf-line-contents>line-contents</a>] "''"

</dd></dl>

</section>

<section>
<h1 id=images><span class=secno>3.4 </span>Images</h1>

<p>A <a href=#concept-document title=concept-document>document</a> can contain
an <dfn id=concept-image title=concept-image>image</dfn> by including a
string <code>__IMAGE__</code> followed by
a <a href=#concept-newline title=concept-newline>newline</a> followed
by <a href=#forgiving-base64-encode title="forgiving-base64 encode">Base64-encoded</a> image
data, at the end of
the <a href=#concept-document title=concept-document>document</a>.  <a href=#concept-parameter title=concept-parameter>Parameters</a> <a href=#concept-parameter-image-type><code title=concept-parameter-image-type>image-type</code></a>
and <a href=#concept-parameter-image-alt><code title=concept-parameter-image-alt>image-alt</code></a> provide
metadata for the <a href=#concept-image title=concept-image>image</a>.

</p><dl class=abnf>

<dt><dfn id=abnf-obs-image title=abnf-obs-image>obs-image</dfn>

</dt><dd>= '__IMAGE__' *<span title=concept-char>char</span>

</dd></dl>

</section>

<section>
<h1 id=lexical-structures><span class=secno>3.5 </span>Lexical structures</h1>

<p>An <dfn id=concept-entity-reference title=concept-entity-reference>entity reference</dfn> is a
part of <a href=#concept-document title=concept-document>document</a> that is expected
to be replaced by a fragment imported from another document.  It is no
longer supported.

</p><dl class=abnf>

<dt><dfn id=abnf-obs-entity-reference title=abnf-obs-entity-reference>obs-entity-reference</dfn>

</dt><dd>= "__&amp;&amp;" 1*<a href=#abnf-char title=abnf-char>char</a> "&amp;&amp;__"

</dd></dl>

<p>A <dfn id=concept-character title=concept-character>character</dfn> is a character from
the coded character set<!-- ISO/IEC terminology --> used to encode the
<a href=#concept-document title=concept-document>document</a>.  Unless otherwise
specified, for the purpose of this specification, control characters
(characters in the range U+0000 .. U+001F and U+007F) are not a <a href=#concept-character title=concept-character>character</a>.

</p><p>A <dfn id=concept-newline title=concept-newline>newline</dfn> can be represented in
any of three common conventions: <code class=charname>CR</code>
(U+000D), <code class=charname>LF</code> (U+000A), or <code class=charname>CR</code> followed by <code class=charname>LF</code>.

</p><p>A <dfn id=concept-quoted-string title=concept-quoted-string>quoted string</dfn> is zero or
more <a href=#concept-character title=concept-character>characters</a> enclosed by
<code>"</code> characters.  In a <a href=#concept-quoted-string title=concept-quoted-string>quoted string</a>, character
<code>\</code> can only be used as part of <dfn id=concept-quoted-pair title=concept-quoted-pair>quoted pair</dfn>.  A <a href=#concept-quoted-pair title=concept-quoted-pair>quoted pair</a> is <code>\</code>
followed by a <a href=#concept-character title=concept-character>character</a>.  The
<dfn id=concept-quoted-string-value title=concept-quoted-string-value>value of a quoted string</dfn>
is the string obtained by removing <code>"</code> characters enclosing
the <a href=#concept-quoted-string title=concept-quoted-string>quoted string</a> and
removing <code>\</code> characters at the beginning of the <a href=#concept-quoted-pair title=concept-quoted-pair>quoted pairs</a>.

</p><dl class=abnf>

<dt><dfn id=abnf-identifier title=abnf-identifier>identifier</dfn>

</dt><dd>= 1*(<span title=abnf-ALPHA>ALPHA</span> / <span title=abnf-DIGIT>DIGIT</span> / "-" / <a href=#abnf-non-ascii title=abnf-non-ascii>non-ascii</a>)

</dd><dt><dfn id=abnf-non-ascii title=abnf-non-ascii>non-ascii</dfn>

</dt><dd>= <a href=#abnf-char title=abnf-char>char</a> − %x00-7f

</dd><dt><dfn id=abnf-char title=abnf-char>char</dfn>

</dt><dd>= &lt;Any character&gt; − (%x00-1f / %x7f)

</dd><dt><dfn id=abnf-quoted-string title=abnf-quoted-string>quoted-string</dfn>

</dt><dd>= %x22 *(<a href=#abnf-char title=abnf-char>char</a> − ("\" / %x22) /
<a href=#abnf-quoted-pair title=abnf-quoted-pair>quoted-pair</a>) %x22

</dd><dt><dfn id=abnf-quoted-pair title=abnf-quoted-pair>quoted-pair</dfn>

</dt><dd>= "\" <a href=#abnf-char title=abnf-char>char</a>

</dd><dt><dfn id=abnf-newline title=abnf-newline>newline</dfn>

</dt><dd>= %x0d %x0a / %x0d / %x0a

</dd><dt><dfn id=abnf-white-space title=abnf-white-space>white-space</dfn>

</dt><dd>= %x09 / %x20

</dd></dl>

</section>

</section>

<section>
<h1 id=parsing-documents-in-the-swml-text-serialization><span class=secno>4 </span>Parsing documents in the <a href=#the-swml-text-serialization>SWML text serialization</a></h1>

<p>This section specifies how to convert a <a href=#string>string</a> into a
<a href=#node-tree>node tree</a>, assuming the string is written in
the <a href=#the-swml-text-serialization>SWML text serialization</a>.  This process is referred to
as <dfn id=parsing-an-swml-text-serialization title="parsing an SWML text serialization">parsing</dfn> and
an implementation that performes this process is referred to as
<dfn id=swml-text-serialization-parser title="SWML text serialization parser">parser</dfn>.

</p><div class=note>

<p>How to convert a <a href=#byte-sequence>byte sequence</a> into
a <a href=#string>string</a> is outside of the scope of this specification.

</p></div>

<p>The <span title="SWML text serialization
paraser">parser</span> <em class=rfc2119>MUST</em> run these steps
to <a href=#parsing-an-swml-text-serialization title="parsing an SWML text serialization">parse</a> a
string <var>string</var>:

  </p><ol class=steps>

  <li>Let <var>document</var> be a new <a href=#abnf-document><code>Document</code></a>.

  </li><li>Let <var>html</var> be the result of <a href=#create-an-element title="create an
  element">creating</a> an <a href=#html><code>html</code></a> <a href=#element>element</a>
  in the <a href=#html-namespace>HTML namespace</a> in <var>document</var>.

  </li><li><a href=#set-an-attribute-value title="set an attribute value">Set</a>
  <code>xmlns</code> <a href=#attribute>attribute</a> in the <a href=#xmlns-namespace>XMLNS
  namespace</a> to the <a href=#html-namespace>HTML namespace</a>.

  </li><li><a href=#append title=append>Append</a> <var>html</var>
  to <var>document</var>

  </li><li>Let <var>head</var> be the result of <span title="create an
  elmeent">creating</span> a <a href=#head><code>head</code></a> <a href=#element>element</a> in
  the <a href=#html-namespace>HTML namespace</a>.

  </li><li><a href=#append title=append>Append</a> <var>head</var>
  to <var>html</var>.

  </li><li>Let <var>body</var> be the result of <span title="create an
  elmeent">creating</span> a <a href=#body><code>body</code></a> <a href=#element>element</a> in
  the <a href=#html-namespace>HTML namespace</a>.

  </li><li><a href=#append title=append>Append</a> <var>body</var>
  to <var>html</var>.

  </li><li>Let <var>tokens</var> be the result of running
  the <a href=#tokenization>tokenization</a> stage with <var>string</var>.

  </li><li>Run  the <a href=#tree-construction-0>tree construction</a> stage
  with <var>tokens</var> and <var>document</var>.

  </li><li>Return <var>document</var>.

  </li></ol>

<p>Following definitions are used to describe the <a href=#parsing-an-swml-text-serialization title="parsing
an SWML text serialization">parsing algorithm</a>:

</p><ul>

<li>The <dfn id=document-element>document element</dfn> is <var>html</var>.

</li><li>The <dfn id=head-element>head element</dfn> is <var>head</var>.

</li><li>The <dfn id=body-element>body element</dfn> is <var>body</var>.

</li><li>The <dfn id=image-element>image element</dfn> is initially null.

</li><li>When the <a href=#swml-text-serialization-parser title="SWML text serialization
parser">parser</a>
<dfn id=append-a-character title="append a character">appends a character</dfn>
<var>char</var> to node <var>node</var>, the
<code>manakai_append_text</code> method <cite class=XXX>...</cite> <em class=rfc2119>MUST</em> be invoked on <var>node</var> with the
argument <var>char</var>.

</li><li>When an <a href=#attribute>attribute</a> is created, its
<span>namespace</span> and <span>namespace
prefix</span> <em class=rfc2119>MUST</em> both set
to <code>null</code>, unless an <a href=#attribute>attribute</a>
in <var>namespace</var> is created, in which case
its <span>namespace</span> <em class=rfc2119>MUST</em> be set to
the <var>namespace</var>'s URL and its <span>namespace
prefix</span> <em class=rfc2119>MUST</em> be set
to <var>namespace</var>'s <dfn id=preferred-prefix>preferred prefix</dfn>.

</li><li>A <dfn id=class-specification>class specification</dfn> is a string consist of a
<code>(</code> character, followed by zero or more character that is
<em>not</em> one of <code>(</code>, <code>)</code>, or <a href=#white-space-characters>white
space characters</a>, and finally followed by a <code>)</code>
character.  <!-- Though the SuikaWiki3 implementation of the parser
support quoted-pair in class specification in [PRE[ block start tag
and inline start tags, it is not allowed in [INS[ and [DEL[, and is
not part of SuikaWiki/0.9 specification, and it should not appear in
any existing SuikaWiki article afaict, this version of the SWML
specification does not support such escaping syntax. --> The <dfn id=body-of-a-class-specification>body
of a class specification</dfn> is the substring of the <a href=#class-specification>class
specification</a> between parentheses (exclusive).  It might be the
empty string.

</li></ul>

<section>
<h1 id=tokenization-of-lines><span class=secno>4.1 </span>Tokenization of lines</h1>

<p>When a string of characters is <dfn id=tokenization title=tokenization>tokenized</dfn>, the string <var>s</var> <em class=rfc2119>MUST</em> be processed as follows:

</p><ol class=steps>

<li>Let <var>pos</var> be zero (0).  It represents the index in
<var>s</var>.  The index of the first character in <var>data</var> is
zero (0).

</li><li>If <var>pos</var> is greater than or equal to the length of
<var>s</var>, then emit an <a href=#end-of-file-token>end-of-file token</a> and abort
these steps.

</li><li>Let <var>line</var> be the empty string.

</li><li>If the <var>pos</var>th character of <var>s</var> is U+000D <code class=charname>CARRIAGE RETURN</code>, <a href=#process-line title=process-line>process</a> <var>line</var>.  Set
<var>line</var> to the empty string.  If the (<var>pos</var> + 1)th
character of <var>s</var> is U+000A <code class=charname>LINE
FEED</code>, increment
<var>pos</var> by one (1).

</li><li>Otherwise, if the <var>pos</var>th character of <var>s</var> is
U+000A <code class=charname>LINE
FEED</code>, <a href=#process-line title=process-line>process</a> <var>line</var>.
Set
<var>line</var> to the empty string.

</li><li>Otherwise, append the <var>pos</var>th character of <var>s</var>
to <var>line</var>.

</li><li>Increase <var>pos</var> by one (1).

</li><li>Go back to the fourth step of these steps.

</li></ol>

<p>The steps above <dfn id=emit>emit</dfn> one or more sequence of <dfn id=token title=token>tokens</dfn>, which are inputs to the <a href=#tree-construction-0>tree
construction</a> stage.  A <a href=#token>token</a> can have zero or more
properties, depending on the kind of the <a href=#token>token</a>.  There
are several kinds of <a href=#token title=token>tokens</a> and properties as
follows:

</p><dl>

<dt><dfn id=block-start-tag-token>Block start tag token</dfn>

</dt><dd><dfn id=block-start-tag-classes title=block-start-tag-classes>Classes</dfn> and <dfn id=block-start-tag-tag-name title=block-start-tag-tag-name>tag name</dfn> properties.

</dd><dt><dfn id=block-end-tag-token>Block end tag token</dfn>

</dt><dd><dfn id=block-end-tag-tag-name title=block-end-tag-tag-name>Tag name</dfn> property.

</dd><dt><dfn id=character-token>Character token</dfn>

</dt><dd><dfn id=character-data title=character-data>Data</dfn> property.

</dd><dt><dfn id=comment-paragraph-start-token>Comment paragraph start token</dfn>

</dt><dd>No property.

</dd><dt><dfn id=editorial-note-start-token>Editorial note start token</dfn>

</dt><dd>No property.

</dd><dt><dfn id=element-token>Element token</dfn>

</dt><dd><dfn id=element-local-name title=element-local-name>Local name</dfn>, <dfn id=element-namespace title=element-namespace>namespace</dfn>, <dfn id=element-anchor-attribute title=element-anchor-attribute>anchor attribute</dfn>, <dfn id=element-by-attribute title=element-by-attribute>by attribute</dfn>, <dfn id=element-res-scheme-attribute title=element-res-scheme-attribute>resScheme attribute</dfn>, <dfn id=element-res-parameter-attribute title=element-res-parameter-attribute>resParameter attribute</dfn>,
and <dfn id=element-content title=element-content>content</dfn> attribute.  Default for
these properties are null.

</dd><dt><dfn id=emphasis-token>Emphasis token</dfn>

</dt><dd>No property.

</dd><dt><dfn id=empty-line-token>Empty line token</dfn>

</dt><dd>No property.

</dd><dt><dfn id=end-of-file-token>End-of-file token</dfn>

</dt><dd>No property.

</dd><dt><dfn id=form-token>Form token</dfn>

</dt><dd><dfn id=form-name title=form-name>Name</dfn>, <dfn id=form-id title=form-id>id</dfn>, and
<dfn id=form-parameters title=form-parameters>parameters</dfn> properties.

</dd><dt><dfn id=heading-start-token>Heading start token</dfn>

</dt><dd><dfn id=heading-start-depth title=heading-start-depth>Depth</dfn> property.

</dd><dt><dfn id=heading-end-token>Heading end token</dfn>

</dt><dd>No property.

</dd><dt><dfn id=inline-start-tag-token>Inline start tag token</dfn>

</dt><dd><dfn id=inline-start-tag-tag-name title=inline-start-tag-tag-name>Tag name</dfn>, <dfn id=inline-start-tag-classes title=inline-start-tag-classes>classes</dfn>, and <dfn id=inline-start-tag-language title=inline-start-tag-language>language</dfn> properties.  Default
for these properties is null.

</dd><dt><dfn id=inline-middle-tag-token>Inline middle tag token</dfn>

</dt><dd><dfn id=inline-middle-tag-language title=inline-middle-tag-language>language</dfn> property,
whose default is null.

</dd><dt><dfn id=inline-end-tag-token>Inline end tag token</dfn>

</dt><dd><dfn id=inline-end-tag-anchor-attribute title=inline-end-tag-anchor-attribute>Anchor attribute</dfn>,
<dfn id=inline-end-tag-res-scheme-attribute title=inline-end-tag-res-scheme-attribute>resScheme
attribute</dfn>, and <dfn id=inline-end-tag-res-parameter-attribute title=inline-end-tag-res-parameter-attribute>resParameter
attribute</dfn> properties.  Default for these properties is null.

</dd><dt><dfn id=labeled-list-start-token>Labeled list start token</dfn>

</dt><dd>No property.

</dd><dt><dfn id=labeled-list-middle-token>Labeled list middle token</dfn>

</dt><dd>No property.

</dd><dt><dfn id=list-start-token>List start token</dfn>

</dt><dd><dfn id=list-start-depth title=list-start-depth>Depth</dfn> property.

</dd><dt><dfn id=preformatted-start-token>Preformatted start token</dfn>

</dt><dd>No property.

</dd><dt><dfn id=preformatted-end-token>Preformatted end token</dfn>

</dt><dd>No property.

</dd><dt><dfn id=quotation-start-token>Quotation start token</dfn>

</dt><dd><dfn id=quotation-start-depth title=quotation-start-depth>Depth</dfn> property.

</dd><dt><dfn id=strong-token>Strong token</dfn>

</dt><dd>No property.

</dd><dt><dfn id=table-row-start-token>Table row start token</dfn>

</dt><dd>No property.

</dd><dt><dfn id=table-row-end-token>Table row end token</dfn>

</dt><dd>No property.

</dd><dt><dfn id=table-cell-start-token>Table cell start token</dfn>

</dt><dd><dfn id=table-cell-start-header title=table-cell-start-header>Header</dfn> property.

</dd><dt><dfn id=table-cell-end-token>Table cell end token</dfn>

</dt><dd>No property.

</dd><dt><dfn id=table-colspan-cell-token>Table colspan cell token</dfn>

</dt><dd>No property.

</dd><dt><dfn id=block-element-token>Block element token</dfn>

</dt><dd><dfn id=block-element-classes title=block-element-classes>classes</dfn> property, whose
default is null.

</dd></dl>

<p><dfn id=mode>Mode</dfn> is a state of the <a href=#tokenization title=tokenization>tokenizer</a> and is one of
"<a href=#initial>initial</a>" (the initial value used when the
<a href=#tokenization>tokenization</a> starts), "<a href=#body>body</a>",
"<a href=#preformatted>preformatted</a>", "<a href=#preformatted-block>preformatted block</a>", and
"<a href=#image-data>image data</a>".

</p><p><dfn id=continuous-line-flag>Continuous line flag</dfn> is another flag of the <a href=#tokenization title=tokenization>tokenizer</a>, representing whether a new line
character should be appended to the data, and takes either true or
false.  This flag is mainly used in the "<a href=#body>body</a>"
<a href=#mode>mode</a>.

</p><p>When a <dfn id=process-line title=process-line><var>line</var> is processed</dfn>,
rules specified in the following subsections is used according to the
appropriate <a href=#mode>mode</a>.  Rules below sometimes require the <dfn id=reprocess-line title=reprocess-line><var>line</var> be reprocessed</dfn>.  In such
cases, rules for the appropriate <a href=#mode>mode</a> <em class=rfc2119>MUST</em> be followed with the same <var>line</var>.

</p><section>
<h1 id=the-initial-mode><span class=secno>4.1.1 </span>The "<a href=#initial>initial</a>" mode</h1>

<p>In the "<dfn id=initial>initial</dfn>" mode, <var>line</var> <em class=rfc2119>MUST</em> be processed as follows:

</p><dl class=switch>

<dt>If <var>line</var> starts with <code>#?</code>

</dt><dd><a href=#parse-a-magic-line>Parse a magic line</a> <var>line</var>.

</dd><dt>Otherwise

</dt><dd>

<ol class=steps>

<li>Set the <a href=#continuous-line-flag>continuous line flag</a> to false.

</li><li>Switch to the "<a href=#body>body</a>" <a href=#mode>mode</a> and <a href=#reprocess-line title=reprocess-line>reprocess</a> <var>line</var>.

</li></ol>

</dd></dl>

</section>

<section>
<h1 id=the-body-mode><span class=secno>4.1.2 </span>The "<a href=#body>body</a>" mode</h1>

<p>In the "<dfn id=body>body</dfn>" mode, <var>line</var> <em class=rfc2119>MUST</em> be processed as follows:

</p><dl class=switch>

<dt>If <var>line</var> is empty

</dt><dd>

<ol class=steps>

<li>Set the <a href=#continuous-line-flag>continuous line flag</a> to false.

</li><li>Emit an <a href=#empty-line-token>empty line token</a>.

</li></ol>

</dd><dt>If <var>line</var> starts with a <a href=#white-space-characters title="white space
characters">white space character</a>

</dt><dd>

<ol class=steps>

<li>Emit a <a href=#preformatted-start-token>preformatted start token</a>.

</li><li>Run the <a href=#algorithm-to-tokenize-a-text>algorithm to tokenize a text</a> with
<var>line</var>.

</li><li>Switch to the "<a href=#preformatted>preformatted</a>" mode.

</li></ol>

</dd><dt>If <var>line</var> starts with <code>*</code>

</dt><dd>

<ol class=steps>

<li>Let <var>data</var> be <var>line</var>.

</li><li>Let <var>depth</var> be zero (0).

</li><li>While the first character of <var>data</var>, if any, is
<code>*</code>, run the following substeps:

<ol>

<li>Increase <var>depth</var> by one (1).

</li><li>Remove the first character of <var>data</var>.  (The removed
character will be <code>*</code>.)

</li></ol>

</li><li>Remove <a href=#white-space-characters>white space characters</a> at the beginning of
<var>data</var>, if any.

</li><li>Emit a <a href=#heading-start-token>heading start token</a> whose <a href=#heading-start-depth title=heading-start-depth>depth</a> set to <var>depth</var>.

</li><li>Run the <a href=#algorithm-to-tokenize-a-text>algorithm to tokenize a text</a> with <var>data</var>.

</li><li>Emit a <a href=#heading-end-token>heading end token</a>.

</li><li>Finally, set the <a href=#continuous-line-flag>continuous line flag</a> to false.

</li></ol>


</dd><dt>If <var>line</var> is a string consists of <code>-*-*-</code>,
optionally followed by a <a href=#class-specification>class specification</a>, followed by
zero or more <a href=#white-space-characters>white space characters</a>

</dt><dd>

<ol class=steps>

<li>Let <var>classes</var> be the <a href=#body-of-a-class-specification title="body of a class
specification">body</a> of the <a href=#class-specification>class specification</a> in
the matched substring of <var>data</var>, if any, or null, otherwise.

</li><li>Emit a <a href=#block-element-token>block element token</a>
whose <a href=#block-element-classes title=block-element-classes>classes</a> set
to <var>classes</var>.

</li><li>Set the <a href=#continuous-line-flag>continuous line flag</a> to false.

</li></ol>


</dd><dt>If <var>line</var> starts with <code>-</code> or <code>=</code>

</dt><dd>

<ol class=steps>

<li>Let <var>data</var> be <var>line</var>.

</li><li>Let <var>depth</var> be the empty string.

</li><li>While the first character of <var>data</var>, if any, is
<code>-</code> or <code>=</code>, run the following substeps:

<ol>

<li>Append the first character of <var>data</var> to <var>depth</var>.

</li><li>Remove the first character of <var>data</var>.

</li></ol>

</li><li>Remove <a href=#white-space-characters>white space characters</a> at the beginning of
<var>data</var>, if any.

</li><li>Emit a <a href=#list-start-token>list start token</a> whose <a href=#list-start-depth title=list-start-depth>depth</a> set to <var>depth</var>.

</li><li>Run the <a href=#algorithm-to-tokenize-a-text>algorithm to tokenize a text</a> with <var>data</var>.

</li><li>Finally, set the <a href=#continuous-line-flag>continuous line flag</a> to true.

</li></ol>

</dd><dt>If <var>line</var> starts with <code>:</code>

</dt><dd>

<ol class=steps>

<li>Let <var title="">name</var> be the empty string.

</li><li>Let <var title="">data</var> be <var>line</var>.

</li><li>Remove the first character of <var>data</var>.  (The removed
character will be <code>:</code>.)

</li><li>While <var>data</var> is not empty and the first character of
<var>data</var> is <em>not</em> <code>:</code>, run the following
substeps:

<ol>

<li>Append the first character of <var title="">data</var> to <var title="">name</var>.

</li><li>Remove the first character of <var title="">data</var>.

</li></ol>

</li><li>If <var title="">name</var> is the empty string, run the following
substeps:

<ol>

<li>Emit a <a href=#character-token>character token</a> whose <a href=#character-data title=character-data>data</a> is a <code>:</code> character.

</li><li>Run the <a href=#algorithm-to-tokenize-a-text>algorithm to tokenize a text</a> with <var title="">name</var>.

</li></ol>

<div class="note memo">

<p>In this case, <var>line</var> does not represent a description
list.  <!-- For compatibility with previous implementations. -->

</p></div>

</li><li>Otherwise, run the following substeps:

<ol>

<li>Remove <a href=#white-space-characters>white space characters</a> at the beginning of
<var title="">name</var>, if any.

</li><li>Remove <a href=#white-space-characters>white space characters</a> at the end of <var title="">name</var>, if any.

</li><li>Emit a <a href=#labeled-list-start-token>labeled list start token</a>.

</li><li>Run the <a href=#algorithm-to-tokenize-a-text>algorithm to tokenize a text</a> with <var title="">name</var>.

</li><li>Remove the first character of <var title="">data</var>.  (The removed
character will be <code>:</code>.)

</li><li>Remove <a href=#white-space-characters>white space characters</a> at the beginning of
<var>data</var>, if any.

</li><li>Emit a <a href=#labeled-list-middle-token>labeled list middle token</a>.

</li><li>Run the <a href=#algorithm-to-tokenize-a-text>algorithm to tokenize a text</a> with
<var>data</var>.

</li></ol>

</li><li>Finally, set the <a href=#continuous-line-flag>continuous line flag</a> to true.

</li></ol>

</dd><dt>If <var>line</var> starts with <code>&gt;</code>

</dt><dd>

<ol class=steps>

<li>Let <var>data</var> be <var>line</var>.

</li><li>Let <var>depth</var> be zero (0).

</li><li>While the first character of <var>data</var>, if any, is
<code>&gt;</code>, run the following substeps:

<ol>

<li>Increase <var>depth</var> by one (1).

</li><li>Remove the first character of <var>data</var>.  (The removed
character will be <code>&gt;</code>.

</li></ol>

</li><li>If <var>depth</var> is two (2), <var>data</var> is not empty, and
the first character of <var>data</var> is one of <a href=#digits>digits</a>,
run the following substeps:

<ol>

<li>Prepend two <code>&gt;</code> characters to <var>data</var>.

</li><li>If the <a href=#continuous-line-flag>continuous line flag</a> is true, preprend a
U+000A <code class=charname>LINE FEED</code> character to
<var>data</var>.

</li><li>Run the <a href=#algorithm-to-tokenize-a-text>algorithm to tokenize a text</a> with
<var>data</var>.

</li><li>Set the <a href=#continuous-line-flag>continuous line flag</a> to true.

</li></ol>

</li><li>Otherwise, run the following substeps:

<ol>

<li>Emit a <a href=#quotation-start-token>quotation start token</a> whose <a href=#quotation-start-depth title=quotation-start-depth>depth</a> set to <var>depth</var>.

</li><li>Remove <a href=#white-space-characters>white space characters</a> at the beginning of
<var>data</var>, if any.

</li><li>If the length of <var>data</var> is greater than one (1) and the
first two characters of <var>data</var> are <code>@@</code>, run the
following substeps: <!-- SuikaWiki/0.10 addition -->

<ol>

<li>Remove the first two characters of <var>data</var>.  (The removed
characters will be <code>@@</code>).

</li><li>Emit a <a href=#editorial-note-start-token>editorial note start token</a>.

</li><li>Remove <a href=#white-space-characters>white space characters</a> at the beginning of
<var>data</var>, if any.

</li><li>Set the <a href=#continuous-line-flag>continuous line flag</a> to true.

</li></ol>

</li><li>If the length of <var>data</var> is greater than one (1) and the
first two characters of <var>data</var> are <code>;;</code>, run the
following substeps: <!-- SuikaWiki/0.10 addition -->

<ol>

<li>Remove the first two characters of <var>data</var>.  (The removed
characters will be <code>;;</code>).

</li><li>Emit a <a href=#comment-paragraph-start-token>comment paragraph start token</a>.

</li><li>Remove <a href=#white-space-characters>white space characters</a> at the beginning of
<var>data</var>, if any.

</li><li>Set the <a href=#continuous-line-flag>continuous line flag</a> to true.

</li></ol>

</li><li>Otherwise, if <var title="">data</var> is not empty, set the
<a href=#continuous-line-flag>continuous line flag</a> to true.

</li><li>Otherwise, set the <a href=#continuous-line-flag>continuous line flag</a> to false.

</li><li>In any case, run the <a href=#algorithm-to-tokenize-a-text>algorithm to tokenize a text</a>
with <var>data</var>.

</li></ol>

</li></ol>

</dd><dt>If <var>line</var> is a string consist of a <code>[</code>
character, followed by
a <a href=#concept-section-block-tag-name title=concept-section-block-tag-name>section block tag
name</a>, optionally followed by <a href=#class-specification>class specification</a>,
followed by a <code>[</code> character, followed by zero or
more <a href=#white-space-characters>white space characters</a>, followed by zero or
more <span title=character>characters</span>

</dt><dd>

<ol class=steps>

<li>Emit a <a href=#block-start-tag-token>block start tag token</a>
whose <a href=#block-start-tag-tag-name title=block-start-tag-tag-name>tag name</a> is
the <a href=#concept-section-block-tag-name title=concept-section-block-tag-name>section block tag
name</a>, and <a href=#block-start-tag-classes title=block-start-tag-classes>classes</a> is
the <a href=#body-of-a-class-specification title="body of a class specification">body</a> of
the <a href=#class-specification>class specification</a>, if any, or null otherwise.

</li><li>Remove the substring of <var>line</var>, from the beginning of the
string, to the <code>[</code> character after
the <a href=#concept-section-block-tag-name title=concept-section-block-tag-name>section block tag
name</a> and <a href=#class-specification>class specification</a> (if any),
from <var>line</var>.

</li><li>Remove <a href=#white-space-characters>white space characters</a> at the beginning of
<var>line</var>, if any.

</li><li>If <var>line</var> is not the empty string:

<ol>

<li>Set <var>tag name</var>
to <a href=#concept-figcaption><code title=concept-FIGCAPTION>FIGCAPTION</code></a>.

</li><li>If the the <a href=#concept-section-block-tag-name title=concept-section-block-tag-name>section
block tag name</a> is <a href=#concept-talk><code title=concept-TALK>TALK</code></a>,
set <var>tag name</var> to <a href=#concept-speaker><code title=concept-SPEAKER>SPEAKER</code></a>.

</li><li>Emit a <a href=#block-start-tag-token>block start tag token</a>
whose <a href=#block-start-tag-tag-name title=block-start-tag-tag-name>tag name</a> is <var>tag
name</var>.

</li><li>Run the <a href=#algorithm-to-tokenize-a-text>algorithm to tokenize a text</a> with
<var>line</var>.

</li><li>Emit a <a href=#block-end-tag-token>block end tag token</a>
whose <a href=#block-end-tag-tag-name title=block-end-tag-tag-name>tag name</a> is <var>tag
name</var>.

</li></ol>

</li><li>Set the <a href=#continuous-line-flag>continuous line flag</a> to false.

</li></ol>

</dd><dt>If <var>line</var> is a string consist of <code>[PRE</code>,
optionally followed by <a href=#class-specification>class specification</a>, followed by
a <code>[</code> character, followed by zero or more <a href=#white-space-characters>white space
characters</a>

</dt><dd>

<ol class=steps>

<li>Emit a <a href=#block-start-tag-token>block start tag token</a>
whose <a href=#block-start-tag-tag-name title=block-start-tag-tag-name>tag name</a>
is <a href=#pre><code>PRE</code></a>
and <a href=#block-start-tag-classes title=block-start-tag-classes>classes</a> is
the <a href=#body-of-a-class-specification title="body of a class specification">body</a> of
the <a href=#class-specification>class specification</a>, if any, or null otherwise.

</li><li>Set the <a href=#continuous-line-flag>continuous line flag</a> to false.

</li><li>Switch to the "<a href=#preformatted-block>preformatted block</a>"
<a href=#mode>mode</a>.

</li></ol>

</dd><dt>If <var>line</var> starts with <code>@@</code>
<!-- SuikaWiki/0.10 addition -->

</dt><dd>

<ol class=steps>

<li>Let <var>data</var> be <var>line</var>.

</li><li>Remove the first two characters of <var>data</var>.  (The removed
characters will be <code>@@</code>.)

</li><li>Remove <a href=#white-space-characters>white space characters</a> at the beginning of
<var>data</var>, if any.

</li><li>Emit a <a href=#editorial-note-start-token>editorial note start token</a>.

</li><li>Run the <a href=#algorithm-to-tokenize-a-text>algorithm to tokenize a text</a> with
<var>data</var>.

</li><li>Set the <a href=#continuous-line-flag>continuous line flag</a> to true.

</li></ol>

</dd><dt>If <var>line</var> starts with <code>;;</code>
<!-- SuikaWiki/0.10 addition -->

</dt><dd>

<ol class=steps>

<li>Let <var>data</var> be <var>line</var>.

</li><li>Remove the first two characters of <var>data</var>.  (The removed
characters will be <code>;;</code>.)

</li><li>Remove <a href=#white-space-characters>white space characters</a> at the beginning of
<var>data</var>, if any.

</li><li>Emit a <a href=#comment-paragraph-start-token>comment paragraph start token</a>.

</li><li>Run the <a href=#algorithm-to-tokenize-a-text>algorithm to tokenize a text</a> with
<var>data</var>.

</li><li>Set the <a href=#continuous-line-flag>continuous line flag</a> to true.

</li></ol>

<!--

Though the SuikaWiki3's parser recognizes "[[# ...]] @@" or "[[#
... ]] ;;" as comment paragraph or editorial note preceded by a form
block, it considered as a bug and this specification treates these
characters as character data.

-->

</dd><dt>If <var>line</var> is a string consist of a <code>]</code>
character, followed by
a <a href=#concept-section-block-tag-name title=concept-section-block-tag-name>section block tag
name</a>, followed by a <code>]</code> character, followed by zero
or more <a href=#white-space-characters>white space characters</a>

</dt><dd>

<ol class=steps>

<li>Emit a <a href=#block-end-tag-token>block end tag token</a>
whose <a href=#block-end-tag-tag-name title=block-end-tag-tag-name>tag name</a> is
the <a href=#concept-section-block-tag-name title=concept-section-block-tag-name>section block tag
name</a>.

</li><li>Set the <a href=#continuous-line-flag>continuous line flag</a> to false.

</li></ol>

</dd><dt>If <var>line</var> starts with <code>,</code>

</dt><dd>

<ol class=steps>

<li>Run the <a href=#algorithm-to-tokenize-a-table-row>algorithm to tokenize a table row</a> with
<var>line</var>.

</li><li>Set the <a href=#continuous-line-flag>continuous line flag</a> to false.

</li></ol>

</dd><dt>If <var>line</var> is <code>__IMAGE__</code>

</dt><dd>Switch to the "<a href=#image-data>image data</a>" <a href=#mode>mode</a>.  <!--
SuikaWikiImage/0.9 addition -->

</dd><dt>Otherwise

</dt><dd>

<ol class=steps>

<li>If the <a href=#continuous-line-flag>continuous line flag</a> is true, emit a
<a href=#character-token>character token</a> whose <a href=#character-data title=character-data>data</a> is a U+000A <code class=charname>LINE
FEED</code> character.

</li><li>Run the <a href=#algorithm-to-tokenize-a-text>algorithm to tokenize a text</a> with
<var>line</var>.

</li><li>Set the <a href=#continuous-line-flag>continuous line flag</a> to true.

</li></ol>

</dd></dl>

</section>

<section>
<h1 id=the-preformatted-mode><span class=secno>4.1.3 </span>The "<a href=#preformatted>preformatted</a>" mode</h1>

<p>In the "<dfn id=preformatted>preformatted</dfn>" mode, <var>line</var> <em class=rfc2119>MUST</em> be processed as follows:

</p><dl class=switch>

<dt>If <var>line</var> is the empty string

</dt><dd>

<ol class=steps>

<li>Emit a <a href=#preformatted-end-token>preformatted end token</a>.

</li><li>Switch to the "<a href=#body>body</a>" <a href=#mode>mode</a> and <a href=#reprocess-line title=reprocess-line>reprocess</a> <var title="">line</var>.

</li></ol>

</dd><dt>If <var>line</var> is a string consist of a <code>]</code>
character, followed by
a <a href=#concept-section-block-tag-name title=concept-section-block-tag-name>section block tag
name</a>, followed by a <code>]</code> character, followed by zero
or more <a href=#white-space-characters>white space characters</a>

<!--

In SuikaWiki3 implementation,

[INS[
[sp]aaa
]INS]
[sp]bbb

would create two pre with one lines, where

[sp]aaa
]INS]
[sp]bbb

would create one pre with three lines.  SuikaWiki/0.9 spec does not
specify how to implement the latter example.

-->

</dt><dd>

<ol class=steps>

<li>Emit a <a href=#preformatted-end-token>preformatted end token</a>.

</li><li>Emit a <a href=#block-end-tag-token>block end tag token</a>
whose <a href=#block-end-tag-tag-name title=block-end-tag-tag-name>tag name</a> is
the <a href=#concept-section-block-tag-name title=concept-section-block-tag-name>section block tag
name</a>.

</li><li>Set the <a href=#continuous-line-flag>continuous line flag</a> to false.

</li><li>Switch to the "<a href=#body>body</a>" <a href=#mode>mode</a>.

</li></ol>

</dd><dt>Otherwise

</dt><dd>

<ol class=steps>

<li>Emit a <a href=#character-token>character token</a> whose <a href=#character-data title=character-data>data</a> is a U+000A <code class=charname>LINE
FEED</code> character.

</li><li>Run the <a href=#algorithm-to-tokenize-a-text>algorithm to tokenize a text</a> with
<var>line</var>.

</li></ol>

</dd></dl>

</section>

<section>
<h1 id=the-preformatted-block-mode><span class=secno>4.1.4 </span>The "<a href=#preformatted-block>preformatted block</a>" mode</h1>

<p>In the "<dfn id=preformatted-block>preformatted block</dfn>" mode, <var>line</var> <em class=rfc2119>MUST</em> be processed as follows:

</p><dl class=switch>

<dt>If <var>line</var> is a string consist of <code>]PRE]</code>
followed by zero or more <a href=#white-space-characters>white space characters</a>

</dt><dd>

<ol class=steps>

<li>Emit a <a href=#block-end-tag-token>block end tag token</a>
whose <a href=#block-end-tag-tag-name title=block-end-tag-tag-name>tag name</a>
is <a href=#pre><code>PRE</code></a>.

</li><li>Set the <a href=#continuous-line-flag>continuous line flag</a> to false.

</li><li>Switch to the "<a href=#body>body</a>" <a href=#mode>mode</a>.

</li></ol>

</dd><dt>Otherwise

</dt><dd>

<ol class=steps>

<li>If the <a href=#continuous-line-flag>continuous line flag</a> is true, emit a
<a href=#character-token>character token</a> whose <a href=#character-data title=character-data>data</a> is a U+000A <code class=charname>LINE
FEED</code> character.

</li><li>Run the <a href=#algorithm-to-tokenize-a-text>algorithm to tokenize a text</a> with
<var>line</var>.

</li><li>Set <a href=#continuous-line-flag>continuous line flag</a> to true.

</li></ol>

</dd></dl>

</section>

<section>
<h1 id=the-image-data-mode><span class=secno>4.1.5 </span>The "<a href=#image-data>image data</a>" mode</h1>

<p>In the "<dfn id=image-data>image data</dfn>" mode, <var>line</var> <em class=rfc2119>MUST</em> be processed as follows:

</p><ol class=steps>

<li>If the <a href=#image-element>image element</a> is null, then create an
<a href=#the-image-element-in-the-suikawiki/0.9-namespace><code>image</code></a> element in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
and set the <a href=#image-element>image element</a> to that element.  Append the
<a href=#image-element>image element</a> to the <a href=#document-element>document element</a>.

</li><li>Otherwise, <a href=#append-a-character>append a character</a> U+000A <code class=charname>LINE FEED</code> to the <a href=#image-element>image element</a>.

</li><li>Then, <a href=#append-a-character title="append a character">append each
character</a> in <var>line</var> in the same order to the
<a href=#image-element>image element</a>.

</li></ol>

</section>

</section>

<section>
<h1 id=tokenization-of-a-table-row><span class=secno>4.2 </span>Tokenization of a table row</h1>

<p>The <dfn id=algorithm-to-tokenize-a-table-row>algorithm to tokenize a table row</dfn> <var>data</var> is
as follows:

</p><ol class=steps>

<li>Let <var>pos</var> be zero (0).  It represents the index in
<var>data</var>.  The index of the first character in <var>data</var>
is zero (0).

</li><li>Emit a <a href=#table-row-start-token>table row start token</a>.

</li><li><dfn id=tokenize-table-row-loop title=tokenize-table-row-loop><i>LOOP</i></dfn>: If
<var>pos</var> is greater than or equal to the length of
<var>data</var>, emit a <a href=#table-row-end-token>table row end token</a> and abort
this algorithm.

</li><li>Increase <var>pos</var> by one (1). <!-- Skip "," -->

</li><li>Let <var>cell</var> be the empty string.

</li><li>Let <var title="">cell quoted</var> be null.

</li><li>If <var title="">pos</var> is greater than or equal to the length of
<var title="">data</var>, emit a <a href=#table-row-end-token>table row end token</a> and
abort this algorithm.

</li><li>If the <var title="">pos</var>th character in <var title="">data</var>
is a <a href=#white-space-characters title="white space characters">white space
character</a>, increase <var title="">pos</var> by one (1) and go back
to the previous step.

</li><li>If the <var title="">pos</var>th character in <var title="">data</var>
is a <code>*</code> character, set the <var title="">header cell</var>
flag and increase <var title="">pos</var> by one (1).

</li><li>If the <var title="">pos</var>th character in <var title="">data</var>
is <code>"</code>, set <var title="">cell quoted</var> to the empty
string and follow the substeps below:

<ol>

<li>Increase <var>pos</var> by one (1).

</li><li>If <var>pos</var> is greater than or equal to the length of
<var>data</var>, abort these substeps.

</li><li>Otherwise, if the <var>pos</var>th character in <var>data</var> is
<code>"</code>, abort these substeps.

</li><li>Otherwise, if the <var>pos</var>th character in <var>data</var> is
<code>\</code>, follow the substeps below:

<ol>

<li>Increase <var>pos</var> by one (1).

</li><li>If <var>pos</var> is greater than or equal to the length of
<var>data</var>, abort these substeps.

</li><li>Otherwise, append the <var>pos</var>th character in
<var>data</var> to <var>cell quoted</var>.

</li></ol>

</li><li>Otherwise, append the <var>pos</var>th character in
<var>data</var> to <var>cell quoted</var>.

</li><li>Go back to the first substep in these substeps.

</li></ol>

</li><li>While <var title="">pos</var> is less than the length of <var title="">data</var>, run the following substeps:

<ol>

<li>If the <var>pos</var>th character in <var title="">data</var> is
<code>,</code>, abort these substeps. <!-- without increasing <var
title>pos</var> -->

</li><li>Append the <var title="">pos</var>th character in <var title="">data</var> to <var title="">cell</var>.

</li><li>Increase <var title="">pos</var> by one (1).

</li></ol>

</li><li>Remove <a href=#white-space-characters>white space characters</a> at the end of <var title="">data</var>, if any.

</li><li>If <var title="">header cell</var> flag is not set,
<var title="">cell quoted</var> is null, and <var title="">cell</var> is
equal to <code>==</code>, then emit a <a href=#table-colspan-cell-token>table colspan cell
token</a> and go back to the step
labeled <a href=#tokenize-table-row-loop title=tokenize-table-row-loop><i>LOOP</i></a>.

</li><li>Emit a <a href=#table-cell-start-token>table cell start token</a> whose 
<a href=#table-cell-start-header title=table-cell-start-header>header</a> is
whether <var title="">header cell</var> flag is set or not.

</li><li>If <var title="">cell quoted</var> is <em>not</em> null, run the
<a href=#algorithm-to-tokenize-a-text>algorithm to tokenize a text</a> with <var title="">cell
quoted</var>.

</li><li>Run the <a href=#algorithm-to-tokenize-a-text>algorithm to tokenize a text</a> with <var title="">cell</var>.

</li><li>Emit a <a href=#table-cell-end-token>table cell end token</a>.

</li><li>Go back to the step labeled <a href=#tokenize-table-row-loop title=tokenize-table-row-loop><i>LOOP</i></a>.

</li></ol>

</section>

<section>
<h1 id=tokenization-of-a-text><span class=secno>4.3 </span>Tokenization of a text</h1>

<p>The <dfn id=algorithm-to-tokenize-a-text>algorithm to tokenize a text</dfn> <var>data</var> is as
follows:

</p><ol class=steps>

<li>Let <var title="">nest level</var> be zero (0).

</li><li>If <var>data</var> begins with <code>[</code> followed by one or
more <a href=#digits>digits</a> followed by <code>]</code>, run the following
steps:

<ol>

<li>Let <var>number</var> be the <a href=#digits>digits</a> in the matched
substring.

</li><li>Remove the matched substring frm <var>data</var>.

</li><li>Emit an <a href=#element-token>element token</a> whose <a href=#element-local-name title=element-local-name>local name</a> is <a href=#the-anchor-end-element-in-the-suikawiki/0.9-namespace><code>anchor-end</code></a>,
<a href=#element-namespace title=element-namespace>namespace</a> is the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>, <a href=#element-anchor-attribute title=element-anchor-attribute>anchor attribute</a> is
<var>number</var>, and <a href=#element-content title=element-content>content</a> is
<code>[</code> followed by <var>number</var> followed by
<code>]</code>.

</li></ol>

</li><li>While the length of <var>data</var> is not zero (0), run the
appropriate steps:

<dl class=switch>

<dt>If <var>data</var> begins with <code>[[#</code>, followed by one
or more <a href=#lowercase-letters>lowercase letters</a> or U+002D <code class=charname>HYPHEN-MINUS</code>

</dt><dd>

<ol>

<li>Let <var title="">name</var> be the <a href=#lowercase-letters>lowercase letters</a>
and U+002D <code class=charname>HYPHEN-MINUS</code> in the matched
substring.

</li><li>Remove the matched substring from <var>data</var>.

</li><li>Let <var title="">id</var> be null.

</li><li>Let <var>parameters</var> be an empty list.

</li><li>If <var>data</var> begins with a <a href=#class-specification>class specification</a>,
run the following substeps:

<ol>

<li>Set the <var title="">id</var> to the <a href=#body-of-a-class-specification title="body of a class
specification">body</a> of the <a href=#class-specification>class specification</a>.

</li><li>Remove the class specification from <var>data</var>.

</li></ol>

</li><li>While the first character of <var>data</var> is <code>:</code>,
run the following substeps:

<ol>

<li>Remove the first character of <var>data</var>.

</li><li>If the length of <var>data</var> is greater than one (1) and the
first two characters of <var>data</var> are <code>]]</code>, abort
these substeps.

</li><li>Let <var title="">parameter</var> be the empty string.

</li><li>If <var title="">data</var> is empty, append <var title="">parameter</var> to <var title="">parameters</var> and abort these
substeps.

</li><li>If the first character of <var title="">data</var> is <code>'</code>,
run the following steps:

<ol>

<li>Remove the first character of <var>data</var>.

</li><li>If <var>data</var> is empty, abort these substeps.

</li><li>If the first character of <var>data</var> is <code>'</code>, abort
these substeps.

</li><li>If the first character of <var>data</var> is <code>\</code>, run
the following substeps:

<ol>

<li>Remove the first character of <var title="">data</var>.

</li><li>If <var title="">data</var> is empty, abort these substeps.

</li><li>Append the first character of <var>data</var> to <var title="">parameter</var>.

</li></ol>

</li><li>Otherwise, append the first character of <var title="">data</var> to
<var title="">parameter</var>.

</li><li>Go back to the first substep in these substeps.

</li></ol>

</li><li>Otherwise, run the following steps:

<ol>

<li>If <var title="">data</var> is empty, or if the first character of
<var title="">data</var> is <code>:</code>, abort these substeps.

</li><li>Append the first character of <var title="">data</var> to <var title="">parameter</var>.

</li><li>Remove the first character of <var title="">data</var>.

</li><li>Go back to the first substep of these substeps.

</li></ol>

</li><li>Append <var title="">parameter</var> to <var title="">parameters</var>.

</li></ol>

</li><li>If the length of <var>data</var> is greater than one (1) and the
first two characters of <var>data</var> are <code>]]</code>, remove
these characters from <var>data</var>.

</li><li>Emit a <a href=#form-token>form token</a> whose <a href=#form-name title=form-name>name</a> is <var title="">name</var>, <a href=#form-id title=form-id>id</a> is <var title="">id</var>, and <a href=#form-parameters title=form-parameters>parameters</a> is <var title="">parameters.

</var></li></ol>

</dd><dt>Otherwise, if the <var>data</var> begins with <code>[[</code>

</dt><dd>

<ol>

<li>Remove the matched substring from <var>data</var>.

</li><li>Emit an <a href=#inline-start-tag-token>inline start tag token</a>.

</li><li>Increase <var title="">nest level</var> by one (1).

</li></ol>

</dd><dt>If <var>data</var> begins with <code>[</code>, followed by one or
more <a href=#uppercase-letters>uppercase letters</a>, optionally followed by a
<a href=#class-specification>class specification</a>, optionally followed by a
<a href=#language-specification>language specification</a>, followed by <code>[</code>

</dt><dd>

<ol>

<li>Let <var>tag name</var> be the <a href=#uppercase-letters>uppercase letters</a> in
the matched substring of <var>data</var>.

</li><li>Let <var>classes</var> be the <a href=#body-of-a-class-specification title="body of a class
specification">body</a> of the <a href=#class-specification>class specification</a> in
the matched substring of <var>data</var>, if any, or null, otherwise.

</li><li>Let <var>language</var> be the <a href=#body-of-a-language-specification title="body of a language
specification">body</a> of the <a href=#language-specification>language specification</a>
in the matched substring of <var>data</var>, if any, or null,
otherwise.

</li><li>Remove the matched substring from <var>data</var>.

</li><li>Emit an <a href=#inline-start-tag-token>inline start tag token</a> whose <a href=#inline-start-tag-tag-name title=inline-start-tag-tag-name>tag name</a> is <var>tag
name</var>, <a href=#inline-start-tag-classes title=inline-start-tag-classes>classes</a> is
<var>classes</var>, and <a href=#inline-start-tag-language title=inline-start-tag-language>language</a> is
<var>language</var>.

</li><li>Increase <var title="">nest level</var> by one (1).

</li></ol>

</dd><dt>If <var>data</var> begins with <code>]]</code>

</dt><dd>

<ol>

<li>Remove the matched substring from <var>data</var>.

</li><li>Emit an <a href=#inline-end-tag-token>inline end tag token</a>.

</li><li>If <var title="">nest level</var> is greater than zero (0), decrease
<var title="">nest level</var> by one (1).

</li></ol>

</dd><dt>If <var>data</var> begins with <code>]&lt;</code>, followed by one
or more <a href=#scheme-characters>scheme characters</a>, followed by <code>:</code>

</dt><dd>

<ol>

<li>Remove the matched substring from <var>data</var> and then act as
if the first two character of the original <var>data</var> before the
removal were <code>&lt;</code> instead of <code>]&lt;</code>, except
that the emitted token is an <a href=#inline-end-tag-token>inline end tag token</a> instead
of an <a href=#element-token>element token</a>.  The <a href=#inline-end-tag-res-scheme-attribute title=inline-end-tag-res-scheme-attribute>resScheme attribute</a>
of the token <em class=rfc2119>MUST</em> be the <a href=#element-res-scheme-attribute title=element-res-scheme-attribute>resScheme attribute</a> of the
token that would be emitted if the first two character were
<code>&lt;</code>.  The <a href=#inline-end-tag-res-parameter-attribute title=inline-end-tag-res-parameter-attribute>resParameter
attribute</a> of the token <em class=rfc2119>MUST</em> be the <a href=#element-res-parameter-attribute title=element-res-parameter-attribute>resParameter attribute</a> of
the token that would be emitted if the first two character were
<code>&lt;</code>.

</li><li>If <var title="">data</var> begins with <code>]</code>, remove the
character from <var title="">data</var>.

</li><li>If <var title="">nest level</var> is greater than zero (0), decrease
<var title="">nest level</var> by one (1).

</li></ol>

</dd><dt>If <var>data</var> begins with <code>]&gt;&gt;</code> followed by one or
more <a href=#digits>digits</a>, followed by <code>]</code>

</dt><dd>

<ol>

<li>Let <var>number</var> be the <a href=#digits>digits</a> in the matched
substring.

</li><li>Remove the matched substring from <var>data</var>.

</li><li>Emit an <a href=#inline-end-tag-token>inline end tag token</a> whose <span title=inline-end-tag-anchor>anchor</span> is <var>number</var>.

</li><li>If <var title="">nest level</var> is greater than zero (0), decrease
<var title="">nest level</var> by one (1).

</li></ol>

</dd><dt>If <var title="">nest level</var> is greater than zero (0) and <var title="">data</var> begins with <code>]</code> followed by zero or more
<a href=#white-space-characters>white space characters</a> followed by <code>[</code>

</dt><dt>If <var title="">nest level</var> is greater than zero (0) and <var title="">data</var> begins with <code>]</code> followed by zero or more
<a href=#white-space-characters>white space characters</a> followed by a <a href=#language-specification>language
specification</a> followed by <code>[</code>

</dt><dd>

<ol>

<li>Let <var title="">lang</var> be the <a href=#body-of-a-language-specification title="body of a language
specification">body</a> of the <a href=#language-specification>language specification</a>
in the matched substring of <var title="">data</var>, if any, or null,
otherwise.

</li><li>Remove the matched substring from <var>data</var>.

</li><li>Emit an <a href=#inline-middle-tag-token>inline middle tag token</a> whose <a href=#inline-middle-tag-language title=inline-middle-tag-language>language</a> is <var title="">lang</var>.

</li></ol>

</dd><dt>If <var>data</var> begins with <code>&lt;</code>, followed by one
or more <a href=#scheme-characters>scheme characters</a>, followed by <code>:</code>

</dt><dd>

<ol>

<li>Let <var>scheme</var> be the <a href=#scheme-characters>scheme characters</a> part
of the matched substring.

</li><li>Remove the matched substring from <var>data</var>.

</li><li>Let <var title="">value</var> be the empty string.

</li><li>Run the following steps:

<ol>

<li>If <var>data</var> is empty, abort these steps.

</li><li>If the first character of <var>data</var> is <code>&gt;</code>,
remove the first character of <var>data</var> and abort these steps.

</li><li>If the first character of <var title="">data</var> is <code>"</code>,
append <code>"</code> to <var title="">data</var> and run the following
substeps:

<ol>

<li>Remove the first character of <var>data</var>.

</li><li>If <var>data</var> is empty, abort these steps.

</li><li>If the first character of <var title="">data</var> is <code>"</code>,
append <code>"</code> to <var title="">value</var>, remove the first
character of <var title="">data</var>, and abort these substeps.

</li><li>If the first character of <var>data</var> is <code>\</code>, run
the following substeps:

<ol>

<li>Append <code>\</code> to <var title="">value</var>.

</li><li>Remove the first character of <var title="">data</var>.

</li><li>If <var title="">data</var> is empty, abort these steps.

</li><li>Append the first character of <var title="">data</var> to <var title="">value</var>.

</li></ol>

</li><li>Otherwise, append the first character of <var title="">data</var> to
<var title="">value</var>.

</li><li>Return back to the first substep of these substeps.

</li></ol>

</li><li>Otherwise, run the following substeps:

<ol>

<li>Append the first character of <var title="">data</var> to <var title="">value</var>.

</li><li>Remove the first character of <var title="">data</var>.

</li></ol>

</li><li>Go back to the first substeps in these substeps.

</li></ol>

</li><li>Let <var title="">content</var> be <var title="">scheme</var> followed
by <code>:</code> followed by <var title="">value</var>.

</li><li>If <var title="">scheme</var> does <em>not</em> contain one of
<a href=#uppercase-letters>uppercase letters</a>, set <var title="">value</var> to <var title="">content</var> and set <var title="">scheme</var> to
<code>URI</code>.

</li><li>Emit an <a href=#element-token>element token</a> whose <a href=#element-local-name title=element-local-name>local name</a> is
<a href=#the-anchor-external-element-in-the-suikawiki/0.9-namespace><code>anchor-external</code></a>, <a href=#element-namespace title=element-namespace>namespace</a> is the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9
namespace</a>, <a href=#element-res-scheme-attribute title=element-res-scheme-attribute>resScheme
attribute</a> is <var title="">scheme</var>, <a href=#element-res-parameter-attribute title=element-res-parameter-attribute>resParameter attribute</a> is
<var title="">value</var>, and <a href=#element-content title=element-content>content</a>
is <var title="">content</var>.

</li></ol>

</dd><dt>If <var>data</var> begins with <code>'''</code>

</dt><dd>

<ol>

<li>Remove the matched substring from <var>data</var>.

</li><li>Emit a <a href=#strong-token>strong token</a>.

</li></ol>

</dd><dt>Otherwise, if <var>data</var> begins with <code>''</code>

</dt><dd>

<ol>

<li>Remove the matched substring from <var>data</var>.

</li><li>Emit an <a href=#emphasis-token>emphasis token</a>.

</li></ol>

</dd><dt>If <var>data</var> begins with <code>&gt;&gt;</code> followed by one or
more <a href=#digits>digits</a>

</dt><dd>

<ol>

<li>Emit an <a href=#element-token>element token</a> whose <a href=#element-local-name title=element-local-name>local name</a> is
<a href=#the-anchor-internal-element-in-the-suikawiki/0.9-namespace><code>anchor-internal</code></a>, <a href=#element-namespace title=element-namespace>namespace</a> is the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9
namespace</a>, <a href=#element-anchor-attribute title=element-anchor-attribute>anchor
attribute</a> is the <a href=#digits>digits</a> part of the matched
substring, and <a href=#element-content title=element-content>content</a> is the
matched substring.

</li><li>Remove the matched substring from <var>data</var>.

</li></ol>

</dd><dt>If <var>data</var> begins with <code>__&amp;&amp;</code>

</dt><dd>

<ol>

<li>Remove the matched substring from <var>data</var>.

</li><li>If <var>data</var> begins with <code>&amp;&amp;__</code>, or if
<var>data</var> does not contain <code>&amp;&amp;__</code> as a
substring, emit four <a href=#character-token title="character token">character
tokens</a> whose <a href=#character-data title=character-data>data</a> are
<code>_</code>, <code>_</code>, <code>&amp;</code>, and
<code>&amp;</code> respectively and remove the first four characters
of <var>data</var> and abort these steps.

</li><li>Let <var title="">name</var> be the substring of <var title="">data</var> between the beginning of the string and the first
occurence of <code>&amp;&amp;__</code> (exclusive).

</li><li>Remove the first occurence of <code>&amp;&amp;__</code> and any
character before it from <var title="">data</var>.

</li><li>Emit an <a href=#element-token>element token</a> whose <a href=#element-local-name title=element-local-name>local name</a> is <a href=#the-replace-element-in-the-suikawiki/0.9-namespace><code>replace</code></a>,
<a href=#element-namespace title=element-namespace>namespace</a> is the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>, <a href=#element-by-attribute title=element-by-attribute>by attribute</a> is <var title="">name</var>.

</li></ol>

</dd><dt>Otherwise

</dt><dd>

<ol>

<li>Emit a <a href=#character-token>character token</a> whose <a href=#character-data title=character-data>data</a> set to the first character of
<var>data</var>.

</li><li>Remove the first character of <var>data</var>.

</li></ol>

</dd></dl>

</li></ol>

</section>

<section>
<h1 id=parsing-a-magic-line><span class=secno>4.4 </span>Parsing a magic line</h1>

<p>To <dfn id=parse-a-magic-line>parse a magic line</dfn> <var>data</var>, the following
steps <em class=rfc2119>MUST</em> be used:

</p><ol class=steps>

<li>Remove the first two characters of <var>data</var>.  (It will be
<code>#?</code>.)

</li><li>If there are one or more characters that are not <a href=#white-space-characters>white space
characters</a> at the beginning of <var>data</var>, run the
following substeps:

<ol>

<li>Let <var title="">name</var> be those characters.

</li><li>Let <var title="">version</var> be null.

</li><li>Remove those characters from <var title="">data</var>.

</li><li>If <var title="">name</var> contains <code>/</code>, set the
substring after the first occurence of the character to <var title="">version</var>.  Note that <var title="">version</var> might become
the empty string.  Remove the <code>/</code> character and the
substring after the character from <var title="">name</var>.

</li><li>Set the <a href=#the-name-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-name>Name</code></a> <a href=#content-attribute>content
attribute</a> of the <a href=#document-element>document element</a> in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> to <var title="">name</var>.

</li><li>If <var title="">version</var> is <em>not</em> null, set the <code title=attr-sw-version>Version</code> <a href=#content-attribute>content attribute</a> of
the <a href=#document-element>document element</a> in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9
namespace</a> to <var title="">version</var>.

</li></ol>

</li><li>Run the following substeps:

<ol>

<li>If <var>data</var> is empty, abort these substeps.

</li><li>If the first character of <var>data</var> is a <a href=#white-space-characters title="white
space characters">white space character</a>, remove the character
from <var>data</var> and go back to the first substep of these
substeps.

</li><li>Let <var title="">name</var> be the empty string.

</li><li>If <var title="">data</var> begins with one or more characters that
are not <code>=</code>, set <var title="">name</var> to those characters
and remove those characters from <var title="">data</var>.

</li><li>Let <var title="">parameter</var> be a newly created <a href=#the-parameter-element-in-the-suikawiki/0.9-namespace><code title=element-sw-parameter>parameter</code></a> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> and set the <a href=#attr-sw-parameter-name><code title=attr-sw-parameter-name>name</code></a> <a href=#content-attribute>content
attribute</a> of <var title="">parameter</var> to <var title="">name</var>.

</li><li>Remove the first character of <var>data</var>.  (It will be
<code>=</code>.)

</li><li>If the first character of <var>data</var>, if any, is
<code>"</code>, remove that character from <var>data</var>.

</li><li>Run the following substeps:

<ol>

<li>Let <var title="">value</var> be the empty string.

</li><li>If <var title="">data</var> is empty, or if the first character of
<var title="">data</var> is <code>"</code>, create a <a href=#the-value-element-in-the-suikawiki/0.9-namespace><code title=element-sw-value>value</code></a> element in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9
namespace</a>, set the <code>textContent</code> <a href=#idl-attribute>IDL
attribute</a> of the node to <var title="">value</var>, and append the
node to <var title="">parameter</var>.

</li><li>Otherwise, if the first character of <var title="">data</var>, if
any, is <code>\</code>, run the following substeps:

<ol>

<li>Remove the first character of <var title="">data</var>.  (The removed
character will be <code>\</code>.)

</li><li>If the first character of <var title="">data</var>, if any, is
<code>,</code>, abort these substeps.

</li><li>Otherwise, append the first character of <var title="">data</var>, if
any, to <var title="">value</var>.

</li></ol>

</li><li>In any case, if the first character of <var title="">data</var> is
<code>,</code>, create a <a href=#the-value-element-in-the-suikawiki/0.9-namespace><code title=element-sw-value>value</code></a>
element in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>, set the
<code>textContent</code> <a href=#idl-attribute>IDL attribute</a> of the node to
<var title="">value</var>, append the node to <var title="">parameter</var>,
and go back to the first substep of these substeps.

</li><li>Otherwise, append the first character of <var title="">data</var> to
<var title="">value</var>.

</li><li>Go back to the <em>second</em> substep of these substeps.

</li></ol>

</li><li>If the first character of <var>data</var>, if any, is
<code>"</code>, remove that character from <var>data</var>.

</li><li>Append <var title="">parameter</var> to the <a href=#head-element>head
element</a>.

</li><li>Go back to the first substep of these substeps.

</li></ol>

</li></ol>

</section>

<section>
<h1 id=tree-construction><span class=secno>4.5 </span>Tree construction</h1>

<p>The <dfn id=tree-construction-0>tree construction</dfn> stage constructs a <a href=#node-tree>node
tree</a> from a series of <a href=#token title=token>tokens</a> emitted
by the
<a href=#tokenization>tokenization</a> stage.  The <a href=#tree-construction-0>tree construction</a>
stage has two state variables: <a href=#insertion-mode>insertion mode</a> and
<a href=#stack-of-open-elements>stack of open elements</a>.

</p><p>The <dfn id=insertion-mode>insertion mode</dfn> is one of "<a href=#in-section>in section</a>",
"<a href=#in-table-row>in table row</a>", or "<a href=#in-paragraph>in paragraph</a>".  The
default that <em class=rfc2119>MUST</em> be used when the <a href=#tree-construction-0>tree
construction</a> begins is the "<a href=#in-section>in section</a>"
<a href=#insertion-mode>insertion mode</a>.  The rules for these <a href=#insertion-mode title="insertion mode">insertion modes</a> are described in the
subsections below.

</p><p>When the algorithm below says that the <a href=#swml-text-serialization-parser title="SWML text
serialization parser">parser</a> is to do something “<dfn id=using-the-rules-for>using
the rules for</dfn> the <var>m</var> <a href=#insertion-mode>insertion mode</a>”,
the <a href=#swml-text-serialization-parser title="SWML text serialization parser">parser</a> <em class=rfc2119>MUST</em> use the rules described under the <var>m</var>
<a href=#insertion-mode>insertion mode</a>'s section, but <em class=rfc2119>MUST</em>
leave the <a href=#insertion-mode>insertion mode</a> unchanged.

</p><p>The <dfn id=stack-of-open-elements>stack of open elements</dfn> contains tuples of
(<dfn id=element-node>element node</dfn>, <dfn id=section-depth>section depth</dfn>, <dfn id=quotation-depth>quotation
depth</dfn>, <dfn id=list-depth>list depth</dfn>).  These stack grows downdards; the
topmost entry on the stack is the first one added to the stack, and
the bottommost entry of the stack is the most recently added entry in
the stack.  It initially contains only a tuple: (the <a href=#body-element>body
element</a>, <code>0</code>, <code>0</code>, <code>0</code>).  When
an entry is pushed to the <a href=#stack-of-open-elements>stack of open elements</a>, the
items of the new tupple is set to the same values as the bottommost
tuple unless otherwise specified.

</p><p>The <dfn id=current-element>current element</dfn> is the <a href=#element-node>element node</a>
of the bottommost entry in the <a href=#stack-of-open-elements>stack of open elements</a>.

</p><section>
<h1 id=the-in-section-insertion-mode><span class=secno>4.5.1 </span>The "<a href=#in-section>in section</a>" <a href=#insertion-mode>insertion mode</a></h1>

<p>In the "<dfn id=in-section>in section</dfn>" <a href=#insertion-mode>insertion mode</a>, a
<a href=#token>token</a> <em class=rfc2119>MUST</em> be processed as
follows:

</p><dl class=switch>

<dt>A <a href=#heading-start-token>heading start token</a>

</dt><dd>

<ol class=steps>

<li>If the local name of the <a href=#current-element>current element</a> is
<em>not</em> one of <a href=#element-html-body><code title=element-html-body>body</code></a>,
<a href=#section><code>section</code></a>, and <a href=#block-elements>block elements</a>, then pop the
element off the <a href=#stack-of-open-elements>stack of open elements</a> and follow this
substep again.

</li><li>Let <var title="">current depth</var> be the <a href=#section-depth>section
depth</a> of the bottommost entry in the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>If <a href=#heading-start-depth title=heading-start-depth>depth</a> of the
<a href=#token>token</a> is less than or equal to the <var title="">current
depth</var>, pop the element off the <a href=#stack-of-open-elements>stack of open
elements</a> and go back to the first substep of these substeps.

</li><li>Otherwise, if <a href=#heading-start-depth title=heading-start-depth>depth</a> of the
<a href=#token>token</a> is greater than <var title="">current depth</var> + 1,
create a <a href=#section><code>section</code></a> element in the <a href=#html-namespace>HTML
namespace</a>, append the element created to the <a href=#current-element>current
element</a>, push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a> with <a href=#section-depth>section depth</a> set to <var title="">current depth</var> + 1, <a href=#quotation-depth>quotation depth</a> set to
zero (0), and <a href=#list-depth>list depth</a> set to zero (0), and go back to
the first substep of these substeps.

</li><li>Create a <a href=#section><code>section</code></a> element in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a> with <a href=#section-depth>section depth</a> set to <a href=#heading-start-depth title=heading-start-depth>depth</a>, <a href=#quotation-depth>quotation depth</a>
set to zero (0), and <a href=#list-depth>list depth</a> set to zero (0).

</li><li>Create a <a href=#h1><code>h1</code></a> element in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>Switch to the "<a href=#in-paragraph>in paragraph</a>" <a href=#insertion-mode>insertion
mode</a>.

</li></ol>

</dd><dt>A <a href=#block-start-tag-token>block start tag token</a>
whose <a href=#block-start-tag-tag-name title=block-start-tag-tag-name>tag name</a>
is <em>not</em> <a href=#pre><code>PRE</code></a>

</dt><dd>

<ol class=steps>

<li>If
the <a href=#token>token</a>'s <a href=#block-start-tag-tag-name title=block-start-tag-tag-name>tag
name</a> is <a href=#concept-talk><code title=concept-TALK>TALK</code></a>:

  <ol>

  <li>If the <a href=#current-element>current
  element</a>'s <a href=#concept-element-local-name title=concept-element-local-name>local
  name</a> is <em>not</em> <a href=#the-dialogue-element-in-the-suikawiki/0.9-namespace><code>dialogue</code></a>:

    <ol>

    <li>Let <var>element</var> be
    a <a href=#the-dialogue-element-in-the-suikawiki/0.9-namespace><code>dialogue</code></a> <a href=#element>element</a> in
    the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>.

    </li><li>Append <var>element</var> created to the <a href=#current-element>current
    element</a>.

    </li><li>Push <var>element</var> to the <a href=#stack-of-open-elements>stack of open
    elements</a>.

    </li></ol>

  

</li><li>Otherwise:

  <ol>

  <li>If the <a href=#current-element>current
  element</a>'s <a href=#concept-element-local-name title=concept-element-local-name>local
  name</a> is <a href=#the-dialogue-element-in-the-suikawiki/0.9-namespace><code>dialogue</code></a>, pop the <a href=#current-element>current
  element</a> off the <a href=#stack-of-open-elements>stack of open elements</a>.

  

</li><li>Let <var>row</var> be the table row of the <a href=#block-element-table>Block Element
Table</a> whose <a href=#block-start-tag-tag-name title=block-start-tag-tag-name>tag
name</a> is
the <a href=#token>token</a>'s <a href=#block-start-tag-tag-name title=block-start-tag-tag-name>tag
name</a>.

</li><li>Create an <a href=#element>element</a>
whose <a href=#concept-element-namespace title=concept-element-namespace>namespace</a>
is <var>row</var>'s <a href=#concept-element-namespace title=concept-element-namespace>namespace</a>
and whose <a href=#concept-element-local-name title=concept-element-local-name>local name</a>
is <var>row</var>'s <a href=#concept-element-namespace title=concept-element-namespace>namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a> with <a href=#section-depth>section depth</a> set to zero (0),
<a href=#quotation-depth>quotation depth</a> set to zero (0), and <a href=#list-depth>list
depth</a> set to zero (0).

</li><li>If
the <a href=#token>token</a>'s <a href=#block-start-tag-classes title=block-start-tag-classes>classes</a>
is not null, set the <a href=#the-class-attribute><code>class</code></a> <a href=#attribute>attribute</a> of the
element created to <a href=#block-start-tag-classes title=block-start-tag-classes>classes</a>.

</li></ol>

<dt>A <a href=#block-end-tag-token>block end tag token</a>
whose <a href=#block-end-tag-tag-name title=block-end-tag-tag-name>tag name</a>
is <em>not</em> <a href=#pre><code>PRE</code></a>

</dt><dd>

<ol class=steps>

<li>Let <var>row</var> be the table row of the <a href=#block-element-table>Block Element
Table</a> whose <a href=#block-start-tag-tag-name title=block-start-tag-tag-name>tag
name</a> is
the <a href=#token>token</a>'s <a href=#block-end-tag-tag-name title=block-end-tag-tag-name>tag
name</a>.

</li><li>Let <var>local name</var>
be <var>row</var>'s <a href=#concept-element-local-name title=concept-element-local-name>local
name</a>.

</li><li>If the <a href=#stack-of-open-elements>stack of open elements</a> contains
an <a href=#element>element</a>
whose <a href=#concept-element-local-name title=concept-element-local-name>local name</a>
is <var>local name</var>, pop the <a href=#current-element>current element</a> off
the <a href=#stack-of-open-elements>stack of open elements</a> until an <a href=#element>element</a>
whose <a href=#concept-element-local-name title=concept-element-local-name>local name</a>
is <var>local name</var> has been popped from the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>Set the <span>continuous line</span> to false.

</li></ol>

</dd><dt>A <a href=#block-element-token>block element token</a>

</dt><dd>

<ol class=steps>

<li>Create an <a href=#hr><code>hr</code></a> <a href=#element>element</a> in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>If
the <a href=#token>token</a>'s <a href=#block-start-tag-classes title=block-start-tag-classes>classes</a>
is not null, set the <a href=#the-class-attribute><code>class</code></a> <a href=#attribute>attribute</a> of the
element created to <a href=#block-start-tag-classes title=block-start-tag-classes>classes</a>.

</li></ol>

</dd><dt>A <a href=#quotation-start-token>quotation start token</a>

</dt><dd>

<ol class=steps>

<li>If the <a href=#element-local-name title=element-local-name>local name</a> of
the <a href=#current-element>current element</a> is <em>not</em> one
of <a href=#blockquote><code>blockquote</code></a>, <a href=#element-html-body><code title=element-html-body>body</code></a>,
<a href=#section><code>section</code></a>, and <a href=#block-elements>block elements</a>, then pop the
element off the <a href=#stack-of-open-elements>stack of open elements</a> and follow this
substep again.

</li><li>Let <var title="">current depth</var> be the <a href=#quotation-depth>quotation
depth</a> of the bottommost entry in the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>If <a href=#quotation-start-depth title=quotation-start-depth>depth</a> of the
<a href=#token>token</a> is less than the <var title="">current depth</var>,
pop the element off the <a href=#stack-of-open-elements>stack of open elements</a> and go
back to the first substep of these substeps.

</li><li>Otherwise, if <a href=#quotation-start-depth title=quotation-start-depth>depth</a> of
the <a href=#token>token</a> is greater than <var title="">current depth</var>,
create a <a href=#blockquote><code>blockquote</code></a> element in the <a href=#html-namespace>HTML
namespace</a>, append the element created to the <a href=#current-element>current
element</a>, push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a> with <a href=#section-depth>section depth</a> set to zero (0),
<a href=#quotation-depth>quotation depth</a> set to <var title="">current depth</var> +
1, and <a href=#list-depth>list depth</a> set to zero (0), and go back to the
first substep of these substeps.

</li></ol>

</dd><dt>A <a href=#list-start-token>list start token</a>

</dt><dd>

<ol class=steps>

<li>If the <a href=#current-element>current
element</a>'s <a href=#concept-element-local-name title=concept-element-local-name>local
name</a> is <a href=#the-dialogue-element-in-the-suikawiki/0.9-namespace><code>dialogue</code></a>, pop the <a href=#current-element>current
element</a> off the <a href=#stack-of-open-elements>stack of open elements</a>.

</li><li>Let <var title="">current depth</var> be the <a href=#list-depth>list depth</a>
of the <a href=#current-element>current element</a>.

</li><li>Let <var title="">inserted depth</var> be the length of <a href=#list-start-depth title=list-start-depth>depth</a> of the <a href=#token>token</a>.

</li><li>Let <var title="">local name</var> be <a href=#ul><code>ul</code></a>, if the last
character in <a href=#list-start-depth title=list-start-depth>depth</a> is
<code>-</code>, or <a href=#ol><code>ol</code></a>, otherwise.

</li><li>If <var title="">current depth</var> is greater than <var title="">inserted depth</var>, pop the <a href=#current-element>current element</a> off
the <a href=#stack-of-open-elements>stack of open elements</a> and go back to the first
substep of these substeps.

</li><li>If the <a href=#list-depth>list depth</a> of the <a href=#current-element>current element</a>
is equal to <var title="">inserted depth</var> and the local name of the
<a href=#current-element>current element</a> is <em>not</em> <var title="">local
name</var>, pop the <a href=#current-element>current element</a> off the <a href=#stack-of-open-elements>stack
of open elements</a> and go back to the first substep of these
substeps.

</li><li>If <var title="">current depth</var> is less than <var title="">inserted
depth</var>, run the following substeps:

<ol>

<li>Let <var title="">type</var> be the character at the index equal to
<var>current depth</var> in <a href=#list-start-depth title=list-start-depth>depth</a>
of the <a href=#token>token</a>, where the index of the first character in
<a href=#list-start-depth title=list-start-depth>depth</a> is zero (0).

</li><li>If <var>type</var> is <code>-</code>, create a <a href=#ul><code>ul</code></a>
element in the <a href=#html-namespace>HTML namespace</a>.

</li><li>Otherwise, create a <a href=#ol><code>ol</code></a> element in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>, with <a href=#list-depth>list depth</a> set to <var>current
depth</var> + 1.

</li><li>If <var>current depth</var> + 1 is less than <var>inserted
depth</var>, run the following substeps:

<ol>

<li>Create a <a href=#li><code>li</code></a> element in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li></ol>

</li><li>Go back to the first substep for the <a href=#list-start-token>list start
token</a>.

</li></ol>

</li><li>Create a <a href=#li><code>li</code></a> element in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>Switch to the "<a href=#in-paragraph>in paragraph</a>" <a href=#insertion-mode>insertion
mode</a>.

</li></ol>

</dd><dt>A <a href=#labeled-list-start-token>labeled list start token</a>

<!--

In SuikaWiki3 implementation,

:a:
-b
:c:
-d

generates two dl elements and two ul elements.  According to this
specification, it MUST generate a dl element with two ul elements.

-->

</dt><dd>

<ol class=steps>

<li>If the <a href=#current-element>current
element</a>'s <a href=#concept-element-local-name title=concept-element-local-name>local
name</a> is <a href=#the-dialogue-element-in-the-suikawiki/0.9-namespace><code>dialogue</code></a>, pop the <a href=#current-element>current
element</a> off the <a href=#stack-of-open-elements>stack of open elements</a>.

</li><li>If the local name of the <a href=#current-element>current element</a> is
<a href=#dd><code>dd</code></a>, pop the element off the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>If the local name of the <a href=#current-element>current element</a> is
<em>not</em> <a href=#dl><code>dl</code></a>, create a <a href=#dl><code>dl</code></a> element in the
<a href=#html-namespace>HTML namespace</a>, append the element created to the
<a href=#current-element>current element</a>, and push the element created to the
<a href=#stack-of-open-elements>stack of open elements</a>.

</li><li>Create a <a href=#dt><code>dt</code></a> element in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>Switch to the "<a href=#in-paragraph>in paragraph</a>" <a href=#insertion-mode>insertion
mode</a>.

</li></ol>

</dd><dt>A <a href=#table-row-start-token>table row start token</a>

</dt><dd>

<ol class=steps>

<li>If the <a href=#current-element>current
element</a>'s <a href=#concept-element-local-name title=concept-element-local-name>local
name</a> is <a href=#the-dialogue-element-in-the-suikawiki/0.9-namespace><code>dialogue</code></a>, pop the <a href=#current-element>current
element</a> off the <a href=#stack-of-open-elements>stack of open elements</a>.

</li><li>Create a <a href=#table><code>table</code></a> element in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>Create a <a href=#tbody><code>tbody</code></a> element in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>Create a <a href=#tr><code>tr</code></a> element in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>Switch to the "<a href=#in-table-row>in table row</a>" <a href=#insertion-mode>insertion
mode</a>.

</li></ol>

</dd><dt>A <a href=#block-start-tag-token>block start tag token</a> whose <a href=#block-start-tag-tag-name title=block-start-tag-tag-name>tag name</a> is <a href=#pre><code>PRE</code></a>

</dt><dd>

<ol class=steps>

<li>If the <a href=#current-element>current
element</a>'s <a href=#concept-element-local-name title=concept-element-local-name>local
name</a> is <a href=#the-dialogue-element-in-the-suikawiki/0.9-namespace><code>dialogue</code></a>, pop the <a href=#current-element>current
element</a> off the <a href=#stack-of-open-elements>stack of open elements</a>.

</li><li>Create a <a href=#pre><code>pre</code></a> element in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>If
the <a href=#token>token</a>'s <a href=#block-start-tag-classes title=block-start-tag-classes>classes</a>
is not null, set the <a href=#the-class-attribute><code>class</code></a> <a href=#attribute>attribute</a> of the
element created to <a href=#block-start-tag-classes title=block-start-tag-classes>classes</a>.

</li><li>Switch to the "<a href=#in-paragraph>in paragraph</a>" <a href=#insertion-mode>insertion
mode</a>.

</li></ol>

</dd><dt>A <a href=#preformatted-start-token>preformatted start token</a>

</dt><dd>

<ol class=steps>

<li>If the <a href=#current-element>current
element</a>'s <a href=#concept-element-local-name title=concept-element-local-name>local
name</a> is <a href=#the-dialogue-element-in-the-suikawiki/0.9-namespace><code>dialogue</code></a>, pop the <a href=#current-element>current
element</a> off the <a href=#stack-of-open-elements>stack of open elements</a>.

</li><li>Create a <a href=#pre><code>pre</code></a> element in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>Switch to the "<a href=#in-paragraph>in paragraph</a>" <a href=#insertion-mode>insertion
mode</a>.

</li></ol>

</dd><dt>A <a href=#comment-paragraph-start-token>comment paragraph start token</a>

</dt><dd>

<ol class=steps>

<li>If the <a href=#current-element>current
element</a>'s <a href=#concept-element-local-name title=concept-element-local-name>local
name</a> is <a href=#the-dialogue-element-in-the-suikawiki/0.9-namespace><code>dialogue</code></a>, pop the <a href=#current-element>current
element</a> off the <a href=#stack-of-open-elements>stack of open elements</a>.

</li><li>Create a <a href=#the-comment-p-element-in-the-suikawiki/0.10-namespace><code>comment-p</code></a> element in the
<a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a>.


</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>Switch to the "<a href=#in-paragraph>in paragraph</a>" <a href=#insertion-mode>insertion
mode</a>.

</li></ol>

</dd><dt>A <a href=#editorial-note-start-token>editorial note start token</a>

</dt><dd>

<ol class=steps>

<li>If the <a href=#current-element>current
element</a>'s <a href=#concept-element-local-name title=concept-element-local-name>local
name</a> is <a href=#the-dialogue-element-in-the-suikawiki/0.9-namespace><code>dialogue</code></a>, pop the <a href=#current-element>current
element</a> off the <a href=#stack-of-open-elements>stack of open elements</a>.

</li><li>Create a <a href=#the-ed-element-in-the-suikawiki/0.10-namespace><code>ed</code></a> element in the <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>Switch to the "<a href=#in-paragraph>in paragraph</a>" <a href=#insertion-mode>insertion
mode</a>.

</li></ol>

</dd><dt>An <a href=#empty-line-token>empty line token</a>

</dt><dd>

<ol class=steps>

<li>If the <a href=#current-element>current
element</a>'s <a href=#concept-element-local-name title=concept-element-local-name>local
name</a> is <em>not</em> one
of <a href=#element-html-body><code title=element-html-body>body</code></a>,
<a href=#section><code>section</code></a>, <a href=#the-dialogue-element-in-the-suikawiki/0.9-namespace><code>dialogue</code></a>, and <a href=#block-elements>block
elements</a>, then pop the element off the <a href=#stack-of-open-elements>stack of open
elements</a> and follow this substep again.

</li></ol>

</dd><dt>A <a href=#form-token>form token</a>

</dt><dt>An <a href=#element-token>element token</a> whose <a href=#element-local-name title=element-local-name>local name</a> is <a href=#the-replace-element-in-the-suikawiki/0.9-namespace><code>replace</code></a>

</dt><dd>Process the token <a href=#using-the-rules-for>using the rules for</a> the "<a href=#in-paragraph>in
paragraph</a>" <a href=#insertion-mode>insertion mode</a>.

</dd><dt>An <a href=#end-of-file-token>end-of-file token</a>

</dt><dd>Now the <a href=#abnf-document><code>Document</code></a> has been constructed.  Abort
the <a href=#swml-text-serialization-parser title="SWML text serialization parser">parser</a>.

</dd><dt>Any other <a href=#block-start-tag-token>block start tag token</a>

</dt><dt>A <a href=#labeled-list-middle-token>labeled list middle token</a>, <a href=#heading-end-token>heading end
token</a>, <a href=#preformatted-end-token>preformatted end token</a>, <a href=#table-row-end-token>table row end
token</a>, <a href=#table-cell-start-token>table cell start token</a>, <a href=#table-cell-end-token>table cell
end token</a>, or <a href=#table-colspan-cell-token>table colspan cell token</a> <!-- they
should not appear in this insertion mode -->

</dt><dd>Ignore the token.

</dd><dt>Anything else

</dt><dd>

<ol class=steps>

<li>If the <a href=#current-element>current
element</a>'s <a href=#concept-element-local-name title=concept-element-local-name>local
name</a> is <a href=#the-dialogue-element-in-the-suikawiki/0.9-namespace><code>dialogue</code></a>, pop the <a href=#current-element>current
element</a> off the <a href=#stack-of-open-elements>stack of open elements</a>.

</li><li>If the <a href=#current-element>current
element</a>'s <a href=#concept-element-local-name title=concept-element-local-name>local
name</a> is <em>not</em> one
of <a href=#p><code>p</code></a>, <a href=#li><code>li</code></a>, <a href=#dd><code>dd</code></a>, <a href=#figcaption><code>figcaption</code></a>,
<a href=#the-comment-p-element-in-the-suikawiki/0.10-namespace><code>comment-p</code></a>, or <a href=#the-ed-element-in-the-suikawiki/0.10-namespace><code>ed</code></a>, or if the <a href=#current-element>current
element</a>'s <a href=#concept-element-local-name title=concept-element-local-name>local
name</a> is <a href=#figcaption><code>figcaption</code></a> or <a href=#the-speaker-element-in-the-suikawiki/0.9-namespace><code>speaker</code></a> and
the <a href=#current-element>current
element</a>'s <a href=#concept-element-children title=concept-element-children>children</a>
is not empty, run the following substeps:

<ol class=steps>

<li>Create a <a href=#p><code>p</code></a> element in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li></ol>

</li><li>Switch to the "<a href=#in-paragraph>in paragraph</a>" <a href=#insertion-mode>insertion
mode</a> and reprocess the <a href=#token>token</a>.

</li></ol>

</dd></li></ol></li></ol></dd></dl>

</section>

<section>
<h1 id=the-in-table-row-insertion-mode><span class=secno>4.5.2 </span>The "<a href=#in-table-row>in table row</a>" <a href=#insertion-mode>insertion mode</a></h1>

<p>In the "<dfn id=in-table-row>in table row</dfn>" <a href=#insertion-mode>insertion mode</a>, a
<a href=#token>token</a> <em class=rfc2119>MUST</em> be processed as
follows:

</p><dl class=switch>

<dt>A <a href=#table-cell-start-token>table cell start token</a>

</dt><dd>

<ol class=steps>

<li>Let <var title="">local name</var> be <a href=#th><code>th</code></a> if
the <a href=#table-cell-start-header title=table-cell-start-header>header</a> of
the <a href=#token>token</a> is true, or <a href=#td><code>td</code></a> otherwise.

</li><li>Create a <var title="">local name</var> element in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>Switch to the "<a href=#in-paragraph>in paragraph</a>" <a href=#insertion-mode>insertion
mode</a>.

</li></ol>

</dd><dt>A <a href=#table-colspan-cell-token>table colspan cell token</a>

</dt><dd>

<ol class=steps>

<li>If the local name of the node returned by the
<code>lastChild</code> <a href=#idl-attribute>IDL attribute</a> of the <a href=#current-element>current
element</a>, if any, is <a href=#td><code>td</code></a> or <a href=#th><code>th</code></a>,
increase the value of
<code>colspan</code> <a href=#idl-attribute>IDL attribute</a> of the node by one (1)
and abort these substeps.

</li><li>Create a <a href=#td><code>td</code></a> element in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li></ol>

</dd><dt>A <a href=#table-row-end-token>table row end token</a>

</dt><dd>If the local name of the <a href=#current-element>current element</a> is
<a href=#tr><code>tr</code></a>, pop the element off the <a href=#stack-of-open-elements>stack of open
elements</a>.

</dd><dt>A <a href=#table-row-start-token>table row start token</a>

</dt><dd>

<ol class=steps>

<li>Create a <a href=#tr><code>tr</code></a> element in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li></ol>

</dd><dt>Anything else

</dt><dd>Switch to the "<a href=#in-section>in section</a>" <a href=#insertion-mode>insertion
mode</a> and reprocess the <a href=#token>token</a>.

</dd></dl>

</section>

<section>
<h1 id=the-in-paragraph-insertion-mode><span class=secno>4.5.3 </span>The "<a href=#in-paragraph>in paragraph</a>" <a href=#insertion-mode>insertion mode</a></h1>

<p>In the "<dfn id=in-paragraph>in paragraph</dfn>" <a href=#insertion-mode>insertion mode</a>, a
<a href=#token>token</a> <em class=rfc2119>MUST</em> be processed as
follows:

</p><dl class=switch>

<dt>A <a href=#character-token>character token</a>

</dt><dd><a href=#append-a-character title="append a character">Append the character</a> in
<a href=#character-data title=character-data>data</a> of the <a href=#token>token</a> to
the <a href=#current-element>current element</a>.

</dd><dt>An <a href=#inline-start-tag-token>inline start tag token</a> whose <a href=#inline-start-tag-tag-name title=inline-start-tag-tag-name>tag name</a> is null

</dt><dd>

<ol class=steps>

<li>Create an <a href=#the-anchor-element-in-the-suikawiki/0.9-namespace>anchor</a> element in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li></ol>

</dd><dt>Any other <a href=#inline-start-tag-token>inline start tag token</a>

</dt><dd>

<ol class=steps>

<li>Create an element.  The namespace and local name of the element is
determined according to the <a href=#inline-start-tag-tag-name title=inline-start-tag-tag-name>tag
name</a> of the <a href=#inline-start-tag-token>inline start tag token</a> as shown in the
following table:

<table>

<thead>

<tr>

<th scope=col><a href=#inline-start-tag-tag-name title=inline-start-tag-tag-name>Tag name</a>

</th><th scope=col>Namespace

</th><th scope=col>Local name

</th></tr></thead><tbody>

<tr>
<th><a href=#concept-aa><code title=concept-AA>AA</code></a>
</th><td>The <a href=#aa-namespace>AA namespace</a>
</td><td><a href=#aa><code>aa</code></a>
<!-- SuikaWiki/0.10 -->

</td></tr><tr>
<th><a href=#concept-abbr><code title=concept-ABBR>ABBR</code></a>
</th><td>The <a href=#html-namespace>HTML namespace</a>
</td><td><a href=#abbr><code>abbr</code></a>

</td></tr><tr>
<th><a href=#concept-asis><code title=concept-ASIS>ASIS</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-asis-element-in-the-suikawiki/0.9-namespace><code>asis</code></a>

</td></tr><tr>
<th><a href=#concept-b><code title=concept-B>B</code></a>
</th><td>The <a href=#html-namespace>HTML namespace</a>
</td><td><a href=#b><code>b</code></a>

</td></tr><tr>
<th><a href=#concept-cite><code title=concept-CITE>CITE</code></a>
</th><td>The <a href=#html-namespace>HTML namespace</a>
</td><td><a href=#cite><code>cite</code></a>
<!-- SuikaWiki/0.10 -->

</td></tr><tr>
<th><a href=#concept-code><code title=concept-CODE>CODE</code></a>
</th><td>The <a href=#html-namespace>HTML namespace</a>
</td><td><a href=#code><code>code</code></a>

</td></tr><tr>
<th><a href=#concept-csection><code title=concept-CSECTION>CSECTION</code></a>
</th><td>The <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a>
</td><td><a href=#the-csection-element-in-the-suikawiki/0.10-namespace><code>csection</code></a>
<!-- SuikaWiki/0.10 -->

</td></tr><tr>
<th><a href=#concept-del><code title=concept-DEL>DEL</code></a>
</th><td>The <a href=#html-namespace>HTML namespace</a>
</td><td><a href=#del><code>del</code></a>

</td></tr><tr>
<th><a href=#concept-dfn><code title=concept-DFN>DFN</code></a>
</th><td>The <a href=#html-namespace>HTML namespace</a>
</td><td><a href=#dfn><code>dfn</code></a>

</td></tr><tr>
<th><a href=#concept-dotabove><code title=concept-DOTABOVE>DOTABOVE</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-dotabove-element-in-the-suikawiki/0.9-namespace><code>dotabove</code></a>

</td></tr><tr>
<th><a href=#concept-emph><code title=concept-EMPH>EMPH</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-emph-element-in-the-suikawiki/0.9-namespace><code>emph</code></a>

</td></tr><tr>
<th><a href=#concept-f><code title=concept-F>F</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-f-element-in-the-suikawiki/0.9-namespace><code>f</code></a>

</td></tr><tr>
<th><a href=#concept-fenced><code title=concept-FENCED>FENCED</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-fenced-element-in-the-suikawiki/0.9-namespace><code>fenced</code></a>

</td></tr><tr>
<th><a href=#concept-frac><code title=concept-FRAC>FRAC</code></a>
</th><td>The <a href=#mathml-namespace>MathML namespace</a>
</td><td><a href=#mfrac><code>mfrac</code></a>

</td></tr><tr>
<th><a href=#concept-i><code title=concept-I>I</code></a>
</th><td>The <a href=#html-namespace>HTML namespace</a>
</td><td><a href=#i><code>i</code></a>

</td></tr><tr>
<th><a href=#concept-ins><code title=concept-INS>INS</code></a>
</th><td>The <a href=#html-namespace>HTML namespace</a>
</td><td><a href=#ins><code>ins</code></a>

</td></tr><tr>
<th><a href=#concept-kbd><code title=concept-KBD>KBD</code></a>
</th><td>The <a href=#html-namespace>HTML namespace</a>
</td><td><a href=#kbd><code>kbd</code></a>

</td></tr><tr>
<th><a href=#concept-key><code title=concept-KEY>KEY</code></a>
</th><td>The <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a>
</td><td><a href=#the-key-element-in-the-suikawiki/0.10-namespace><code>key</code></a>

</td></tr><tr>
<th><a href=#concept-lat><code title=concept-LAT>LAT</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-lat-element-in-the-suikawiki/0.9-namespace><code>lat</code></a>

</td></tr><tr>
<th><a href=#concept-lines><code title=concept-LINES>LINES</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-lines-element-in-the-suikawiki/0.9-namespace><code>lines</code></a>

</td></tr><tr>
<th><a href=#concept-lon><code title=concept-LON>LON</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-lon-element-in-the-suikawiki/0.9-namespace><code>lon</code></a>

</td></tr><tr>
<th><a href=#concept-may><code title=concept-MAY>MAY</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-may-element-in-the-suikawiki/0.9-namespace><code>MAY</code></a>

</td></tr><tr>
<th><a href=#concept-must><code title=concept-MUST>MUST</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-must-element-in-the-suikawiki/0.9-namespace><code>MUST</code></a>

</td></tr><tr>
<th><a href=#concept-n><code title=concept-N>N</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-n-element-in-the-suikawiki/0.9-namespace><code>n</code></a>

</td></tr><tr>
<th><a href=#concept-okuri><code title=concept-OKURI>OKURI</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-okuri-element-in-the-suikawiki/0.9-namespace><code>okuri</code></a>

</td></tr><tr>
<th><a href=#concept-q><code title=concept-Q>Q</code></a>
</th><td>The <a href=#html-namespace>HTML namespace</a>
</td><td><a href=#q><code>q</code></a>
<!-- SuikaWiki/0.10 -->

</td></tr><tr>
<th><a href=#concept-qn><code title=concept-QN>QN</code></a>
</th><td>The <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a>
</td><td><a href=#the-qn-element-in-the-suikawiki/0.10-namespace><code>qn</code></a>
<!-- SuikaWiki/0.10 -->

</td></tr><tr>
<th><a href=#concept-root><code title=concept-ROOT>ROOT</code></a>
</th><td>The <a href=#mathml-namespace>MathML namespace</a>
</td><td><a href=#mroot><code>mroot</code></a>

</td></tr><tr>
<th><a href=#concept-ruby><code title=concept-RUBY>RUBY</code></a>
</th><td>The <a href=#html-namespace>HTML namespace</a>
</td><td><a href=#ruby><code>ruby</code></a>

</td></tr><tr>
<th><a href=#concept-rubyb><code title=concept-RUBYB>RUBYB</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-rubyb-element-in-the-suikawiki/0.9-namespace><code>rubyb</code></a>

</td></tr><tr>
<th><a href=#concept-samp><code title=concept-SAMP>SAMP</code></a>
</th><td>The <a href=#html-namespace>HTML namespace</a>
</td><td><a href=#samp><code>samp</code></a>

</td></tr><tr>
<th><a href=#concept-should><code title=concept-SHOULD>SHOULD</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-should-element-in-the-suikawiki/0.9-namespace><code>SHOULD</code></a>

</td></tr><tr>
<th><a href=#concept-smallcaps><code title=concept-SMALLCAPS>SMALLCAPS</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-smallcaps-element-in-the-suikawiki/0.9-namespace><code>smallcaps</code></a>

</td></tr><tr>
<th><a href=#concept-snip><code title=concept-SNIP>SNIP</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-snip-element-in-the-suikawiki/0.9-namespace><code>snip</code></a>

</td></tr><tr>
<th><a href=#concept-span><code title=concept-SPAN>SPAN</code></a>
</th><td>The <a href=#html-namespace>HTML namespace</a>
</td><td><a href=#span><code>span</code></a>

</td></tr><tr>
<th><a href=#concept-sqrt><code title=concept-SQRT>SQRT</code></a>
</th><td>The <a href=#mathml-namespace>MathML namespace</a>
</td><td><a href=#msqrt><code>msqrt</code></a>

</td></tr><tr>
<th><a href=#concept-src><code title=concept-SRC>SRC</code></a>
</th><td>The <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a>
</td><td><a href=#the-src-element-in-the-suikawiki/0.10-namespace><code>src</code></a>

</td></tr><tr>
<th><a href=#concept-sub><code title=concept-SUB>SUB</code></a>
</th><td>The <a href=#html-namespace>HTML namespace</a>
</td><td><a href=#sub><code>sub</code></a>

</td></tr><tr>
<th><a href=#concept-subsup><code title=concept-SUBSUP>SUBSUP</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-subsup-element-in-the-suikawiki/0.9-namespace><code>subsup</code></a>

</td></tr><tr>
<th><a href=#concept-sup><code title=concept-SUP>SUP</code></a>
</th><td>The <a href=#html-namespace>HTML namespace</a>
</td><td><a href=#sup><code>sup</code></a>

</td></tr><tr>
<th><a href=#concept-time><code title=concept-TIME>TIME</code></a>
</th><td>The <a href=#html-namespace>HTML namespace</a>
</td><td><a href=#time><code>time</code></a>
<!-- SuikaWiki/0.10 (undocumented, not implemented in SuikaWiki3) -->

</td></tr><tr>
<th><a href=#concept-tz><code title=concept-TZ>TZ</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-tz-element-in-the-suikawiki/0.9-namespace><code>tz</code></a>

</td></tr><tr>
<th><a href=#concept-u><code title=concept-U>U</code></a>
</th><td>The <a href=#html-namespace>HTML namespace</a>
</td><td><a href=#u><code>u</code></a>

</td></tr><tr>
<th><a href=#concept-under><code title=concept-UNDER>UNDER</code></a>
</th><td>The <a href=#mathml-namespace>MathML namespace</a>
</td><td><a href=#munder><code>munder</code></a>

</td></tr><tr>
<th><a href=#concept-underover><code title=concept-UNDEROVER>UNDEROVER</code></a>
</th><td>The <a href=#mathml-namespace>MathML namespace</a>
</td><td><a href=#munderover><code>munderover</code></a>

</td></tr><tr>
<th><a href=#concept-var><code title=concept-VAR>VAR</code></a>
</th><td>The <a href=#html-namespace>HTML namespace</a>
</td><td><a href=#var><code>var</code></a>

</td></tr><tr>
<th><a href=#concept-vector><code title=concept-VECTOR>VECTOR</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-vector-element-in-the-suikawiki/0.9-namespace><code>vector</code></a>

</td></tr><tr>
<th><a href=#concept-weak><code title=concept-WEAK>WEAK</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-weak-element-in-the-suikawiki/0.9-namespace><code>weak</code></a>

</td></tr><tr>
<th><a href=#concept-emph><code title=concept-EMPH>YOKO</code></a>
</th><td>The <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
</td><td><a href=#the-yoko-element-in-the-suikawiki/0.9-namespace><code>yoko</code></a>

</td></tr><tr>
<th>Anything else
</th><td>The <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a>
</td><td><a href=#uppercase-elements title="uppercase elements">Same as <span title=inline-start-tag-tag-name>tag name</span></a>
<!-- SWML 1.0 new -->

</td></tr></tbody></table>

</li><li>If
the <a href=#token>token</a>'s <a href=#inline-start-tag-classes title=inline-start-tag-classes>classes</a>
is not null, set the <a href=#the-class-attribute><code>class</code></a> <a href=#attribute>attribute</a> of the
element created
to <a href=#inline-start-tag-classes title=inline-start-tag-classes>classes</a>.

</li><li>If
the <a href=#token>token</a>'s <a href=#inline-start-tag-language title=inline-start-tag-language>language</a>
is not null, <a href=#set-an-attribute-value title="set an attribute value">set</a>
the <a href=#the-xml:lang-attribute><code title=xml:lang>lang</code></a> <a href=#attribute>attribute</a> in
the <a href=#xml-namespace>XML namespace</a> of the element created
to <a href=#inline-start-tag-language title=inline-start-tag-language>language</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>Switch
by <a href=#token>token</a>'s <a href=#inline-start-tag-tag-name title=inline-start-tag-tag-name>tag
name</a>:

  <dl class=switch>

  <div>
  <dt><code>FRAC</code>, <code>ROOT</code>, <code>SQRT</code>,
  <code>UNDER</code>, or <code>UNDEROVER</code>

  </dt><dd>
  <ol>

  <li>Create an <a href=#mtext><code>mtext</code></a> element in the <a href=#mathml-namespace>MathML
  namespace</a>.

  </li><li>Append the element created to the <a href=#current-element>current element</a>.

  </li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
  elements</a>.

  </li></ol>
  </dd></div>

  <div>
  <dt><a href=#the-lines-element-in-the-suikawiki/0.9-namespace><code>LINES</code></a>

  </dt><dd>
  <ol>

  <li>Create a <a href=#the-line-element-in-the-suikawiki/0.9-namespace><code>line</code></a> element in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9
  namespace</a>.

  </li><li>Append the element created to the <a href=#current-element>current element</a>.

  </li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
  elements</a>.

  </li></ol>
  </dd></div>

  <div>
  <dt><a href=#the-subsup-element-in-the-suikawiki/0.9-namespace><code>SUBSUP</code></a>

  </dt><dd>
  <ol>

  <li>Create a <a href=#the-subscript-element-in-the-suikawiki/0.9-namespace><code>subscript</code></a> element in
  the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>.

  </li><li>Append the element created to the <a href=#current-element>current element</a>.

  </li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
  elements</a>.

  </li></ol>
  </dd></div>

  <div>
  <dt><a href=#the-fenced-element-in-the-suikawiki/0.9-namespace><code>FENCED</code></a>

  </dt><dd>
  <ol>

  <li>Create an <a href=#the-openfence-element-in-the-suikawiki/0.9-namespace><code>openfence</code></a> element in
  the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>.

  </li><li>Append the element created to the <a href=#current-element>current element</a>.

  </li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
  elements</a>.

  </li></ol>
  </dd></div>

  <div>
  <dt><a href=#the-okuri-element-in-the-suikawiki/0.9-namespace><code>OKURI</code></a>

  </dt><dd>
  <ol>

  <li>Create a <a href=#rt><code>rt</code></a> element in the <a href=#html-namespace>HTML
  namespace</a>.

  </li><li>Append the element created to the <a href=#current-element>current element</a>.

  </li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
  elements</a>.

  </li></ol>
  </dd></div>

  </dl>

</li></ol>

</dd><dt>A <a href=#inline-middle-tag-token>inline middle tag token</a>

</dt><dd>

<ol class=steps>

<li>Let <var>local name</var> be <a href=#the-title-element-in-the-suikawiki/0.10-namespace><code>title</code></a>.

</li><li>Let <var>namespace</var> be the <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10
namespace</a>.

</li><li>Switch by the <a href=#element-local-name title=element-local-name>local name</a> of
the <a href=#current-element>current element</a>:

  <dl class=switch>

  <div>
  <dt><a href=#rt><code>rt</code></a>

  </dt><dd>
    <ol>
    <li>Set <var>local name</var> to <a href=#rt><code>rt</code></a>.
    </li><li>Set <var>namespace</var> to the <a href=#html-namespace>HTML namespace</a>.
    </li><li>Pop the <a href=#current-element>current element</a> off the <a href=#stack-of-open-elements>stack of open
    elements</a>.
    </li></ol>
  </dd></div>

  <div>
  <dt><a href=#the-title-element-in-the-suikawiki/0.10-namespace><code>title</code></a>, <a href=#the-nsuri-element-in-the-suikawiki/0.10-namespace><code>nsuri</code></a>, <a href=#the-tz-element-in-the-suikawiki/0.9-namespace><code>tz</code></a>, <a href=#the-n-element-in-the-suikawiki/0.9-namespace><code>n</code></a>,
  <a href=#the-lat-element-in-the-suikawiki/0.9-namespace><code>lat</code></a>, <a href=#the-lon-element-in-the-suikawiki/0.9-namespace><code>lon</code></a>, <a href=#the-closefence-element-in-the-suikawiki/0.9-namespace><code>closefence</code></a>,
  or <a href=#the-superscript-element-in-the-suikawiki/0.9-namespace><code>superscript</code></a>

  </dt><dd>
    <ol>
    <li>Set <var>local name</var> to <a href=#the-attrvalue-element-in-the-suikawiki/0.10-namespace><code>attrvalue</code></a>.
    </li><li>Set <var>namespace</var> to the <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a>.
    </li><li>Pop the <a href=#current-element>current element</a> off the <a href=#stack-of-open-elements>stack of
    open elements</a>.
    </li></ol>
  </dd></div>

  <div>
  <dt><a href=#the-qn-element-in-the-suikawiki/0.10-namespace><code>qn</code></a>
  </dt><dd>
    <ol>
    <li>Set <var title="">local name</var> to <a href=#the-nsuri-element-in-the-suikawiki/0.10-namespace><code>nsuri</code></a>.
    </li><li>Set <var>namespace</var> to the <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a>.
    </li></ol>
  </dd></div>

  <div>
  <dt><a href=#ruby><code>ruby</code></a> or <a href=#the-rubyb-element-in-the-suikawiki/0.9-namespace><code>rubyb</code></a>
  </dt><dd>
    <ol>
    <li>Set <var title="">local name</var> to <a href=#rt><code>rt</code></a>.
    </li><li>Set <var title="">namespace</var> to the <a href=#html-namespace>HTML namespace</a>.
    </li></ol>
  </dd></div>

  <div>
  <dt><a href=#mtext><code>mtext</code></a>
  </dt><dd>
    <ol>
    <li>Set <var title="">local name</var> to <a href=#mtext><code>mtext</code></a>.
    </li><li>Set <var>namespace</var> to the <a href=#mathml-namespace>MathML namespace</a>.
    </li><li>Pop the <a href=#current-element>current element</a> off the <a href=#stack-of-open-elements>stack of open
    elements</a>.
    </li></ol>
  </dd></div>

  <div>
  <dt><a href=#the-openfence-element-in-the-suikawiki/0.9-namespace><code>openfence</code></a>
  </dt><dd>
    <ol>
    <li>Set <var title="">local name</var> to <a href=#the-fencedtext-element-in-the-suikawiki/0.9-namespace><code>fencedtext</code></a>.
    </li><li>Set <var>namespace</var> to the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>.
    </li><li>Pop the <a href=#current-element>current element</a> off the <a href=#stack-of-open-elements>stack of open
    elements</a>.
    </li></ol>
  </dd></div>

  <div>
  <dt><a href=#the-fencedtext-element-in-the-suikawiki/0.9-namespace><code>fencedtext</code></a>
  </dt><dd>
    <ol>
    <li>Set <var title="">local name</var> to <a href=#the-closefence-element-in-the-suikawiki/0.9-namespace><code>closefence</code></a>.
    </li><li>Set <var>namespace</var> to the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>.
    </li><li>Pop the <a href=#current-element>current element</a> off the <a href=#stack-of-open-elements>stack of open
    elements</a>.
    </li></ol>
  </dd></div>

  <div>
  <dt><a href=#the-subscript-element-in-the-suikawiki/0.9-namespace><code>subscript</code></a>
  </dt><dd>
    <ol>
    <li>Set <var title="">local name</var> to <a href=#the-superscript-element-in-the-suikawiki/0.9-namespace><code>superscript</code></a>.
    </li><li>Set <var>namespace</var> to the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>.
    </li><li>Pop the <a href=#current-element>current element</a> off the <a href=#stack-of-open-elements>stack of open
    elements</a>.
    </li></ol>
  </dd></div>

  <div>
  <dt><a href=#the-line-element-in-the-suikawiki/0.9-namespace><code>line</code></a>
  </dt><dd>
    <ol>
    <li>Set <var title="">local name</var> to <a href=#the-line-element-in-the-suikawiki/0.9-namespace><code>line</code></a>.
    </li><li>Set <var>namespace</var> to the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>.
    </li><li>Pop the <a href=#current-element>current element</a> off the <a href=#stack-of-open-elements>stack of open
    elements</a>.
    </li></ol>
  </dd></div>

  </dl>

</li><li>Create an element whose <a href=#element-local-name title=element-local-name>local
name</a> <var>local name</var> in the
<var>namespace</var>.

</li><li>If
the <a href=#token>token</a>'s <a href=#inline-middle-tag-language title=inline-middle-tag-language>language</a>
is not null, <span tilte="set an attribute value">set</span>
the <a href=#the-xml:lang-attribute><code title=xml:lang>lang</code></a> <a href=#attribute>attribute</a> in
the <a href=#xml-namespace>XML namespace</a> of the element created
to <a href=#inline-middle-tag-language title=inline-middle-tag-language>language</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li></ol>

</dd><dt>A <a href=#inline-end-tag-token>inline end tag token</a>

</dt><dd>

<ol class=steps>

<li>If the local name of the <a href=#current-element>current element</a> is one of
<a href=#rt><code>rt</code></a>, <a href=#the-title-element-in-the-suikawiki/0.10-namespace><code>title</code></a>, <a href=#the-nsuri-element-in-the-suikawiki/0.10-namespace><code>nsuri</code></a>, <a href=#mtext><code>mtext</code></a>,
<a href=#the-line-element-in-the-suikawiki/0.9-namespace><code>line</code></a>, <a href=#the-subscript-element-in-the-suikawiki/0.9-namespace><code>subscript</code></a>, <a href=#the-superscript-element-in-the-suikawiki/0.9-namespace><code>superscript</code></a>,
<a href=#the-fencedtext-element-in-the-suikawiki/0.9-namespace><code>fencedtext</code></a>, <a href=#the-openfence-element-in-the-suikawiki/0.9-namespace><code>openfence</code></a>, <a href=#the-closefence-element-in-the-suikawiki/0.9-namespace><code>closefence</code></a>,
or <a href=#the-attrvalue-element-in-the-suikawiki/0.10-namespace><code>attrvalue</code></a>, pop the element off the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>If the <a href=#current-element>current element</a> is one of <a href=#structural-elements>structural
elements</a>, or if the local name of the <a href=#current-element>current
element</a> is <a href=#strong><code>strong</code></a> or <a href=#em><code>em</code></a>, run the
following substeps:

<ol class=steps>

<li>If both <a href=#inline-end-tag-res-scheme-attribute title=inline-end-tag-res-scheme-attribute>resScheme
attribute</a> and <a href=#inline-end-tag-anchor-attribute title=inline-end-tag-anchor-attribute>anchor attribute</a> of the
<a href=#token>token</a> are null, <a href=#append-a-character title="append a character">append
characters</a> <code>]]</code> to the <a href=#current-element>current element</a>,
push the <a href=#current-element>current element</a> to the <a href=#stack-of-open-elements>stack of open
elements</a>, and abort these substeps.

<div class="note memo">

<p>As a result, the bottommost and second bottommost entries becomes
equal, but one of them is popped from the <a href=#stack-of-open-elements>stack of open
elements</a> soon.

</p></div>

</li><li>If <a href=#inline-end-tag-res-scheme-attribute title=inline-end-tag-res-scheme-attribute>resScheme
attribute</a> of the <a href=#token>token</a> is <em>not</em> null,
create an <a href=#the-anchor-external-element-in-the-suikawiki/0.9-namespace><code>anchor-external</code></a> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>.

</li><li>Otherwise, create a <a href=#the-anchor-internal-element-in-the-suikawiki/0.9-namespace><code>anchor-internal</code></a> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Set the <code>textContent</code> <a href=#idl-attribute>IDL attribute</a> of the
element created to <code>]]</code>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li></ol>

</li><li>If <a href=#inline-end-tag-anchor-attribute title=inline-end-tag-anchor-attribute>anchor
attribute</a> of the <a href=#token>token</a> is <em>not</em> null, set
the <a href=#the-anchor-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-anchor>anchor</code></a> <a href=#content-attribute>content
attribute</a> in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> of the
<a href=#current-element>current element</a> to <a href=#inline-end-tag-anchor-attribute title=inline-end-tag-anchor-attribute>anchor attribute</a> of the
<a href=#token>token</a>.

</li><li>If <a href=#inline-end-tag-res-scheme-attribute title=inline-end-tag-res-scheme-attribute>resScheme
attribute</a> of the <a href=#token>token</a> is <em>not</em> null, set
the <a href=#the-resscheme-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-res-scheme>resScheme</code></a> <a href=#content-attribute>content
attribute</a> in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> of the
<a href=#current-element>current element</a> to <a href=#inline-end-tag-res-scheme-attribute title=inline-end-tag-res-scheme-attribute>resScheme attribute</a>
of the <a href=#token>token</a>.

</li><li>If <a href=#inline-end-tag-res-parameter-attribute title=inline-end-tag-res-parameter-attribute>resParameter
attribute</a> of the <a href=#token>token</a> is <em>not</em> null, set
the <a href=#the-resparameter-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-res-parameter>resParameter</code></a>
<a href=#content-attribute>content attribute</a> in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9
namespace</a> of the <a href=#current-element>current element</a> to <a href=#inline-end-tag-res-parameter-attribute title=inline-end-tag-res-parameter-attribute>resParameter
attribute</a> of the <a href=#token>token</a>.

</li><li>Pop the <a href=#current-element>current element</a> off the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li></ol>

</dd><dt>A <a href=#strong-token>strong token</a>

</dt><dd>

<ol class=steps>

<li>If the local name of the <a href=#current-element>current element</a> is
<a href=#strong><code>strong</code></a>, pop the element off the <a href=#stack-of-open-elements>stack of open
elements</a> and abort these substeps.

</li><li>Create a <a href=#strong><code>strong</code></a> element in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li></ol>

</dd><dt>An <a href=#emphasis-token>emphasis token</a>

</dt><dd>

<ol class=steps>

<li>If the local name of the <a href=#current-element>current element</a> is
<a href=#em><code>em</code></a>, pop the element off the <a href=#stack-of-open-elements>stack of open
elements</a> and abort these substeps.

</li><li>Create an <a href=#em><code>em</code></a> element in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li></ol>

</dd><dt>A <a href=#form-token>form token</a> whose <a href=#form-name title=form-name>name</a>
is <a href=#the-form-element-in-the-suikawiki/0.9-namespace><code>form</code></a>

</dt><dd>

<ol class=steps>

<li>Create a <a href=#the-form-element-in-the-suikawiki/0.9-namespace><code>form</code></a> element in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9
namespace</a>.

</li><li>If <a href=#form-id title=form-id>id</a> of the <a href=#form-token>form token</a>
is <em>not</em> null, <a href=#set-an-attribute-value title="set an attribute value">set</a>
the <a href=#the-id-attribute><code>id</code></a> <a href=#attribute>attribute</a> of the element created
to <a href=#form-id title=form-id>id</a> of the <a href=#form-token>form token</a>.

</li><li>Set the <a href=#attr-sw-form-input><code title=attr-sw-form-input>input</code></a> <a href=#content-attribute>content
attribute</a> of the element created to the first item in <a href=#form-parameters title=form-parameters>parameters</a> of the <a href=#form-token>form
token</a>, if any, or the empty string otherwise.

</li><li>Set the <a href=#attr-sw-form-template><code title=attr-sw-form-template>template</code></a>
<a href=#content-attribute>content attribute</a> of the element created to the second
item in <a href=#form-parameters title=form-parameters>parameters</a> of the
<a href=#form-token>form token</a>, if any, or the empty string otherwise.

</li><li>Set the <a href=#attr-sw-form-option><code title=attr-sw-form-option>option</code></a>
<a href=#content-attribute>content attribute</a> of the element created to the third
item in <a href=#form-parameters title=form-parameters>parameters</a> of the
<a href=#form-token>form token</a>, if any, or the empty string otherwise.

</li><li>If the <a href=#form-parameters title=form-parameters>parameters</a> contains four
or more items, set the <a href=#attr-sw-form-parameter><code title=attr-sw-form-parameter>parameter</code></a> <a href=#content-attribute>content
attribute</a> of the element created to the concatenation of items
in <a href=#form-parameters title=form-parameters>parameters</a>, separated by a
<code>:</code> character, in the same order.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li></ol>

</dd><dt>Any other <a href=#form-token>form token</a>

</dt><dd>

<ol class=steps>

<li>Create a <a href=#the-form-element-in-the-suikawiki/0.9-namespace><code>form</code></a> element in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9
namespace</a>.

</li><li>Set the <a href=#attr-sw-form-ref><code title=attr-sw-form-ref>ref</code></a> <a href=#content-attribute>content
attribute</a> of the element created to <a href=#form-name title=form-name>name</a> of the <a href=#form-token>form token</a>.

</li><li>If the <a href=#form-id><code title=form-id>id</code></a> of the <a href=#form-token>form
token</a> is <em>not</em> null, <a href=#set-an-attribute-value title="set an attribute
value">set</a> the <a href=#the-id-attribute><code>id</code></a> <a href=#attribute>attribute</a> of the
element created to <a href=#form-id title=form-id>id</a> of the <a href=#form-token>form
token</a>.

</li><li>If <a href=#form-parameters title=form-parameters>parameters</a> of <a href=#form-token>form
token</a> is not empty, set the <a href=#attr-sw-form-parameter><code title=attr-sw-form-parameter>parameter</code></a> <a href=#content-attribute>content
attribute</a> of the element created to the concatenation of items
in <a href=#form-parameters title=form-parameters>parameters</a>, separated by a
<code>:</code> character, in the same order.  The result value might
be the empty string.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li></ol>

</dd><dt>An <a href=#element-token>element token</a>

</dt><dd>

<ol class=steps>

<li>Create an element whose local name is <a href=#element-local-name title=element-local-name>local name</a> of the <a href=#element-token>element
token</a> and namespace is <a href=#element-namespace title=element-namespace>namespace</a> of the <a href=#element-token>element
token</a>.

</li><li>If <a href=#element-anchor-attribute title=element-anchor-attribute>anchor attribute</a> of
the <a href=#element-token>element token</a> is <em>not</em> null, set the <a href=#the-anchor-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-anchor>anchor</code></a> <a href=#content-attribute>content attribute</a> in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> of the element created to
<a href=#element-anchor-attribute title=element-anchor-attribute>anchor attribute</a> of the
<a href=#element-token>element token</a>.

</li><li>If <a href=#element-by-attribute title=element-by-attribute>by attribute</a> of the
<a href=#element-token>element token</a> is <em>not</em> null, set the <a href=#attr-sw-replace-by><code title=attr-sw-replace-by>by</code></a> <a href=#content-attribute>content attribute</a> of
the element created to <a href=#element-by-attribute title=element-by-attribute>by
attribute</a> of the <a href=#element-token>element token</a>.

</li><li>If <a href=#element-res-scheme-attribute title=element-res-scheme-attribute>resScheme
attribute</a> of the <a href=#element-token>element token</a> is <em>not</em>
null, set the <a href=#the-resscheme-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-res-scheme>resScheme</code></a>
<a href=#content-attribute>content attribute</a> in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9
namespace</a> of the element created to <a href=#element-res-scheme-attribute title=element-res-scheme-attribute>resScheme attribute</a> of the
<a href=#element-token>element token</a>.

</li><li>If <a href=#element-res-parameter-attribute title=element-res-parameter-attribute>resParameter
attribute</a> of the <a href=#element-token>element token</a> is <em>not</em>
null, set the <a href=#the-resparameter-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-res-parameter>resParameter</code></a>
<a href=#content-attribute>content attribute</a> in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9
namespace</a> of the element created to <a href=#element-res-parameter-attribute title=element-res-parameter-attribute>resParameter attribute</a> of
the <a href=#element-token>element token</a>.

</li><li>If <a href=#element-content title=element-content>content</a> of the <a href=#element-token>element
token</a> is <em>not</em> null, set the <code>textContent</code>
<a href=#idl-attribute>IDL attribute</a> of the element created to <a href=#element-content title=element-content>content</a> of the <a href=#element-token>element
token</a>.

</li><li>Append the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li></ol>

</dd><dt>A <a href=#labeled-list-middle-token>labeled list middle token</a>

</dt><dd>

<ol class=steps>

<li>If the <a href=#current-element>current element</a> is <em>not</em> one of
<a href=#structural-elements>structural elements</a>, pop the element off the <a href=#stack-of-open-elements>stack
of open elements</a> and follow this substep again.

</li><li>If the local name of the <a href=#current-element>current element</a> is
<a href=#dt><code>dt</code></a>, pop the element off the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>Create a <a href=#dd><code>dd</code></a> element in the <a href=#html-namespace>HTML
namespace</a>.

</li><li>Append the element created to the <a href=#current-element>current element</a>.

</li><li>Push the element created to the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li></ol>

</dd><dt>A <a href=#heading-end-token>heading end token</a>

</dt><dd>

<ol class=steps>

<li>If the <a href=#current-element>current element</a> is <em>not</em> one of
<a href=#structural-elements>structural elements</a>, pop the element off the <a href=#stack-of-open-elements>stack
of open elements</a> and follow this substep again.

</li><li>If the local name of the <a href=#current-element>current element</a> is
<a href=#h1><code>h1</code></a>, pop the element off the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>Switch to the "<a href=#in-section>in section</a>" <a href=#insertion-mode>insertion
mode</a>.

</li></ol>

</dd><dt>A <a href=#table-cell-end-token>table cell end token</a>

</dt><dd>

<ol class=steps>

<li>If the <a href=#current-element>current element</a> is <em>not</em> one of
<a href=#structural-elements>structural elements</a>, pop the element off the <a href=#stack-of-open-elements>stack
of open elements</a> and follow this substep again.

</li><li>If the local name of the <a href=#current-element>current element</a> is
<a href=#td><code>td</code></a> or <a href=#th><code>th</code></a>, pop the element off
the <a href=#stack-of-open-elements>stack of open elements</a>.

</li><li>Switch to the "<a href=#in-table-row>in table row</a>" <a href=#insertion-mode>insertion
mode</a>.

</li></ol>

</dd><dt>A <a href=#block-end-tag-token>block end tag token</a> whose <a href=#block-end-tag-tag-name title=block-end-tag-tag-name>tag name</a> is <a href=#pre><code>PRE</code></a>

</dt><dt>A <a href=#preformatted-end-token>preformatted end token</a>

</dt><dd>

<ol class=steps>

<li>If the <a href=#current-element>current element</a> is <em>not</em> one of
<a href=#structural-elements>structural elements</a>, pop the element off the <a href=#stack-of-open-elements>stack
of open elements</a> and follow this substep again.

</li><li>If the local name of the <a href=#current-element>current element</a> is
<a href=#pre><code>pre</code></a>, pop the element off the <a href=#stack-of-open-elements>stack of open
elements</a>.

</li><li>Switch to the "<a href=#in-section>in section</a>" <a href=#insertion-mode>insertion
mode</a>.

</li></ol>

</dd><dt>Anything else

</dt><dd>

<ol class=steps>

<li>If the <a href=#current-element>current element</a> is <em>not</em> one of
<a href=#structural-elements>structural elements</a>, pop the element off the <a href=#stack-of-open-elements>stack
of open elements</a> and follow this substep again.

</li><li>Switch to the "<a href=#in-section>in section</a>" <a href=#insertion-mode>insertion
mode</a> and reprocess the <a href=#token>token</a>.

</li></ol>

</dd></dl>

</section>

</section>

</section>

<section>
<h1 id=serializing-swml-text-serialization-documents><span class=secno>5 </span>Serializing <a href=#the-swml-text-serialization>SWML text serialization</a> documents</h1>

<p class=XXX>...
</p></section>

<section>
<h1 id=element-definitions-for-the-swml-text-serialization><span class=secno>6 </span>Element definitions for the SWML text serialization</h1>

<p>The following <dfn id=block-element-table>Block Element Table</dfn> is referenced from the
parser:

  </p><table>

  <thead>

  <tr>
    <th><a href=#block-start-tag-tag-name title=block-start-tag-tag-name>Tag name</a>
    </th><th><a href=#concept-element-local-name title=concept-element-local-name>Local name</a>
    </th><th><a href=#concept-element-namespace title=concept-element-namespace>Namespace</a>
    </th><th>Semantics (non-normative)
    </th><th>Semantics of start tag's <span title=concept-line-contents>line contents</span> (non-normative)

  </th></tr></thead><tbody>

  <tr>
    <th><dfn id=concept-box title=concept-BOX><code>BOX</code></dfn>
    </th><td><a href=#the-box-element-in-the-suikawiki/0.9-namespace><code>box</code></a>
    </td><td><a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
    </td><td>A group of page content.
    </td><td>Not allowed.

  </td></tr><tr>
    <th><dfn id=concept-delete title=concept-DELETE><code>DEL</code></dfn>
    </th><td><a href=#the-delete-element-in-the-suikawiki/0.9-namespace><code>delete</code></a>
    </td><td><a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
    </td><td>Removal.
    </td><td>Not allowed.

  </td></tr><tr>
    <th><dfn id=concept-eg title=concept-EG><code>EG</code></dfn>
    </th><td><a href=#the-example-element-in-the-suikawiki/0.9-namespace><code>example</code></a>
    </td><td><a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
    </td><td>Example.
    </td><td>Not allowed.

  </td></tr><tr>
    <th><dfn id=concept-fig title=concept-FIG><code>FIG</code></dfn>
    </th><td><a href=#figure><code>figure</code></a>
    </td><td><a href=#html-namespace>HTML namespace</a>
    </td><td>Figure.
    </td><td>Figure caption.

  </td></tr><tr>
    <th><dfn id=concept-figcaption title=concept-FIGCAPTION><code>FIGCAPTION</code></dfn>
    </th><td><a href=#figcaption><code>figcaption</code></a>
    </td><td><a href=#html-namespace>HTML namespace</a>
    </td><td>Figure caption.
    </td><td>Not allowed.

  </td></tr><tr>
    <th><dfn id=concept-history title=concept-HISTORY><code>HISTORY</code></dfn>
    </th><td><a href=#the-history-element-in-the-suikawiki/0.9-namespace><code>history</code></a>
    </td><td><a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
    </td><td>Historical notes.
    </td><td>Not allowed.

  </td></tr><tr>
    <th><dfn id=concept-insert title=concept-INSERT><code>INS</code></dfn>
    </th><td><a href=#the-insert-element-in-the-suikawiki/0.9-namespace><code>insert</code></a>
    </td><td><a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
    </td><td>Insertion.
    </td><td>Not allowed.

  </td></tr><tr>
    <th><dfn id=concept-note title=concept-NOTE><code>NOTE</code></dfn>
    </th><td><a href=#note><code>note</code></a>
    </td><td><a href=#html3-namespace>HTML3 namespace</a>
    </td><td>Note.
    </td><td>Not allowed.

  </td></tr><tr>
    <th><dfn id=concept-postamble title=concept-POSTAMBLE><code>POSTAMBLE</code></dfn>
    </th><td><a href=#the-postamble-element-in-the-suikawiki/0.9-namespace><code>postamble</code></a>
    </td><td><a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
    </td><td>Postamble.
    </td><td>Not allowed.

  </td></tr><tr>
    <th><dfn id=concept-preamble title=concept-PREAMBLE><code>PREAMBLE</code></dfn>
    </th><td><a href=#the-preamble-element-in-the-suikawiki/0.9-namespace><code>preamble</code></a>
    </td><td><a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
    </td><td>Preamble.
    </td><td>Not allowed.

  </td></tr><tr>
    <th><dfn id=concept-refs title=concept-REFS><code>REFS</code></dfn>
    </th><td><a href=#the-refs-element-in-the-suikawiki/0.9-namespace><code>refs</code></a>
    </td><td><a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
    </td><td>References and quotations.
    </td><td>Not allowed.

  </td></tr><tr>
    <th><dfn id=concept-speaker title=concept-SPEAKER><code>SPEAKER</code></dfn>
    </th><td><a href=#the-speaker-element-in-the-suikawiki/0.9-namespace><code>speaker</code></a>
    </td><td><a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
    </td><td>Speaker name of a talk.
    </td><td>Not allowed.

  </td></tr><tr>
    <th><dfn id=concept-talk title=concept-TALK><code>TALK</code></dfn>
    </th><td><a href=#the-talk-element-in-the-suikawiki/0.9-namespace><code>talk</code></a>
    </td><td><a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
    </td><td>A single talk part in a dialogue.
    </td><td>Speaker name of the talk.

  </td></tr></tbody></table>

<div class="note memo">
<p>A future revison to this specification might define
more <a href=#concept-section-block-tag-name title=concept-section-block-tag-name>tag names</a>.
</p></div>

<div class="note memo">
<p>The semantics of an element is formally defined in terms of
corresponding DOM <a href=#element title=element>elements</a>.
</p></div>

<p><dfn id=block-elements>Block elements</dfn> are <a href=#element title=element>elements</a>
whose <a href=#concept-element-local-name title=concept-element-local-name>local name</a> is one
of <a href=#concept-element-local-name title=concept-element-local-name>local names</a> in
the <a href=#block-element-table>Block Element Table</a>.

</p><p><dfn id=structural-elements>Structural elements</dfn> are <a href=#block-elements>block elements</a> and
<a href=#element title=element>elements</a>
whose <a href=#element-local-name title=element-local-name>local name</a> is one
of <a href=#element-html-body><code title=element-html-body>body</code></a>, <a href=#section><code>section</code></a>,
<a href=#blockquote><code>blockquote</code></a>, <a href=#h1><code>h1</code></a>, <a href=#ul><code>ul</code></a>,
<a href=#ol><code>ol</code></a>, <a href=#dl><code>dl</code></a>, <a href=#li><code>li</code></a>, <a href=#dt><code>dt</code></a>,
<a href=#dd><code>dd</code></a>, <a href=#table><code>table</code></a>, <a href=#tbody><code>tbody</code></a>, <a href=#th><code>th</code></a>,
<a href=#tr><code>tr</code></a>, <a href=#td><code>td</code></a>, <a href=#p><code>p</code></a>, <a href=#the-comment-p-element-in-the-suikawiki/0.10-namespace><code>comment-p</code></a>,
<a href=#the-ed-element-in-the-suikawiki/0.10-namespace><code>ed</code></a>, <a href=#the-box-element-in-the-suikawiki/0.9-namespace><code>box</code></a>, and <a href=#pre><code>pre</code></a>.

</p><div class="note memo">
<p>These definitions are referenced from the parser.  The parser does
not have to
check <a href=#element title=element>elements</a>' <span title=namespace>namespaces</span>.
</p></div>


</section>

<section>
<h1 id=swml-mime-types><span class=secno>7 </span>SWML MIME types</h1>

<p>The <a href=#the-swml-text-serialization>SWML text serialization</a> can be identified
by <a href=#mime-type title="MIME type">MIME
types</a> <dfn id=text/x-suikawiki><code>text/x-suikawiki</code></dfn>
and <dfn id=text/x.suikawiki.image><code>text/x.suikawiki.image</code></dfn>.
<a href=#mime-type>MIME
type</a> <a href=#text/x.suikawiki.image><code>text/x.suikawiki.image</code></a> <em class=rfc2119>MUST
NOT</em> be used.

</p><div class=note>

<p>It was originally intended that a <a href=#concept-document title=concept-document>document</a> with <a href=#concept-format-name title=concept-format-name>format name</a> equal to <a href=#concept-magic-format-suikawiki><code title=concept-magic-format-suikawiki>SuikaWiki</code></a> is labeled as
<a href=#text/x-suikawiki><code>text/x-suikawiki</code></a> while a <a href=#concept-document title=concept-document>document</a> with <a href=#concept-format-name title=concept-format-name>format name</a> equal to <a href=#concept-magic-format-suikawikiimage><code title=concept-magic-format-suikawikiimage>SuikaWikiImage</code></a> is
labeled as <a href=#text/x.suikawiki.image><code>text/x.suikawiki.image</code></a>.

</p></div>

<p>If a <a href=#string>string</a> is labeled by one of
these <a href=#mime-type title="MIME type">MIME types</a>,
it <em class=rfc2119>MUST</em> be an <a href=#the-swml-text-serialization>SWML text
serialization</a> <a href=#concept-document title=concept-document>document</a>.

</p><p>If a <a href=#byte-sequence>byte sequence</a> is labeled by one of
these <a href=#mime-type title="MIME type">MIME types</a>,
it <em class=rfc2119>MUST</em> be an <a href=#the-swml-text-serialization>SWML text
serialization</a> <a href=#concept-document title=concept-document>document</a>,
encoded in <a href=#utf-8>UTF-8</a>.

</p><p>When a <a href=#string>string</a> labeled by one of
these <a href=#mime-type title="MIME type">MIME types</a> is processed,
the <a href=#swml-text-serialization-parser title="SWML text serialization
parser">parser</a> <em class=rfc2119>MUST</em> be used.

</p><hr>

<p>If
the <dfn id=parameter-charset title=parameter-charset><code>charset</code></dfn> <span>parameter</span>
is specified with these <a href=#mime-type title="MIME type">MIME types</a>, its
value <em class=rfc2119>MUST</em> be <a href=#utf-8><code>UTF-8</code></a>, <a href=#ascii-case-insensitive>ASCII
case-insensitive</a>.  It <em class=rfc2119>MUST NOT</em> be used
to decode a <a href=#byte-sequence>byte sequence</a> labeled with
the <a href=#mime-type title="MIME type">MIME types</a>.

</p><p>Any other <span>parameter</span> <em class=rfc2119>MUST NOT</em> be
specified.

</p><div class=note>

<p>Historically, there was
the <dfn id=parameter-version title=parameter-version><code>version</code></dfn> <span>parameter</span>
whose value is <dfn id=parameter-version-0.9 title=parameter-version-0.9><code>0.9</code></dfn>
or <dfn id=parameter-version-0.10 title=parameter-version-0.10><code>0.10</code></dfn>.
This <span>parameter</span> was used to
encode <a href=#concept-format-version title=concept-format-version>format version</a> in
favor of <a href=#concept-magic-line title=concept-magic-line>magic line</a>.

</p></div>

<p class=XXX>fragment identifier

</p></section>



<section>
<h1 id=the-swml-xml-serialization><span class=secno>8 </span>The <dfn>SWML XML serialization</dfn></h1>

<p>A <a href=#abnf-document>document</a> using
SWML <a href=#element title=element>elements</a>
and <a href=#attribute title=attribute>attributes</a> can be serialized using
the XML syntax.  It has no dedicated <a href=#mime-type>MIME type</a>.

</p></section>

<section>
<h1 id=semantics-of-elements-and-attributes><span class=secno>9 </span>Semantics of elements and attributes</h1>

<p>This specification is <em>the</em> specification for the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> and the <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10
namespace</a>.  Anything belongging to those namespaces is defined
in this specification.

</p><p>Elements and attributes in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
and in the <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a>, as well as
attributes in no namespace for elements in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9
namespace</a> and in the <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a>, <em class=rfc2119>MUST NOT</em> be used in context where they are not <dfn id=allowed-attributes title="allowed attributes">allowed</dfn> explicitly.

</p><p>Elements in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> and in the
<a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a> defined in this specification
<em class=rfc2119>MUST</em> conform to their <dfn id=content-model>content model</dfn>.

</p><p><a href=#inter-element-whitespace>Inter-element whitespace</a>, comment nodes, and
processing instruction nodes <em class=rfc2119>MUST</em> be
<span>ignored</span> when establishing whether an element matches its
content model or not.

</p><p>Elements in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> and in the
<a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a> <em class=rfc2119>MAY</em> be
orphan nodes (i.e. without a parent node).

</p><p>In the following subsections, attributes listed in the
<a href=#allowed-attributes>allowed attributes</a> entry <em class=rfc2119>MAY</em> be
set to an element described in that subsection.

</p><p>Some elements belong to <dfn id=category title=category>categories</dfn> such
as <a href=#flow-content>flow content</a> and <a href=#phrasing-content>phrasing content</a>.

</p><section>
<h1 id=document-structures><span class=secno>9.1 </span>Document structures</h1>

<section>

<h1 id=the-document-element-in-the-suikawiki/0.9-namespace><span class=secno>9.1.1 </span>The <dfn title=element-sw-document><code>document</code></dfn>
element in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd>A <code title=element-xhtml2-head>head</code> element in the
<a href=#xhtml2-namespace>XHTML2 namespace</a>, followed by a <code title=element-xhtml2-body>body</code> element in the <a href=#xhtml2-namespace>XHTML2
namespace</a>, optionally followed by a <a href=#the-image-element-in-the-suikawiki/0.9-namespace><code>image</code></a> element
in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd>None.

<!--<dd><code title=attr-sw-name>Name</code> in the <span>SuikaWiki/0.9
namespace</span>

<dd><code title=attr-sw-version>Version</code> in the
<span>SuikaWiki/0.9 namespace</span>-->

</dd></dl>

<p>This element <em class=rfc2119>MUST NOT</em> be used.

</p><p class=XXX>...

</p></section>

<section>

<h1 id=the-name-attribute-in-the-suikawiki/0.9-namespace><span class=secno>9.1.2 </span>The <dfn title=attr-sw-name><code>Name</code></dfn> attribute in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<!--
<p>The <code title=attr-sw-version>Name</code> attribute in the
<span>SuikaWiki/0.9 namespace</span> <em class=rfc2119>MAY</em> be
set to an <code>html</code> element in the <span>HTML
namespace</span>.  The attribute can also be set to an <code
title=element-sw-document>document</code> element in the
<span>SuikaWiki/0.9 namespace</span>.
-->

<p>This attribute <em class=rfc2119>MUST NOT</em> be used.

</p><p class=XXX>...

</p></section>

<section>

<h1 id=the-version-attribute-in-the-suikawiki/0.9-namespace><span class=secno>9.1.3 </span>The <dfn><code title=attr-sw-version>Version</code></dfn>
attribute in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<!-- <p>The <code title=attr-sw-version>Version</code> attribute in
the <span>SuikaWiki/0.9 namespace</span> <em class=rfc2119>MAY</em> be
set to an <code>html</code> element in the <span>HTML
namespace</span>.  The attribute can also be set to an <code
title=element-sw-document>document</code> element in the
<span>SuikaWiki/0.9 namespace</span>.  -->

<p>This attribute <em class=rfc2119>MUST NOT</em> be used.

</p><p class=XXX>...

</p></section>

<section>

<h1 id=the-parameter-element-in-the-suikawiki/0.9-namespace><span class=secno>9.1.4 </span>The <dfn title=element-sw-parameter><code>parameter</code></dfn>
element in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None.<!-- <span>Metadata content</span>. -->

</dd><dt><a href=#content-model>Content model</a>

</dt><dd>Zero or more <a href=#the-value-element-in-the-suikawiki/0.9-namespace><code title=element-sw-value>value</code></a> element in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#attr-sw-parameter-name><code title=attr-sw-parameter-name>name</code></a>

</dd></dl>

<p>This element <em class=rfc2119>MUST NOT</em> be used.

</p><p class=XXX>... <dfn id=attr-sw-parameter-name title=attr-sw-parameter-name>name</dfn>

</p></section>

<section>

<h1 id=the-value-element-in-the-suikawiki/0.9-namespace><span class=secno>9.1.5 </span>The <dfn title=element-sw-value><code>value</code></dfn> element
in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#text-content title="text content">Text</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd>None.

</dd></dl>

<p>This element <em class=rfc2119>MUST NOT</em> be used.

</p><p class=XXX>...

</p></section>

<section>
<h1 id=the-class-attribute><span class=secno>9.1.6 </span>The <dfn><code>class</code></dfn> <a href=#attribute>attribute</a></h1>

<p>The <a href=#the-class-attribute><code>class</code></a> <a href=#attribute>attribute</a> of
an <a href=#element>element</a> in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> or
in the <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a> has the same semantics
and requirements as the <a href=#the-class-attribute><code>class</code></a> <a href=#attribute>attribute</a> of
the <a href=#html-element title="HTML element">HTML elements</a>.

</p><p>Unless otherwise specified by other <a href=#applicable-specification>applicable
specification</a>, the <a href=#the-class-attribute><code>class</code></a> <a href=#attribute>attribute</a> of
an <a href=#element>element</a> in the <a href=#aa-namespace>AA namespace</a>, in
the <a href=#html3-namespace>HTML3 namespace</a>, or in the <a href=#html3-namespace>HTML3
namespace</a> has the same semantics and requirements as
the <a href=#the-class-attribute><code>class</code></a> <a href=#attribute>attribute</a> of the <a href=#html-element title="HTML
element">HTML elements</a>.

</p></section>

<section>
<h1 id=the-id-attribute><span class=secno>9.1.7 </span>The <dfn><code>id</code></dfn> <a href=#attribute>attribute</a></h1>

<p>The <a href=#the-id-attribute><code>id</code></a> <a href=#attribute>attribute</a> of
an <a href=#element>element</a> in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> or
in the <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a> has the same semantics
and requirements as the <a href=#the-id-attribute><code>id</code></a> <a href=#attribute>attribute</a> of
the <a href=#html-element title="HTML element">HTML elements</a>.

</p><p>Unless otherwise specified by other <a href=#applicable-specification>applicable
specification</a>, the <a href=#the-id-attribute><code>id</code></a> <a href=#attribute>attribute</a> of
an <a href=#element>element</a> in the <a href=#aa-namespace>AA namespace</a>, in
the <a href=#html3-namespace>HTML3 namespace</a>, or in the <a href=#xhtml2-namespace>XHTML2
namespace</a> has the same semantics and requirements as
the <a href=#the-id-attribute><code>id</code></a> <a href=#attribute>attribute</a> of the <a href=#html-element title="HTML
element">HTML elements</a>.

</p></section>

<section>
<h1 id=the-xml:lang-attribute><span class=secno>9.1.8 </span>The <dfn><code>xml:lang</code></dfn> <a href=#attribute>attribute</a></h1>

<p>The <a href=#the-xml:lang-attribute><code title=xml:lang>lang</code></a> <a href=#attribute>attribute</a> in
the <a href=#xml-namespace>XML namespace</a> <em class=rfc2119>MAY</em> be set to
any <a href=#element>element</a> in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>
or in the <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a>.

</p><p>Unless otherwise specified by other <a href=#applicable-specification>applicable
specification</a>,
the <a href=#the-xml:lang-attribute><code title=xml:lang>lang</code></a> <a href=#attribute>attribute</a> in
the <a href=#xml-namespace>XML namespace</a> <em class=rfc2119>MAY</em> be set to
any <a href=#element>element</a> in the <a href=#aa-namespace>AA namespace</a>, in
the <a href=#html3-namespace>HTML3 namespace</a>, or in the <a href=#xhtml2-namespace>XHTML2
namespace</a>.

</p><hr>

<p>The <dfn id=space><code title=xml:space>space</code></dfn> <a href=#attribute>attribute</a>
in the <a href=#xml-namespace>XML namespace</a> has no effect for
the <a href=#element title=element>elements</a> in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9
namespace</a> or in the <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a>
and <em class=rfc2119>MUST NOT</em> be used.

</p><p>Unless otherwise specified by other <a href=#applicable-specification>applicable
specification</a>,
the <code title=xml:space>space</code> <a href=#attribute>attribute</a> in
the <a href=#xml-namespace>XML namespace</a> has no effect for
the <a href=#element title=element>elements</a> in the <a href=#aa-namespace>AA
namespace</a>, in the <a href=#html3-namespace>HTML3 namespace</a>, or in
the <a href=#xhtml2-namespace>XHTML2 namespace</a> and <em class=rfc2119>MUST NOT</em>
be used.

</p><p>The <dfn id=xml:base><code>xml:base</code></dfn> <a href=#attribute>attribute</a> and
the <dfn id=xml:id><code>xml:id</code></dfn> <a href=#attribute>attribute</a> <em class=rfc2119>MUST
NOT</em> be used or supported.

</p></section>

</section>

<section>
<h1 id=blocks><span class=secno>9.2 </span>Blocks</h1>

<section>

<h1 id=the-dr-element-in-the-suikawiki/0.9-namespace><span class=secno>9.2.1 </span>The <dfn><code>dr</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd>A <a href=#dt><code>dt</code></a> element in the <a href=#xhtml2-namespace>XHTML2 namespace</a>,
followed by a <a href=#dd><code>dd</code></a> element in the <a href=#xhtml2-namespace>XHTML2
namespace</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd>None.

</dd></dl>

<p>This element <em class=rfc2119>MUST NOT</em> be used.

</p><p class=XXX>...

</p></section>

<section>

<h1 id=the-comment-p-element-in-the-suikawiki/0.10-namespace><span class=secno>9.2.2 </span>The <dfn><code>comment-p</code></dfn> element in the
<a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd>None.

</dd></dl>

<p>The <a href=#the-comment-p-element-in-the-suikawiki/0.10-namespace><code>comment-p</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
a note.

</p><div class="note memo">

<p>Historically, the <code title="">p</code> suffix in the element name
implied that it <a href=#represents title=represents>represented</a>
a <span>paragraph</span>.  As its content is any <a href=#flow-content>flow
content</a>, it now can contain any number
of <span title=paragraph>paragraphs</span>.

</p></div>

</section>

<section>

<h1 id=the-history-element-in-the-suikawiki/0.9-namespace><span class=secno>9.2.3 </span>The <dfn><code>history</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-history-element-in-the-suikawiki/0.9-namespace><code>history</code></a> element represents a description of
history or an out-of-date content.

</p></section>

<section>

<h1 id=the-example-element-in-the-suikawiki/0.9-namespace><span class=secno>9.2.4 </span>The <dfn><code>example</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-example-element-in-the-suikawiki/0.9-namespace><code>example</code></a> element represents an example.

</p></section>

<section>

<h1 id=the-preamble-element-in-the-suikawiki/0.9-namespace><span class=secno>9.2.5 </span>The <dfn><code>preamble</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-preamble-element-in-the-suikawiki/0.9-namespace><code>preamble</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
a preamble or preface.

</p></section>

<section>
<h1 id=the-postamble-element-in-the-suikawiki/0.9-namespace><span class=secno>9.2.6 </span>The <dfn><code>postamble</code></dfn> <a href=#element>element</a> in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-postamble-element-in-the-suikawiki/0.9-namespace><code>postamble</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
a postamble.

</p></section>

<section>
<h1 id=the-box-element-in-the-suikawiki/0.9-namespace><span class=secno>9.2.7 </span>The <dfn><code>box</code></dfn> <a href=#element>element</a> in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-box-element-in-the-suikawiki/0.9-namespace><code>box</code></a> <a href=#element>element</a> <a href=#represents>represents</a> a
physically grouped chunk of contents.

</p><p>The <a href=#the-class-attribute><code>class</code></a> <a href=#attribute>attribute</a> and CSS can be used
to specify presentations of the <a href=#element>element</a>.

</p><div class="note memo">
<p>This <a href=#element>element</a> can be used to mark up a chunk of text
quoted from other materials when it is not apparently mapped into any
other <a href=#element>element</a>'s semantics, e.g. indented text,
center-aligned text, right-aligned text, and vertical text.
</p></div>

</section>

</section>

<section>
<h1 id=dialogues><span class=secno>9.3 </span>Dialogues</h1>

<section>
<h1 id=the-dialogue-element-in-the-suikawiki/0.9-namespace><span class=secno>9.3.1 </span>The <dfn><code>dialogue</code></dfn> <a href=#element>element</a> in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd>Zero or
more <a href=#the-talk-element-in-the-suikawiki/0.9-namespace><code>talk</code></a> <a href=#element title=element>elements</a>, optionally
intermixed with <a href=#script-supporting-elements>script-supporting elements</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd>None.

</dd></dl>

<p>The <a href=#the-dialogue-element-in-the-suikawiki/0.9-namespace><code>dialogue</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
a conversation between one or more persons.

</p><p>Each piece of the conversation is represented
by <a href=#concept-element-children title=concept-element-children>child</a> <a href=#the-talk-element-in-the-suikawiki/0.9-namespace><code>talk</code></a> <a href=#element title=element>elements</a>.

</p><p>A <a href=#the-dialogue-element-in-the-suikawiki/0.9-namespace><code>dialogue</code></a> <a href=#element>element</a> <em class=rfc2119>SHOULD</em>
have at least
one <a href=#the-talk-element-in-the-suikawiki/0.9-namespace><code>talk</code></a> <a href=#element>element</a> <a href=#concept-element-children title=concept-element-children>child</a>.

</p></section>

<section>

<h1 id=the-talk-element-in-the-suikawiki/0.9-namespace><span class=secno>9.3.2 </span>The <dfn><code>talk</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd>One <a href=#the-speaker-element-in-the-suikawiki/0.9-namespace><code>speaker</code></a> <a href=#element>element</a> followed
by <a href=#flow-content>flow content</a>, optionally intermixed
with <a href=#script-supporting-elements>script-supporting elements</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-talk-element-in-the-suikawiki/0.9-namespace><code>talk</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
a group of sentences by a person (or a specific group of persons) in
the dialogue.

</p><p>The <dfn id=concept-talk-speaker title=concept-talk-speaker>speaker</dfn> of
a <a href=#the-talk-element-in-the-suikawiki/0.9-namespace><code>talk</code></a> <a href=#element>element</a> is the
first <a href=#the-speaker-element-in-the-suikawiki/0.9-namespace><code>speaker</code></a> <a href=#concept-element-children title=concept-element-children>child</a> <a href=#element>element</a>
of the <a href=#element>element</a>, if any, or <code>null</code>.  If
the <a href=#concept-talk-speaker title=concept-talk-speaker>speaker</a> is
not <code>null</code>, it describes the speaker(s) of the talk.
Otherwise, the speaker is not explicitly described.

</p><div class="note memo">
<p>Interviewer's questions are often identified by lack of explicit
speaker name.
</p></div>

<p>The <a href=#the-class-attribute><code>class</code></a> attribute can be used to style talks in a
dialogue based on the speaker of them (e.g. use different colors for
different speakers).

</p></section>

<section>

<h1 id=the-speaker-element-in-the-suikawiki/0.9-namespace><span class=secno>9.3.3 </span>The <dfn><code>speaker</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-speaker-element-in-the-suikawiki/0.9-namespace><code>speaker</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
a short string used to credit the person (or a group of person) of the
piece of the conversation.

</p><p>It can also contain other metadata than person name, such as
affiliation of the person or the timestamp of the talk, if desired.

</p></section>


</section>


<section>
<h1 id=hyperlinks><span class=secno>9.4 </span>Hyperlinks</h1>

<p>Some of <a href=#element title=element>elements</a> defined by this
specification or used in SWML documents are considered as
<dfn id=implicit-link-elements>implicit link
elements</dfn>.  <a href=#element title=element>Elements</a>
<a href=#abbr><code>abbr</code></a>,
<a href=#cite><code>cite</code></a>,
<a href=#code><code>code</code></a>, and
<a href=#kbd><code>kbd</code></a>
in the <a href=#html-namespace>HTML namespace</a> are <span>impicit link
elements</span>.

</p><section>

<h1 id=the-anchor-element-in-the-suikawiki/0.9-namespace><span class=secno>9.4.1 </span>The <dfn><code>anchor</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-anchor-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-anchor>anchor</code></a> in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>

</dd></dl>

<p class=XXX>...

</p></section>

<section>

<h1 id=the-anchor-internal-element-in-the-suikawiki/0.9-namespace><span class=secno>9.4.2 </span>The <dfn><code>anchor-internal</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-anchor-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-anchor>anchor</code></a> in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>

</dd></dl>

<p class=XXX>...

</p></section>

<section>

<h1 id=the-anchor-end-element-in-the-suikawiki/0.9-namespace><span class=secno>9.4.3 </span>The <dfn><code>anchor-end</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-anchor-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-anchor>anchor</code></a> in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>.

</dd></dl>

<p class=XXX>...

</p></section>

<section>

<h1 id=the-anchor-attribute-in-the-suikawiki/0.9-namespace><span class=secno>9.4.4 </span>The <dfn title=attr-sw-anchor><code>anchor</code></dfn> attribute
in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<p>The <a href=#the-anchor-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-anchor>anchor</code></a> attribute in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>, when set to an
<a href=#the-anchor-end-element-in-the-suikawiki/0.9-namespace><code>anchor-end</code></a> element, defines an <dfn id=anchor-number>anchor number</dfn>
for the parent element of the <a href=#the-anchor-end-element-in-the-suikawiki/0.9-namespace><code>anchor-end</code></a> element, if any.

</p><p>The attribute <em class=rfc2119>MUST</em> be present and its
value <em class=rfc2119>MUST</em> be a <a href=#valid-integer>valid integer</a>.
The integer <em class=rfc2119>MUST</em> have different value from any
other <a href=#the-anchor-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-anchor>anchor</code></a> attribute in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> of an
<a href=#the-anchor-end-element-in-the-suikawiki/0.9-namespace><code>anchor-end</code></a> element in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9
namespace</a> that belongs to the same tree as the first attribute.

</p><hr>

<p>The <a href=#the-anchor-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-anchor>anchor</code></a> attribute in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> <em class=rfc2119>MAY</em> be
set to <a href=#q><code>q</code></a> elements in the <a href=#html-namespace>HTML
namespace</a> and in the <a href=#xhtml2-namespace>XHTML2 namespace</a>, as well as
<a href=#ins><code>ins</code></a> and <a href=#del><code>del</code></a> elements in the <a href=#html-namespace>HTML
namespace</a>.  The attribute can also be present to
<a href=#the-anchor-element-in-the-suikawiki/0.9-namespace><code>anchor</code></a> and <a href=#the-anchor-internal-element-in-the-suikawiki/0.9-namespace><code>anchor-internal</code></a> elements in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>.

</p><p>In these cases, the attribute represents the <a href=#anchor-number>anchor
number</a> of the element referenced.  If the element on which the
attribute is found is an <a href=#the-anchor-element-in-the-suikawiki/0.9-namespace><code>anchor</code></a> element, the element
referenced might be found in the document referenced by the element.
Otherwise, the element is in the tree the element belongs to.

</p><p>If the element on which the attribute is found is <em>not</em>
an <a href=#the-anchor-element-in-the-suikawiki/0.9-namespace><code>anchor</code></a> or <a href=#the-anchor-internal-element-in-the-suikawiki/0.9-namespace><code>anchor-internal</code></a> element, the
attribute has similar semantics to that of the <code title="">cite</code>
attribute on the element.  In such cases, the <a href=#the-anchor-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-anchor>anchor</code></a> attribute in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> <em class=rfc2119>MUST NOT</em>
be present when there is a <code title="">cite</code> attribute.
A user agent <em class=rfc2119>MUST</em> <span title=ignored>ignore</span> the <a href=#the-anchor-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-anchor>anchor</code></a> attribute in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> if there is a <code title="">cite</code>
attribute.

</p><p>The attribute value <em class=rfc2119>MUST</em> be a <a href=#valid-integer>valid
integer</a>.  Unless the element is <a href=#the-anchor-element-in-the-suikawiki/0.9-namespace><code>anchor</code></a>, the
integer <em class=rfc2119>MUST</em> be equal to one of the integer
represented by the <a href=#the-anchor-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-anchor>anchor</code></a> attribute
in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> set to an
<a href=#the-anchor-internal-element-in-the-suikawiki/0.9-namespace><code>anchor-internal</code></a> element in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9
namespace</a> that belongs to the same tree.

</p></section>

<section>

<h1 id=the-anchor-external-element-in-the-suikawiki/0.9-namespace><span class=secno>9.4.5 </span>The <dfn><code>anchor-external</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-resparameter-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-res-parameter>resParameter</code></a> in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>

</dd><dd><a href=#the-resscheme-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-res-scheme>resScheme</code></a> in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>

</dd></dl>

<p class=XXX>...

</p></section>

<section>

<h1 id=the-resscheme-attribute-in-the-suikawiki/0.9-namespace><span class=secno>9.4.6 </span>The <dfn title=attr-sw-res-scheme><code>resScheme</code></dfn>
attribute in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<p>The <a href=#the-resscheme-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-res-scheme>resScheme</code></a> attribute in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> <em class=rfc2119>MAY</em> be
used for <a href=#q><code>q</code></a> elements in the <a href=#html-namespace>HTML
namespace</a> and in the <a href=#xhtml2-namespace>XHTML2 namespace</a>, as well as
<a href=#ins><code>ins</code></a> and <a href=#del><code>del</code></a> elements in the <a href=#html-namespace>HTML
namespace</a>.  The attribute can also be used for an
<a href=#the-anchor-external-element-in-the-suikawiki/0.9-namespace><code>anchor-external</code></a> element in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9
namespace</a>.

</p><p class=XXX>...

</p></section>

<section>

<h1 id=the-resparameter-attribute-in-the-suikawiki/0.9-namespace><span class=secno>9.4.7 </span>The <dfn title=attr-sw-res-parameter><code>resParameter</code></dfn> attribute
in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<p>The <a href=#the-resparameter-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-res-parameter>resParameter</code></a> attribute
in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> <em class=rfc2119>MAY</em>
be used for <a href=#q><code>q</code></a> elements in the <a href=#html-namespace>HTML
namespace</a> and in the <a href=#xhtml2-namespace>XHTML2 namespace</a>, as well as
<a href=#ins><code>ins</code></a> and <a href=#del><code>del</code></a> elements in the <a href=#html-namespace>HTML
namespace</a>.  The attribute can also be used for an
<a href=#the-anchor-external-element-in-the-suikawiki/0.9-namespace><code>anchor-external</code></a> element in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9
namespace</a>.

</p><p class=XXX>...

</p><p>The <dfn id="element's-resscheme">element's <code>resScheme</code></dfn> of
an <code>resParameter</code> <a href=#attribute>attribute</a> in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> <var>attr</var> is the result
of the following steps:

  </p><ol class=steps>

  <li>If <var>attr</var>'s <a href=#owner-element title="owner element">element</a>
  is <span>null</span>, return the <span>empty string</span>.

  </li><li>Return the result of <a href=#get-an-attribute-value title="get an attribute
  value">getting</a> <var>attr</var>'s <a href=#owner-element title="owner
  element">element</a>'s <code>resScheme</code> <a href=#attribute>attribute</a>
  in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>.<!-- attribute value or
  the empty string -->

  </li></ol>

<p>If the <a href="#element's-resscheme">element's <code>resScheme</code></a>
is <a href=#concept-mail><code title=concept-MAIL>MAIL</code></a>, the <a href=#attribute-value>attribute
value</a> <em class=rfc2119>MUST</em> be a <a href=#valid-e-mail-address>valid e-mail
address</a>.

</p><p>If the <a href="#element's-resscheme">element's <code>resScheme</code></a>
is <a href=#concept-url><code title=concept-URL>URL</code></a>
or <a href=#concept-uri><code title=concept-URI>URI</code></a>, the <a href=#attribute-value>attribute
value</a> <em class=rfc2119>MUST</em> be a <a href=#valid-url-string>valid URL
string</a>.

</p></section>

</section>

<section>
<h1 id=embedded-objects><span class=secno>9.5 </span>Embedded objects</h1>

<p>Unless otherwise specified by other <a href=#applicable-specification>applicable
specification</a>, the <a href=#aa><code>aa</code></a> <a href=#element>element</a> is
a <a href=#phrasing-content>phrasing content</a> and its <a href=#content-model>content model</a>
is <a href=#phrasing-content>phrasing content</a>.<!-- As the original specification
does not define details of the element's author requirements, we
define them for our purposes only here. -->

</p><section>

<h1 id=the-form-element-in-the-suikawiki/0.9-namespace><span class=secno>9.5.1 </span>The <dfn><code>form</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#nothing>Nothing</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><code title=attr-sw-id>id</code>
</dd><dd><a href=#attr-sw-form-input><code title=attr-sw-form-input>input</code></a>
</dd><dd><a href=#attr-sw-form-option><code title=attr-sw-form-option>option</code></a>
</dd><dd><a href=#attr-sw-form-parameter><code title=attr-sw-form-parameter>parameter</code></a>
</dd><dd><a href=#attr-sw-form-ref><code title=attr-sw-form-ref>ref</code></a>
</dd><dd><a href=#attr-sw-form-template><code title=attr-sw-form-template>template</code></a>

</dd></dl>

<p class=XXX>... <dfn id=attr-sw-form-ref title=attr-sw-form-ref><code>ref</code></dfn>,
<dfn id=attr-sw-form-parameter title=attr-sw-form-parameter><code>parameter</code></dfn>.

</p><hr>

<p class=XXX>... <dfn id=attr-sw-form-input title=attr-sw-form-input><code>input</code></dfn>, <dfn id=attr-sw-form-template title=attr-sw-form-template><code>template</code></dfn>, <dfn id=attr-sw-form-option title=attr-sw-form-option><code>option</code>

</dfn></p></section>

<section>

<h1 id=the-image-element-in-the-suikawiki/0.9-namespace><span class=secno>9.5.2 </span>The <dfn><code>image</code></dfn> <a href=#element>element</a> in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#text-content title="text content">Text</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd>None.

</dd></dl>

<p>This <a href=#element>element</a> <em class=rfc2119>MUST NOT</em> be used.
It was used to embed an image data associated with
the <a href=#abnf-document>document</a>.

</p><p>An <a href=#the-image-element-in-the-suikawiki/0.9-namespace><code>image</code></a> <a href=#element>element</a> <var>element</var> in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> <a href=#represents>represents</a> the
result of the following steps:

  </p><ol class=steps>

  <li>Let <var>encoded</var> be <var>elmeent</var>'s <a href=#text-content>text
  content</a>.

  </li><li>Let <var>decoded</var> be the result
  of <a href=#forgiving-base64-decode title="forgiving-base64
  decode">decoding</a> <var>encoded</var>.

  </li><li>If <var>decoded</var> is failure, return nothing.

  </li><li>If <var>decoded</var> is not a valid <span>PNG</span>
  or <span>JFIF</span> image data, return nothing.

  </li><li>Return an image represented by <var>decoded</var>.

  </li></ol>

<div class=note>

<p>Historically, at most one <a href=#the-image-element-in-the-suikawiki/0.9-namespace><code>image</code></a> <a href=#element>element</a>
was allowed to be inserted after
the <a href=#body><code>body</code></a> <a href=#element>element</a> in the <a href=#html-namespace>HTML
namespace</a>.  Its content has to be
a <a href=#forgiving-base64-encode title="forgiving-base64
encode">Base64-encoded</a> <span>PNG</span> or JPEG
(<span>JFIF</span>) image data.

</p></div>

</section>

<section>

<h1 id=the-replace-element-in-the-suikawiki/0.9-namespace><span class=secno>9.5.3 </span>The <dfn><code>replace</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None. <!-- <span>Phrasing content</span>. -->

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#nothing>Nothing</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#attr-sw-replace-by><code title=attr-sw-replace-by>by</code></a>

</dd></dl>

<p>This element <em class=rfc2119>MUST NOT</em> be used.

</p><p class=XXX>... <dfn id=attr-sw-replace-by title=attr-sw-replace-by><code>by</code></dfn>

</p></section>

<section>

<h1 id=the-text-element-in-the-suikawiki/0.9-namespace><span class=secno>9.5.4 </span>The <dfn><code>text</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#text-content title="text content">Text</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd>None.

</dd></dl>

<p>This element <em class=rfc2119>MUST NOT</em> be used.

</p><p class=XXX>...

</p></section>

</section>

<section>
<h1 id=citations><span class=secno>9.6 </span>Citations</h1>

<section>

<h1 id=the-csection-element-in-the-suikawiki/0.10-namespace><span class=secno>9.6.1 </span>The <dfn><code>csection</code></dfn> element in the
<a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p class=XXX>...

</p></section>

<section>

<h1 id=the-src-element-in-the-suikawiki/0.10-namespace><span class=secno>9.6.2 </span>The <dfn><code>src</code></dfn> element in the
<a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p class=XXX>...

</p></section>

<section>

<h1 id=the-refs-element-in-the-suikawiki/0.9-namespace><span class=secno>9.6.3 </span>The <dfn><code>refs</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-refs-element-in-the-suikawiki/0.9-namespace><code>refs</code></a> element represents a list of referenced
documents.

</p></section>

</section>

<section>
<h1 id=inline-structures><span class=secno>9.7 </span>Inline structures</h1>

<section>
<h1 id=the-fenced-element-in-the-suikawiki/0.9-namespace><span class=secno>9.7.1 </span>The <dfn><code>fenced</code></dfn> <a href=#element>element</a> in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd>An <a href=#the-openfence-element-in-the-suikawiki/0.9-namespace><code>openfence</code></a> <a href=#element>element</a>, followed by
a <a href=#the-fencedtext-element-in-the-suikawiki/0.9-namespace><code>fencedtext</code></a> <a href=#element>element</a>, followed by an
optional <a href=#the-closefence-element-in-the-suikawiki/0.9-namespace><code>closefence</code></a> <a href=#element>element</a>, optionally
intermixed with <a href=#script-supporting-elements>script-supporting elements</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-fenced-element-in-the-suikawiki/0.9-namespace><code>fenced</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
a chunk of content with parentheses enclosing it.

</p><p>The <dfn id=open-fence>open fence</dfn> of
a <a href=#the-fenced-element-in-the-suikawiki/0.9-namespace><code>fenced</code></a> <a href=#element>element</a> is the
first <span>child</span> <a href=#the-openfence-element-in-the-suikawiki/0.9-namespace><code>openfence</code></a> <a href=#element>element</a>,
if any.

</p><p>The <dfn id=fenced-content>fenced content</dfn> of
a <a href=#the-fenced-element-in-the-suikawiki/0.9-namespace><code>fenced</code></a> <a href=#element>element</a> is the
first <span>child</span> <a href=#the-fencedtext-element-in-the-suikawiki/0.9-namespace><code>fencedtext</code></a>
<a href=#element>element</a>, if any, after the <a href=#open-fence>open fence</a> if
there is.

</p><p>The <dfn id=close-fence>close fence</dfn> of
a <a href=#the-fenced-element-in-the-suikawiki/0.9-namespace><code>fenced</code></a> <a href=#element>element</a> is the
first <span>child</span> <a href=#the-closefence-element-in-the-suikawiki/0.9-namespace><code>closefence</code></a>
<a href=#element>element</a>, if any, after the <a href=#fenced-content>fenced content</a> if
there is.

</p><p>Any other <span>child</span> <a href=#represents>represents</a> nothing.

</p><p>The <a href=#open-fence>open fence</a> and <a href=#close-fence>close fence</a>
<em class=rfc2119>MAY</em> be <span>empty</span>.  It is equivalent to
missing of <a href=#open-fence>open fence</a> or <a href=#close-fence>close fence</a>,
respectively.

</p><p>It is <span>expected</span> that the <a href=#open-fence>open fence</a>
and <a href=#close-fence>close fence</a>, if any, are rendered by the same line
height as the maximum of the height of the <span>fenced content and
the height of the <span>line box</span> usually generated by
the <a href=#open-fence>open fence</a> or <a href=#close-fence>close fence</a></span>.

</p></section>

<section>
<h1 id=the-openfence-element-in-the-suikawiki/0.9-namespace><span class=secno>9.7.2 </span>The <dfn><code>openfence</code></dfn> <a href=#element>element</a> in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-openfence-element-in-the-suikawiki/0.9-namespace><code>openfence</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
the parenthese before the <a href=#fenced-content>fenced content</a> if it is an
<a href=#open-fence>open fence</a>.  Otherwise, it <a href=#represents>represents</a>
its <span>content</span>.

</p></section>

<section>
<h1 id=the-fencedtext-element-in-the-suikawiki/0.9-namespace><span class=secno>9.7.3 </span>The <dfn><code>fencedtext</code></dfn> <a href=#element>element</a> in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-fencedtext-element-in-the-suikawiki/0.9-namespace><code>fencedtext</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
the content enclosed by parentheses if it is a
<a href=#fenced-content>fenced content</a>.  Otherwise, it <a href=#represents>represents</a>
its <span>content</span>.

</p></section>

<section>
<h1 id=the-closefence-element-in-the-suikawiki/0.9-namespace><span class=secno>9.7.4 </span>The <dfn><code>closefence</code></dfn> <a href=#element>element</a> in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-closefence-element-in-the-suikawiki/0.9-namespace><code>closefence</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
the parenthese after the <a href=#fenced-content>fenced content</a> if it is an
<a href=#close-fence>close fence</a>.  Otherwise, it <a href=#represents>represents</a> its
<span>content</span>.

</p></section>

<section>
<h1 id=the-lines-element-in-the-suikawiki/0.9-namespace><span class=secno>9.7.5 </span>The <dfn><code>lines</code></dfn> <a href=#element>element</a> in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd>Two or more <a href=#the-line-element-in-the-suikawiki/0.9-namespace><code>line</code></a> <a href=#element title=element>elements</a>,
optionally intermixed with <a href=#script-supporting-elements>script-supporting elements</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-lines-element-in-the-suikawiki/0.9-namespace><code>lines</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
zero or more spans of parallel contents embedded within a line.

</p></section>

<section>
<h1 id=the-line-element-in-the-suikawiki/0.9-namespace><span class=secno>9.7.6 </span>The <dfn><code>line</code></dfn> <a href=#element>element</a> in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-line-element-in-the-suikawiki/0.9-namespace><code>line</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
a piece of content in the <a href=#parent>parent</a>
<a href=#the-lines-element-in-the-suikawiki/0.9-namespace><code>lines</code></a> <a href=#element>element</a>, if any.  Otherwise,
it <a href=#represents>represents</a> its content.

</p></section>

</section>

<section>
<h1 id=editorial-annotations><span class=secno>9.8 </span>Editorial annotations</h1>

<section>

<h1 id=the-insert-element-in-the-suikawiki/0.9-namespace><span class=secno>9.8.1 </span>The <dfn><code>insert</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-insert-element-in-the-suikawiki/0.9-namespace><code>insert</code></a> <a href=#element>element</a> is equivalent to
the <a href=#ins><code>ins</code></a> <a href=#element>element</a>.

</p></section>

<section>
<h1 id=the-delete-element-in-the-suikawiki/0.9-namespace><span class=secno>9.8.2 </span>The <dfn><code>delete</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-delete-element-in-the-suikawiki/0.9-namespace><code>delete</code></a> <a href=#element>element</a> is equivalent to
the <a href=#del><code>del</code></a> <a href=#element>element</a>.

</p></section>

<section>
<h1 id=the-ed-element-in-the-suikawiki/0.10-namespace><span class=secno>9.8.3 </span>The <dfn><code>ed</code></dfn> element in the <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10
namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd>None.

</dd></dl>

<p class=XXX>...

</p></section>

<section>
<h1 id=the-asis-element-in-the-suikawiki/0.9-namespace><span class=secno>9.8.4 </span>The <dfn><code>asis</code></dfn> element in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>, optionally followed by
a <a href=#the-title-element-in-the-suikawiki/0.10-namespace><code>title</code></a> <a href=#element>element</a>, optionally intermixed
with <a href=#script-supporting-elements>script-supporting elements</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-asis-element-in-the-suikawiki/0.9-namespace><code>asis</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
a chunk of content with an annotation that the content is repeated
from the source material as-is.  This annotation is typically used
within a quotation to describe that the content has an error that
occurs in the original text (and is <em>not</em> produced by the
author of the document).

</p><p>If there is a last <span>child</span> <a href=#element>element</a> that is a  <a href=#the-title-element-in-the-suikawiki/0.10-namespace><code>title</code></a>
<a href=#element>element</a>, it is the annotation (and is not part of the
annotated content).  A user agent is <span>expected</span> to show the
annotation as such.  If there is
no <a href=#the-title-element-in-the-suikawiki/0.10-namespace><code>title</code></a> <a href=#element>element</a> <span>child</span>, a
<span title="user agent">user-agent</span> dependent
annotation <em class=rfc2119>SHOULD</em> be used instead.

</p><div class="note memo">

<p>Typically a short text such as “(sic)” or “<span lang=ja>ママ</span>” 
is used as the annotation.

</p></div>

</section>

<section>
<h1 id=the-snip-element-in-the-suikawiki/0.9-namespace><span class=secno>9.8.5 </span>The <dfn><code>snip</code></dfn> <a href=#element>element</a> in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-snip-element-in-the-suikawiki/0.9-namespace><code>snip</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
the point where some content in the source material are omitted.  It
is typically used within a quotation.

</p><p>If the <span>content</span> is not <span>empty</span>,
it <a href=#represents>represents</a> the annotation placed instead of the
original text.

</p><p>It is <span>expected</span> that the <span>content</span> of
the <a href=#element>element</a> is rendered.  If it is <span>empty</span>, a
<span title="user agent">user-agent</span> dependent
annotation <em class=rfc2119>SHOULD</em> be used instead.

</p><div class="note memo">

<p>Typically, a short text such as “...” or
“<span lang=ja>(中略)</span>” is used as the annotation.

</p></div>

</section>

</section>

<section>
<h1 id=inline-annotations><span class=secno>9.9 </span>Inline annotations</h1>


<section>
<h1 id=the-emph-element-in-the-suikawiki/0.9-namespace><span class=secno>9.9.1 </span>The <dfn><code>emph</code></dfn> element in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-emph-element-in-the-suikawiki/0.9-namespace><code>emph</code></a> <a href=#element>element</a> is equivalent to
the <a href=#em><code>em</code></a> <a href=#element>element</a>.

</p><p>The <a href=#the-class-attribute><code>class</code></a> <a href=#attribute>attribute</a> and CSS can be used
to specify presentations of emphasized texts, such as italic and
various kinds of annotation marks.

</p></section>

<section>
<h1 id=the-rubyb-element-in-the-suikawiki/0.9-namespace><span class=secno>9.9.2 </span>The <dfn><code>rubyb</code></dfn> <a href=#element>element</a> in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>, followed by an <a href=#rt><code>rt</code></a>
<a href=#element>element</a>, optionally intermixed
with <a href=#script-supporting-elements>script-supporting elements</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-rubyb-element-in-the-suikawiki/0.9-namespace><code>rubyb</code></a> <a href=#element>element</a> is equivalent to
the <a href=#ruby><code>ruby</code></a> <a href=#element>element</a> except that it only
contains the base text (<a href=#phrasing-content>phrasing content</a>) and the
secondary ruby text (an <a href=#rt><code>rt</code></a> <a href=#element>element</a>).

</p><p>It is <span>expected</span> that the first <a href=#rt><code>rt</code></a> 
<a href=#element>element</a> <span>child</span>, if any, is rendered
<span>after</span> the other <span>content</span> before it.

</p></section>


<section>
<h1 id=the-okuri-element-in-the-suikawiki/0.9-namespace><span class=secno>9.9.3 </span>The <dfn><code>okuri</code></dfn> <a href=#element>element</a> in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd>An <a href=#rt><code>rt</code></a> <a href=#element>element</a>, optionally followed by
an <a href=#rt><code>rt</code></a> <a href=#element>element</a>, optionally intermixed
with <a href=#script-supporting-elements>script-supporting elements</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-okuri-element-in-the-suikawiki/0.9-namespace><code>okuri</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
<i lang=ja>okuri-gana</i>s (<span lang=ja>送り仮名</span>) annotated
after the base character in <i lang=ja>Kambun</i> 
(<span lang=ja>漢文</span>).

</p><p>Its first <a href=#rt><code>rt</code></a> <a href=#element>element</a> <span>child</span>,
if any, <a href=#represents>represents</a> the primary ruby text.  Its
second <a href=#rt><code>rt</code></a> <a href=#element>element</a> <span>child</span>, if
any, <a href=#represents>represents</a> the secondary ruby text.  The base
character is the character just before
the <a href=#the-okuri-element-in-the-suikawiki/0.9-namespace><code>okuri</code></a> <a href=#element>element</a> (ignoring out-of-flow
content such as another ruby texts).

</p><p>It is <span>expected</span> that the primary ruby text, if any, is
rendered at the right bottom of the base character and the secondary
ruby text, if any, is rendered at the left bottom of the base
character, in a vertical text.  Note that the base character might
have its own ruby texts (i.e. it is part of
a <a href=#ruby><code>ruby</code></a> <a href=#element>element</a>).

</p></section>

<section>
<h1 id=the-weak-element-in-the-suikawiki/0.9-namespace><span class=secno>9.9.4 </span>The <dfn><code>weak</code></dfn> <a href=#element>element</a> in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p class=XXX>...

</p></section>

<section>
<h1 id=the-title-element-in-the-suikawiki/0.10-namespace><span class=secno>9.9.5 </span>The <dfn><code>title</code></dfn> <a href=#element>element</a> in the
<a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd>None.

</dd></dl>

<p>The <a href=#the-title-element-in-the-suikawiki/0.10-namespace><code>title</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
a text that would be specified to
the <code title=attr-html-title>title</code> <a href=#attribute>attribute</a> of
the <a href=#parent>parent</a> <a href=#element>element</a>, if applicable.
Otherwise, it <a href=#represents>represents</a> nothing.

</p><p>A <a href=#the-title-element-in-the-suikawiki/0.10-namespace><code>title</code></a> <a href=#element>element</a> <em class=rfc2119>MAY</em>
be the last
non-<a href=#script-supporting-elements title="script-supporting elements">script-supporting</a>
<span>child</span> <a href=#element>element</a> of
an <a href=#abbr><code>abbr</code></a>, <a href=#dfn><code>dfn</code></a>,
or <a href=#span><code>span</code></a> <a href=#element>element</a> <var>parent</var> when there
is no <code title=attr-html-title>title</code> <a href=#attribute>attribute</a>
in <var>parent</var>.

</p><p>An <a href=#the-title-element-in-the-suikawiki/0.10-namespace><code>title</code></a> <em class=rfc2119>MUST NOT</em> be used when
it <a href=#represents>represents</a> nothing.

</p></section>

</section>

<section>
<h1 id=mathematical-representations><span class=secno>9.10 </span>Mathematical representations</h1>


<section>
<h1 id=the-dotabove-element-in-the-suikawiki/0.9-namespace><span class=secno>9.10.1 </span>The <dfn><code>dotabove</code></dfn> <a href=#element>element</a> in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-dotabove-element-in-the-suikawiki/0.9-namespace><code>dotabove</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
a content with a dot above it.  This is used in mathematical
expressions, such as recurring decimals.

</p><p>It is <span>expected</span> that a dot symbol is rendered above
the <span>content</span> of the <a href=#element>element</a>.

</p></section>

<section>
<h1 id=the-vector-element-in-the-suikawiki/0.9-namespace><span class=secno>9.10.2 </span>The <dfn><code>vector</code></dfn> <a href=#element>element</a> in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-vector-element-in-the-suikawiki/0.9-namespace><code>vector</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
a content with a right-pointing arrow above it.  This is used in
mathematical expressions to denote a vector.

</p><p>It is <span>expected</span> that a right-pointing arrow is rendered
above the <span>content</span> of the <a href=#element>element</a>.

</p><p>This <a href=#element>element</a> <em class=rfc2119>SHOULD NOT</em> be used
for other possible presentations of vectors, such as bold face without
arrow.

</p></section>

<section>
<h1 id=the-subsup-element-in-the-suikawiki/0.9-namespace><span class=secno>9.10.3 </span>The <dfn><code>subsup</code></dfn> <a href=#element>element</a> in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd>A <a href=#the-subscript-element-in-the-suikawiki/0.9-namespace><code>subscript</code></a> <a href=#element>element</a>, followed by a
<a href=#the-superscript-element-in-the-suikawiki/0.9-namespace><code>superscript</code></a> <a href=#element>element</a>, optionally intermixed
with <a href=#script-supporting-elements>script-supporting elements</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-subsup-element-in-the-suikawiki/0.9-namespace><code>subsup</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
a pair of subscript and superscript chunks of contents.

</p><p>The <dfn id=subscript-content>subscript content</dfn> of
a <a href=#the-subsup-element-in-the-suikawiki/0.9-namespace><code>subsup</code></a> <a href=#element>element</a> is the
first <a href=#the-subscript-element-in-the-suikawiki/0.9-namespace><code>subscript</code></a> <a href=#element>element</a> <span>child</span>,
if any.

</p><p>The <dfn id=superscript-content>superscript content</dfn> of
a <a href=#the-subsup-element-in-the-suikawiki/0.9-namespace><code>subsup</code></a> <a href=#element>element</a> is the
first <span>child</span> <a href=#the-superscript-element-in-the-suikawiki/0.9-namespace><code>superscript</code></a> <a href=#element>element</a>,
if any, after the <a href=#subscript-content>subscript content</a> if there is.

</p><p>Any other <span>child</span> <a href=#represents>represents</a> nothing.

</p><p>It is <span>expected</span> that the <a href=#subscript-content>subscript content</a>
is rendered as subscript and the <a href=#superscript-content>superscript content</a> is
rendered as superscript sharing the same horizontal spaces.

</p></section>

<section>
<h1 id=the-subscript-element-in-the-suikawiki/0.9-namespace><span class=secno>9.10.4 </span>The <dfn><code>subscript</code></dfn> <a href=#element>element</a> in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-subscript-element-in-the-suikawiki/0.9-namespace><code>subscript</code></a> <a href=#element>element</a> is equivalent to
the <a href=#sub><code>sub</code></a> <a href=#element>element</a>.

</p></section>

<section>
<h1 id=the-superscript-element-in-the-suikawiki/0.9-namespace><span class=secno>9.10.5 </span>The <dfn><code>superscript</code></dfn> <a href=#element>element</a> in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-superscript-element-in-the-suikawiki/0.9-namespace><code>superscript</code></a> <a href=#element>element</a> is equivalent to
the <a href=#sup><code>sup</code></a> <a href=#element>element</a>.

</p></section>


</section>

<section>
<h1 id=values><span class=secno>9.11 </span>Values</h1>

<p>Some elements are defined as <dfn id=elements-with-value>elements with value</dfn>.  For
an <a href=#elements-with-value title="elements with value">element <var>element</var> with
value</a>, the <dfn id=element-value>element value</dfn> is the value returned by
the following steps:

  </p><ol class=steps>

  <li>If <var>element</var> has
  a <span>child</span> <a href=#the-attrvalue-element-in-the-suikawiki/0.10-namespace><code>attrvalue</code></a> <a href=#element>element</a>:

    <ol>

    <li>Let <var>value element</var> be the
    first <a href=#the-attrvalue-element-in-the-suikawiki/0.10-namespace><code>attrvalue</code></a> <a href=#element>element</a> <span>child</span>
    of <var>element</var>.

    </li><li>Return the <a href=#concept-element-text-content title=concept-element-text-content>text
    content</a> of <var>element</var>.

    </li></ol>

  </li><li>Otherwise, return
  the <a href=#concept-element-text-content title=concept-element-text-content>text content</a>
  of <var>element</var>.

  </li></ol>

<section>

<h1 id=the-f-element-in-the-suikawiki/0.9-namespace><span class=secno>9.11.1 </span>The <dfn><code>f</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.
</dd><dd><a href=#implicit-link-elements>Implicit link elements</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-f-element-in-the-suikawiki/0.9-namespace><code>f</code></a> <a href=#element>element</a> <a href=#represents>represents</a> a
field name or key of some structure, such as a field name of a C data
structure, a key of a Perl hash, or a property name of an XML
information item.

</p></section>

<section>

<h1 id=the-key-element-in-the-suikawiki/0.10-namespace><span class=secno>9.11.2 </span>The <dfn><code>key</code></dfn> element in the
<a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.
</dd><dd><a href=#implicit-link-elements>Implicit link elements</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p class=XXX>...

</p></section>

<section>

<h1 id=the-n-element-in-the-suikawiki/0.9-namespace><span class=secno>9.11.3 </span>The <dfn><code>n</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.
</dd><dd><a href=#implicit-link-elements>Implicit link elements</a>.
</dd><dd><a href=#elements-with-value>Elements with value</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>, optionally followed by
an <a href=#the-attrvalue-element-in-the-suikawiki/0.10-namespace><code>attrvalue</code></a> <a href=#element>element</a>, optionally intermixed
with <a href=#script-supporting-elements>script-supporting elements</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-n-element-in-the-suikawiki/0.9-namespace><code>n</code></a> <a href=#element>element</a> <a href=#represents>represents</a> the
number given as the <a href=#element-value>element value</a>.

</p></section>

<section>
<h1 id=the-lat-element-in-the-suikawiki/0.9-namespace><span class=secno>9.11.4 </span>The <dfn><code>lat</code></dfn> <a href=#element>element</a> in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.
</dd><dd><a href=#implicit-link-elements>Implicit link elements</a>.
</dd><dd><a href=#elements-with-value>Elements with value</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>, optionally followed by
an <a href=#the-attrvalue-element-in-the-suikawiki/0.10-namespace><code>attrvalue</code></a> element, optionally intermixed
with <a href=#script-supporting-elements>script-supporting elements</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-lat-element-in-the-suikawiki/0.9-namespace><code>lat</code></a> <a href=#element>element</a> <a href=#represents>represents</a> a
latitude given as the <a href=#element-value>element value</a>.

</p></section>

<section>
<h1 id=the-lon-element-in-the-suikawiki/0.9-namespace><span class=secno>9.11.5 </span>The <dfn><code>lon</code></dfn> <a href=#element>element</a> in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.
</dd><dd><a href=#implicit-link-elements>Implicit link elements</a>.
</dd><dd><a href=#elements-with-value>Elements with value</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>, optionally followed by
an <a href=#the-attrvalue-element-in-the-suikawiki/0.10-namespace><code>attrvalue</code></a> element, optionally intermixed
with <a href=#script-supporting-elements>script-supporting elements</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-lon-element-in-the-suikawiki/0.9-namespace><code>lon</code></a> element <a href=#represents>represents</a> a longitude
given as the <a href=#element-value>element value</a>.

</p></section>

<section>
<h1 id=the-tz-element-in-the-suikawiki/0.9-namespace><span class=secno>9.11.6 </span>The <dfn><code>tz</code></dfn> <a href=#element>element</a> in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.
</dd><dd><a href=#implicit-link-elements>Implicit link elements</a>.
</dd><dd><a href=#elements-with-value>Elements with value</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>, optionally followed by
an <a href=#the-attrvalue-element-in-the-suikawiki/0.10-namespace><code>attrvalue</code></a> element, optionally intermixed
with <a href=#script-supporting-elements>script-supporting elements</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>A <a href=#the-tz-element-in-the-suikawiki/0.9-namespace><code>tz</code></a> element <a href=#represents>represents</a> a time-zone
offset given as the <a href=#element-value>element value</a>.

</p></section>

<section>

<h1 id=the-attrvalue-element-in-the-suikawiki/0.10-namespace><span class=secno>9.11.7 </span>The <dfn><code>attrvalue</code></dfn> element in the
<a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-attrvalue-element-in-the-suikawiki/0.10-namespace><code>attrvalue</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
the <a href=#element-value>element value</a> of
the <a href=#parent>parent</a> <a href=#element>element</a>, if applicable, or the
text that would be set to the <code>datetime</code>
<a href=#attribute>attribute</a> of
the <a href=#parent>parent</a> <a href=#element>element</a>, if it is
a <a href=#time><code>time</code></a> <a href=#element>element</a> without
a <code>datetime</code> <a href=#attribute>attribute</a>.  Otherwise,
it <a href=#represents>represents</a> nothing.

</p><p>An <a href=#the-attrvalue-element-in-the-suikawiki/0.10-namespace><code>attrvalue</code></a> <em class=rfc2119>MAY</em> be the last
non-<a href=#script-supporting-elements title="script-supporting elements">script-supporting</a>
<span>child</span> <a href=#element>element</a> of
a <a href=#time><code>time</code></a> <a href=#element>element</a>.

</p><p>An <a href=#the-attrvalue-element-in-the-suikawiki/0.10-namespace><code>attrvalue</code></a> <em class=rfc2119>MUST NOT</em> be used
when it <a href=#represents>represents</a> nothing.

</p></section>

</section>

<section>
<h1 id=conformance-keywords><span class=secno>9.12 </span>Conformance keywords</h1>

<a href=#element title=element>Elements</a> in this section <a href=#represents>represents</a> 
<dfn id=rfc-2119-keyword title="RFC 2119 keyword">keywords</dfn> defined in
<a href=https://tools.ietf.org/html/rfc2119>RFC 2119</a>.

<section>

<h1 id=the-must-element-in-the-suikawiki/0.9-namespace><span class=secno>9.12.1 </span>The <dfn><code>MUST</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.
</dd><dd><a href=#implicit-link-elements>Implicit link elements</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-must-element-in-the-suikawiki/0.9-namespace><code>MUST</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
an <a href=#rfc-2119-keyword>RFC 2119 keyword</a>
<a href=https://tools.ietf.org/html/rfc2119#section-1>"<em class=rfc2119>MUST</em>"</a>.
It can also be used for <a href=#rfc-2119-keyword title="RFC 2119 keyword">keywords</a>
<a href=https://tools.ietf.org/html/rfc2119#section-1>"<em class=rfc2119>REQUIRED</em>"</a>,
<a href=https://tools.ietf.org/html/rfc2119#section-1>"<em class=rfc2119>SHALL</em>"</a>,
<a href=https://tools.ietf.org/html/rfc2119#section-2>"<em class=rfc2119>MUST
NOT</em>"</a>, and
<a href=https://tools.ietf.org/html/rfc2119#section-2>"<em class=rfc2119>SHALL
NOT</em>"</a>.

</p></section>

<section>

<h1 id=the-should-element-in-the-suikawiki/0.9-namespace><span class=secno>9.12.2 </span>The <dfn><code>SHOULD</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.
</dd><dd><a href=#implicit-link-elements>Implicit link elements</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-should-element-in-the-suikawiki/0.9-namespace><code>SHOULD</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
an <a href=#rfc-2119-keyword>RFC 2119 keyword</a>
<a href=https://tools.ietf.org/html/rfc2119#section-3>"<em class=rfc2119>SHOULD</em>"</a>.
It can also be used for <a href=#rfc-2119-keyword title="RFC 2119 keyword">keywords</a>
<a href=https://tools.ietf.org/html/rfc2119#section-3>"<em class=rfc2119>RECOMMENDED</em>"</a>,
<a href=https://tools.ietf.org/html/rfc2119#section-4>"<em class=rfc2119>SHOULD
NOT</em>"</a>, and
<a href=https://tools.ietf.org/html/rfc2119#section-4>"<em class=rfc2119>NOT
RECOMMENDED</em>"</a>.

</p></section>

<section>

<h1 id=the-may-element-in-the-suikawiki/0.9-namespace><span class=secno>9.12.3 </span>The <dfn><code>MAY</code></dfn> element in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.
</dd><dd><a href=#implicit-link-elements>Implicit link elements</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-may-element-in-the-suikawiki/0.9-namespace><code>MAY</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
an <a href=#rfc-2119-keyword>RFC 2119 keyword</a>
<a href=https://tools.ietf.org/html/rfc2119#section-5>"<em class=rfc2119>MAY</em>"</a>.
It can also be used for <a href=#rfc-2119-keyword title="RFC 2119 keyword">keyword</a>
<a href=https://tools.ietf.org/html/rfc2119#section-3>"<em class=rfc2119>OPTIONAL</em>"</a>.

</p></section>

</section>

<section>
<h1 id=physical-representations><span class=secno>9.13 </span>Physical representations</h1>

<section>
<h1 id=the-smallcaps-element-in-the-suikawiki/0.9-namespace><span class=secno>9.13.1 </span>The <dfn><code>smallcaps</code></dfn> <a href=#element>element</a> in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-smallcaps-element-in-the-suikawiki/0.9-namespace><code>smallcaps</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
a text in small-capitals.

</p><p>The <span title=character>characters</span> in
the <a href=#the-smallcaps-element-in-the-suikawiki/0.9-namespace><code>smallcaps</code></a> <a href=#element>element</a>, including but not
limited to uppercase and lowercase latin letters,
are <span>expected</span> to be rendered using small-capital glyphs,
whenever possible.

</p></section>

<section>
<h1 id=the-yoko-element-in-the-suikawiki/0.9-namespace><span class=secno>9.13.2 </span>The <dfn><code>yoko</code></dfn> <a href=#element>element</a> in the
<a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p>The <a href=#the-yoko-element-in-the-suikawiki/0.9-namespace><code>yoko</code></a> <a href=#element>element</a> <a href=#represents>represents</a>
a horizontal text span in a vertically-flowed text (known
as <span lang=ja>縦中横</span>).

</p><p>It is <span>expected</span> that the <span>content</span> is
rendered horizontally even when its <a href=#parent>parent</a> is rendered
vertically.

</p></section>


</section>

<section>
<h1 id=qualified-names><span class=secno>9.14 </span>Qualified names</h1>

<section>

<h1 id=the-qn-element-in-the-suikawiki/0.10-namespace><span class=secno>9.14.1 </span>The <dfn><code>qn</code></dfn> element in the <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10
namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.
</dd><dd><a href=#flow-content>Flow content</a>.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>, optionally followed by a
<a href=#the-nsuri-element-in-the-suikawiki/0.10-namespace><code>nsuri</code></a> <a href=#element>element</a>, optionally intermixed
with <a href=#script-supporting-elements>script-supporting elements</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p class=XXX>...

</p></section>

<section>

<h1 id=the-qname-element-in-the-suikawiki/0.10-namespace><span class=secno>9.14.2 </span>The <dfn><code>qname</code></dfn> element in the
<a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd>None.

</dd></dl>

<p>This element <em class=rfc2119>MUST NOT</em> be used.

</p><p class=XXX>...

</p></section>

<section>

<h1 id=the-nsuri-element-in-the-suikawiki/0.10-namespace><span class=secno>9.14.3 </span>The <dfn><code>nsuri</code></dfn> element in the
<a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None.

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd>None.

</dd></dl>

<p class=XXX>...

</p></section>

</section>

<section>
<h1 id=fallback-elements><span class=secno>9.15 </span>Fallback elements</h1>

<section>

<h1 id=uppercase-elements-in-the-suikawiki/0.10-namespace><span class=secno>9.15.1 </span><a href=#uppercase-elements>Uppercase elements</a> in the <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10
namespace</a></h1>

<dl class=element>

<dt><a href=#category>Category</a>

</dt><dd>None. <!-- Phrasing content -->

</dd><dt><a href=#content-model>Content model</a>

</dt><dd><a href=#phrasing-content>Phrasing content</a>.

</dd><dt><a href=#allowed-attributes>Allowed attributes</a>

</dt><dd><a href=#the-class-attribute><code>class</code></a>

</dd></dl>

<p><dfn id=uppercase-elements>Uppercase elements</dfn> are elements in the
<a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a> whose local name consists of one
or more <a href=#uppercase-letters>uppercase letters</a>.

</p><p>These elements <em class=rfc2119>MUST NOT</em> be used.

</p><div class="note memo">

<p>These elements might be inserted into a <a href=#node-tree>node tree</a> by
a <a href=#swml-text-serialization-parser title="SWML text serialization parser">parser</a> when an
<span>inline start tag</span> with unknown <span>tag name</span> is
found.

</p></div>

</section>

</section>

</section>

<section>
<h1 id=security><span class=secno>10 </span>Security</h1>

<p>The <a href=#node-tree>node tree</a> returned by the <a href=#parsing-an-swml-text-serialization title="parsing an
SWML text serialization">parsing algorithm</a> does not contain
any <code>script</code> <a href=#element>element</a><!-- in HTML/SVG namespace
-->.  The following <span title=node>nodes</span> might
contain <a href=#url title=URL>URLs</a>, which might be potentially
dangerous (e.g. <code>javascript:</code> URL):

  </p><ul>

  <li>The <a href=#the-resparameter-attribute-in-the-suikawiki/0.9-namespace><code title=attr-sw-res-parameter>resParameter</code></a>
  <a href=#attribute>attribute</a> in the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a>

  </li><li>The <a href=#the-nsuri-element-in-the-suikawiki/0.10-namespace><code>nsuri</code></a> <a href=#element>element</a> in
  the <a href=#suikawiki/0.10-namespace>SuikaWiki/0.10 namespace</a>

  </li></ul>

<p>The <a href=#the-image-element-in-the-suikawiki/0.9-namespace><code>image</code></a> <a href=#element>element</a> in
the <a href=#suikawiki/0.9-namespace>SuikaWiki/0.9 namespace</a> might contain
a <a href=#forgiving-base64-encode title="forgiving-base64 encode">Base64-encoded</a> binary
data that is not in fact an image (e.g an executable binary).

</p></section>

<section class=reference>
<h1 class=no-num id=references>References</h1>

<section class="reference normative">
<h1 class=no-num id=normative-references>Normative references</h1>

<dl>

<dt id=ref-MANAKAI>MANAKAI

</dt><dd class=XXX>manakai's DOM extensions.

</dd><dt id=ref-XHTML2>XHTML2

</dt><dd class=XXX>...

</dd></dl>

</section>

</section>

<section>
<h1 class=no-num id=tests-and-implementation>Tests and implementation</h1>

<p>There
are <a href=https://github.com/wakaba/tests-web/tree/master/swml>test
data</a>.

</p><p>There is
a <a href=https://github.com/suikawiki/perl-swml-parser>Perl
implementation</a>.

</p></section>

<section>
<h1 class=no-num id=author>Author</h1>

<p>This document is written
by <a href=https://suika.suikawiki.org/~wakaba/who?>Wakaba</a>
&lt;wakaba@suikawiki.org&gt;.

</p><p>This document is developed as part of
the <a href=https://suikawiki.org/>SuikaWiki project</a>.

</p><p>Per <a href=https://creativecommons.org/publicdomain/zero/1.0/>CC0</a>,
to the extent possible under law, the author has waived all copyright
and related or neighboring rights to this work.

</p></section>
</body></html>